<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>What is MySQL? | CODE FARM</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="What is MySQL?" />
<meta property="og:locale" content="en" />
<meta name="description" content="1. Deploying MySQL on Linux with Docker 1.1. Starting a MySQL Server Instance 1.2. Using a custom MySQL configuration file 1.3. Creating database dumps 1.4. Restoring data from dump files 1.5. Connecting to and Disconnecting from the Server 2. Entering Queries 3. Creating and Using a Database 3.1. Creating and Selecting a Database 3.2. Creating a Table 3.3. Loading Data into a Table 3.4. Retrieving Information from a Table 4. Security 4.1. Security Guidelines 4.2. Access Control and Account Management 4.3. Account User Names and Passwords 4.4. Privileges Provided by MySQL 4.5. Grant Tables 4.6. Specifying Account Names 4.7. Specifying Role Names 4.8. Access Control, Stage 1: Connection Verification 4.9. Access Control, Stage 2: Request Verification 4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts 4.10.1. Creating Accounts and Granting Privileges 4.10.2. Checking Account Privileges and Properties 4.10.3. Revoking Account Privileges 4.10.4. Dropping Accounts 4.11. Assigning Account Passwords 4.12. Account Locking 5. Backup and Recovery 5.1. Using mysqldump for Backups 5.1.1. Dumping Data in SQL Format with mysqldump 5.1.2. Reloading SQL-Format Backups 6. The InnoDB Storage Engine 7. References 1. Deploying MySQL on Linux with Docker 1.1. Starting a MySQL Server Instance To start a new Docker container for a MySQL Server, use the following command: docker run --name=container_name [--restart on-failure] -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes [-e MYSQL_ONETIME_PASSWORD=yes] image_name:tag $ docker run --name mysql8 -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes mysql:8 b4b86043b5562bb9069d82a663e2beae7fb417d6c3a005ade1a9b48ced6048f5 $ docker logs mysql8 2&gt;&amp;1 | grep GENERATED 2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi $ docker logs mysql8 2021-12-29 08:21:58+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started. 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Switching to dedicated user &#39;mysql&#39; 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started. 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Initializing database files ... 2021-12-29 08:22:05+00:00 [Note] [Entrypoint]: Starting temporary server ... 2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi ... 2021-12-29 08:22:11+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up. 2021-12-29T08:22:12.185059Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.27) starting as process 1 2021-12-29T08:22:12.193270Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. 2021-12-29T08:22:12.948002Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: &#39;8.0.27&#39; socket: &#39;/var/run/mysqld/mysqld.sock&#39; port: 3306 MySQL Community Server - GPL. 1.2. Using a custom MySQL configuration file docker run \ --name some-mysql \ -v /my/custom:/etc/mysql/conf.d \ (1) -v /my/own/datadir:/var/lib/mysql \ (2) -e MYSQL_ROOT_PASSWORD=my-secret-pw \ -d \ mysql:tag 1 The default configuration for MySQL can be found in /etc/mysql/my.cnf, which may !includedir additional directories such as /etc/mysql/conf.d or /etc/mysql/mysql.conf.d. If /my/custom/config-file.cnf is the path and name of your custom configuration file, you can start your mysql container like this (note that only the directory path of the custom config file is used in this command): This will start a new container some-mysql where the MySQL instance uses the combined startup settings from /etc/mysql/my.cnf and /etc/mysql/conf.d/config-file.cnf, with settings from the latter taking precedence. 2 The -v /my/own/datadir:/var/lib/mysql part of the command mounts the /my/own/datadir directory from the underlying host system as /var/lib/mysql inside the container, where MySQL by default will write its data files. 1.3. Creating database dumps docker exec some-mysql \ sh -c &#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /some/path/on/your/host/all-databases.sql 1.4. Restoring data from dump files docker exec -i some-mysql \ sh -c &#39;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &lt; /some/path/on/your/host/all-databases.sql 1.5. Connecting to and Disconnecting from the Server To connect to the server, you usually need to provide a MySQL user name when you invoke mysql and, most likely, a password. If the server runs on a machine other than the one where you log in, you must also specify a host name. $&gt; mysql -h host -u user -p Enter password: ******** host and user represent the host name where your MySQL server is running and the user name of your MySQL account. Substitute appropriate values for your setup. The ******** represents your password; enter it when mysql displays the Enter password: prompt. $ docker exec -it mysql8 mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 9 Server version: 8.0.27 MySQL Community Server - GPL Copyright (c) 2000, 2021, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; \q Bye 2. Entering Queries Here is a simple query that asks the server to tell you its version number and the current date. Type it in as shown here following the mysql&gt; prompt and press Enter: $ docker exec -it mysql8 mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 10 Server version: 8.0.27 MySQL Community Server - GPL Copyright (c) 2000, 2021, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; SELECT VERSION(), CURRENT_DATE; +-----------+--------------+ | VERSION() | CURRENT_DATE | +-----------+--------------+ | 8.0.27 | 2021-12-29 | +-----------+--------------+ 1 row in set (0.00 sec) This query illustrates several things about mysql: A query normally consists of an SQL statement followed by a semicolon. When you issue a query, mysql sends it to the server for execution and displays the results, then prints another mysql&gt; prompt to indicate that it is ready for another query. mysql displays query output in tabular form (rows and columns). The first row contains labels for the columns. The rows following are the query results. mysql shows how many rows were returned and how long the query took to execute, which gives you a rough idea of server performance. These values are imprecise because they represent wall clock time (not CPU or machine time), and because they are affected by factors such as server load and network latency. Keywords may be entered in any lettercase. The following queries are equivalent: mysql&gt; SELECT VERSION(), CURRENT_DATE; mysql&gt; select version(), current_date; mysql&gt; SeLeCt vErSiOn(), current_DATE; Here is another query. It demonstrates that you can use mysql as a simple calculator: mysql&gt; SELECT SIN(PI()/4), (4+1)*5; +-------------------------+---------+ | SIN(PI()/4) | (4+1)*5 | +-------------------------+---------+ | 0.7071067811865475 | 25 | +-------------------------+---------+ 1 row in set (0.00 sec) You can even enter multiple statements on a single line. Just end each one with a semicolon: mysql&gt; SELECT VERSION(); SELECT NOW(); +-----------+ | VERSION() | +-----------+ | 8.0.27 | +-----------+ 1 row in set (0.00 sec) +---------------------+ | NOW() | +---------------------+ | 2021-12-29 09:18:28 | +---------------------+ 1 row in set (0.00 sec) Here is a simple multiple-line statement: mysql&gt; SELECT -&gt; USER() -&gt; , -&gt; CURRENT_DATE -&gt; ; +----------------+----------------+ | USER() | CURRENT_DATE | +----------------+----------------+ | root@localhost | 2021-12-29 | +----------------+----------------+ 1 row in set (0.00 sec) 3. Creating and Using a Database Use the SHOW statement to find out what databases currently exist on the server: mysql&gt; SHOW DATABASES; +------------------------------------------------------------------+ | Database | +------------------------------------------------------------------+ | information_schema | | mysql | | performance_schema | | sys | +------------------------------------------------------------------+ 4 rows in set (0.01 sec) The list of databases displayed by the statement may be different on your machine; SHOW DATABASES does not show databases that you have no privileges for if you do not have the SHOW DATABASES privilege. 3.1. Creating and Selecting a Database If the administrator creates your database for you when setting up your permissions, you can begin using it. Otherwise, you need to create it yourself: mysql&gt; CREATE DATABASE test; Query OK, 1 row affected (0.02 sec) Under Unix, database names are case-sensitive (unlike SQL keywords), so you must always refer to your database as test, not as Test, TEST, or some other variant. This is also true for table names. Creating a database does not select it for use; you must do that explicitly. To make menagerie the current database, use this statement: mysql&gt; SELECT DATABASE(); +------------------------------------+ | DATABASE() | +------------------------------------+ | NULL | +------------------------------------+ 1 row in set (0.00 sec) mysql&gt; USE test Database changed mysql&gt; SELECT DATABASE(); +------------------------------------+ | DATABASE() | +------------------------------------+ | test | +------------------------------------+ 1 row in set (0.00 sec) Your database needs to be created only once, but you must select it for use each time you begin a mysql session. You can do this by issuing a USE statement as shown in the example. Alternatively, you can select the database on the command line when you invoke mysql. Just specify its name after any connection parameters that you might need to provide. For example: $ docker exec -it mysql8 mysql -u root -p test Enter password: ... Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; SELECT DATABASE(); +------------+ | DATABASE() | +------------+ | test | +------------+ 1 row in set (0.00 sec) mysql&gt; 3.2. Creating a Table Creating the database is the easy part, but at this point it is empty, as SHOW TABLES tells you: mysql&gt; SHOW TABLES; Empty set (0.01 sec) Use a CREATE TABLE statement to specify the layout of your table: mysql&gt; CREATE TABLE pet ( -&gt; name VARCHAR(20), -&gt; owner VARCHAR(20), -&gt; species VARCHAR(20), -&gt; sex CHAR(1), -&gt; birth DATE, -&gt; death DATE -&gt; ); Query OK, 0 rows affected (0.03 sec) If you make a poor choice and it turns out later that you need a longer field, MySQL provides an ALTER TABLE statement. Once you have created a table, SHOW TABLES should produce some output: mysql&gt; SHOW TABLES; +----------------+ | Tables_in_test | +----------------+ | pet | +----------------+ 1 row in set (0.01 sec) mysql&gt; SHOW TABLES IN test; +----------------+ | Tables_in_test | +----------------+ | pet | +----------------+ 1 row in set (0.00 sec) To verify that your table was created the way you expected, use a DESCRIBE statement: mysql&gt; DESCRIBE pet; +---------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +---------+-------------+------+-----+---------+-------+ | name | varchar(20) | YES | | NULL | | | owner | varchar(20) | YES | | NULL | | | species | varchar(20) | YES | | NULL | | | sex | char(1) | YES | | NULL | | | birth | date | YES | | NULL | | | death | date | YES | | NULL | | +---------+-------------+------+-----+---------+-------+ 6 rows in set (0.07 sec) 3.3. Loading Data into a Table After creating your table, you need to populate it. The LOAD DATA and INSERT statements are useful for this. name owner species sex birth death Fluffy Harold cat f 1993-02-04 Claws Gwen cat m 1994-03-17 Buffy Harold dog f 1989-05-13 Fang Benny dog m 1990-08-27 Bowser Diane dog m 1979-08-31 1995-07-29 Chirpy Gwen bird f 1998-09-11 Whistler Gwen bird 1997-12-09 Slim Benny snake m 1996-04-29 You could create a text file pet.txt containing one record per line, with values separated by tabs, and given in the order in which the columns were listed in the CREATE TABLE statement. For missing values (such as unknown sexes or death dates for animals that are still living), you can use NULL values. To represent these in your text file, use \N (backslash, capital-N). For example, the record for Whistler the bird would look like this (where the whitespace between values is a single tab character): Whistler Gwen bird \N 1997-12-09 \N To load the text file pet.txt into the pet table, use this statement: mysql&gt; LOAD DATA LOCAL INFILE &#39;/path/pet.txt&#39; INTO TABLE pet; When you want to add new records one at a time, the INSERT statement is useful. In its simplest form, you supply values for each column, in the order in which the columns were listed in the CREATE TABLE statement. Suppose that Diane gets a new hamster named “Puffball.” You could add a new record using an INSERT statement like this: mysql&gt; INSERT INTO pet -&gt; VALUES ( -&gt; &#39;Puffball&#39;, -&gt; &#39;Diane&#39;, -&gt; &#39;hamster&#39;, -&gt; &#39;f&#39;, -&gt; &#39;1999-03-30&#39;, -&gt; NULL -&gt; ); Query OK, 1 row affected (0.03 sec) String and date values are specified as quoted strings here. Also, with INSERT, you can insert NULL directly to represent a missing value. You do not use \N like you do with LOAD DATA. 3.4. Retrieving Information from a Table Selecting All Data mysql&gt; SELECT * FROM pet; +----------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+--------+---------+------+------------+------------+ | Puffball | Diane | hamster | f | 1999-03-30 | NULL | | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Fang | Benny | dog | m | 1990-08-27 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Chirpy | Gwen | bird | f | 1998-09-11 | NULL | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | | Slim | Benny | snake | m | 1996-04-29 | NULL | +----------+--------+---------+------+------------+------------+ 9 rows in set (0.00 sec) Selecting Particular Rows mysql&gt; SELECT * FROM pet WHERE name=&#39;Browser&#39;; Empty set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name=&#39;Bowser&#39;; +--------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+-------+---------+------+------------+------------+ | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+-------+---------+------+------------+------------+ 1 row in set (0.00 sec) Selecting Particular Columns mysql&gt; SELECT name,birth FROM pet; +----------+------------+ | name | birth | +----------+------------+ | Puffball | 1999-03-30 | | Fluffy | 1993-02-04 | | Claws | 1994-03-17 | | Buffy | 1989-05-13 | | Fang | 1990-08-27 | | Bowser | 1979-08-31 | | Chirpy | 1998-09-11 | | Whistler | 1997-12-09 | | Slim | 1996-04-29 | +----------+------------+ 9 rows in set (0.00 sec) Sorting Rows mysql&gt; SELECT name,birth FROM pet ORDER BY birth; +----------+------------+ | name | birth | +----------+------------+ | Bowser | 1979-08-31 | | Buffy | 1989-05-13 | | Fang | 1990-08-27 | | Fluffy | 1993-02-04 | | Claws | 1994-03-17 | | Slim | 1996-04-29 | | Whistler | 1997-12-09 | | Chirpy | 1998-09-11 | | Puffball | 1999-03-30 | +----------+------------+ 9 rows in set (0.00 sec) Date Calculations mysql&gt; SELECT name, -&gt; birth, -&gt; CURDATE(), -&gt; TIMESTAMPDIFF(YEAR, birth, CURDATE()) AS age -&gt; FROM pet; +----------+------------+------------+------+ | name | birth | CURDATE() | age | +----------+------------+------------+------+ | Puffball | 1999-03-30 | 2021-12-29 | 22 | | Fluffy | 1993-02-04 | 2021-12-29 | 28 | | Claws | 1994-03-17 | 2021-12-29 | 27 | | Buffy | 1989-05-13 | 2021-12-29 | 32 | | Fang | 1990-08-27 | 2021-12-29 | 31 | | Bowser | 1979-08-31 | 2021-12-29 | 42 | | Chirpy | 1998-09-11 | 2021-12-29 | 23 | | Whistler | 1997-12-09 | 2021-12-29 | 24 | | Slim | 1996-04-29 | 2021-12-29 | 25 | +----------+------------+------------+------+ 9 rows in set (0.01 sec) mysql&gt; SELECT name, -&gt; birth, -&gt; death, -&gt; TIMESTAMPDIFF(YEAR, birth, death) AS age -&gt; FROM pet -&gt; WHERE death IS NOT NULL -&gt; ORDER BY age; +--------+------------+------------+------+ | name | birth | death | age | +--------+------------+------------+------+ | Bowser | 1979-08-31 | 1995-07-29 | 15 | +--------+------------+------------+------+ 1 row in set (0.00 sec) mysql&gt; SELECT name, birth, MONTH(birth) FROM pet; +----------+------------+--------------+ | name | birth | MONTH(birth) | +----------+------------+--------------+ | Puffball | 1999-03-30 | 3 | | Fluffy | 1993-02-04 | 2 | | Claws | 1994-03-17 | 3 | | Buffy | 1989-05-13 | 5 | | Fang | 1990-08-27 | 8 | | Bowser | 1979-08-31 | 8 | | Chirpy | 1998-09-11 | 9 | | Whistler | 1997-12-09 | 12 | | Slim | 1996-04-29 | 4 | +----------+------------+--------------+ 9 rows in set (0.00 sec) mysql&gt; SELECT &#39;2018-10-31&#39; + INTERVAL 1 DAY; +-------------------------------+ | &#39;2018-10-31&#39; + INTERVAL 1 DAY | +-------------------------------+ | 2018-11-01 | +-------------------------------+ 1 row in set (0.00 sec) mysql&gt; SELECT &#39;2018-10-32&#39; + INTERVAL 1 DAY; +-------------------------------+ | &#39;2018-10-32&#39; + INTERVAL 1 DAY | +-------------------------------+ | NULL | +-------------------------------+ 1 row in set, 1 warning (0.00 sec) mysql&gt; SHOW WARNINGS; +---------+------+----------------------------------------+ | Level | Code | Message | +---------+------+----------------------------------------+ | Warning | 1292 | Incorrect datetime value: &#39;2018-10-32&#39; | +---------+------+----------------------------------------+ 1 row in set (0.00 sec) Working with NULL Values mysql&gt; SELECT 1 IS NULL, 1 IS NOT NULL; +-----------+---------------+ | 1 IS NULL | 1 IS NOT NULL | +-----------+---------------+ | 0 | 1 | +-----------+---------------+ 1 row in set (0.00 sec) mysql&gt; SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL; +----------+-----------+----------+----------+ | 1 = NULL | 1 &lt;&gt; NULL | 1 &lt; NULL | 1 &gt; NULL | +----------+-----------+----------+----------+ | NULL | NULL | NULL | NULL | +----------+-----------+----------+----------+ 1 row in set (0.00 sec) mysql&gt; SELECT 0 IS NULL, 0 IS NOT NULL, &#39;&#39; IS NULL, &#39;&#39; IS NOT NULL; +-----------+---------------+------------+----------------+ | 0 IS NULL | 0 IS NOT NULL | &#39;&#39; IS NULL | &#39;&#39; IS NOT NULL | +-----------+---------------+------------+----------------+ | 0 | 1 | 0 | 1 | +-----------+---------------+------------+----------------+ 1 row in set (0.00 sec) Pattern Matching mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;b%&#39;; +--------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+------------+ | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+--------+---------+------+------------+------------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;%fy&#39;; +--------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+-------+ | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +--------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;%w%&#39;; +----------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+-------+---------+------+------------+------------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | +----------+-------+---------+------+------------+------------+ 3 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;_____&#39;; +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^b&#39;); +--------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+------------+ | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+--------+---------+------+------------+------------+ 2 rows in set (0.01 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;fy$&#39;); +--------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+-------+ | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +--------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;w&#39;); +----------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+-------+---------+------+------------+------------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | +----------+-------+---------+------+------------+------------+ 3 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^.....$&#39;); +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^.{5}$&#39;); +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) Counting Rows mysql&gt; SELECT COUNT(*) FROM pet; +----------+ | COUNT(*) | +----------+ | 9 | +----------+ 1 row in set (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet GROUP BY owner; +--------+----------+ | owner | COUNT(*) | +--------+----------+ | Diane | 2 | | Harold | 2 | | Gwen | 3 | | Benny | 2 | +--------+----------+ 4 rows in set (0.00 sec) mysql&gt; SET sql_mode = &#39;ONLY_FULL_GROUP_BY&#39;; Query OK, 0 rows affected (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet; ERROR 1140 (42000): In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggregated column &#39;test.pet.owner&#39;; this is incompatible with sql_mode=only_full_group_by mysql&gt; SET sql_mode = &#39;&#39;; Query OK, 0 rows affected (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet; +-------+----------+ | owner | COUNT(*) | +-------+----------+ | Diane | 9 | +-------+----------+ 1 row in set (0.00 sec) Using More Than one Table event.sql CREATE TABLE event ( name VARCHAR(20), date DATE, type VARCHAR(15), remark VARCHAR(255) ); INSERT INTO event VALUES(&#39;Fluffy&#39;,&#39;1995-05-15&#39;,&#39;litter&#39;,&#39;4 kittens, 3 female, 1 male&#39;); INSERT INTO event VALUES(&#39;Buffy&#39;,&#39;1993-06-23&#39;,&#39;litter&#39;,&#39;5 puppies, 2 female, 3 male&#39;); INSERT INTO event VALUES(&#39;Buffy&#39;,&#39;1994-06-19&#39;,&#39;litter&#39;,&#39;3 puppies, 3 female&#39;); INSERT INTO event VALUES(&#39;Chirpy&#39;,&#39;1999-03-21&#39;,&#39;vet&#39;,&#39;needed beak straightened&#39;); INSERT INTO event VALUES(&#39;Slim&#39;,&#39;1997-08-03&#39;,&#39;vet&#39;,&#39;broken rib&#39;); INSERT INTO event VALUES(&#39;Bowser&#39;,&#39;1991-10-12&#39;,&#39;kennel&#39;,NULL); INSERT INTO event VALUES(&#39;Fang&#39;,&#39;1991-10-12&#39;,&#39;kennel&#39;,NULL); INSERT INTO event VALUES(&#39;Fang&#39;,&#39;1998-08-28&#39;,&#39;birthday&#39;,&#39;Gave him a new chew toy&#39;); INSERT INTO event VALUES(&#39;Claws&#39;,&#39;1998-03-17&#39;,&#39;birthday&#39;,&#39;Gave him a new flea collar&#39;); INSERT INTO event values(&#39;Whistler&#39;,&#39;1998-12-09&#39;,&#39;birthday&#39;,&#39;First birthday&#39;); $ docker exec -it mysql8 sh -c &quot;mysql -u root -p test &lt; event.sql&quot; Enter password: ***** mysql&gt; SHOW TABLES; +----------------+ | Tables_in_test | +----------------+ | event | | pet | +----------------+ 2 rows in set (0.02 sec) mysql&gt; DESCRIBE event; +--------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +--------+--------------+------+-----+---------+-------+ | name | varchar(20) | YES | | NULL | | | date | date | YES | | NULL | | | type | varchar(15) | YES | | NULL | | | remark | varchar(255) | YES | | NULL | | +--------+--------------+------+-----+---------+-------+ 4 rows in set (0.03 sec) mysql&gt; SELECT pet.name, -&gt; TIMESTAMPDIFF(YEAR, birth, date) AS age, -&gt; remark -&gt; FROM pet -&gt; INNER JOIN event ON pet.name = event.name -&gt; WHERE event.type = &#39;litter&#39;; +--------+------+-----------------------------+ | name | age | remark | +--------+------+-----------------------------+ | Fluffy | 2 | 4 kittens, 3 female, 1 male | | Buffy | 5 | 3 puppies, 3 female | | Buffy | 4 | 5 puppies, 2 female, 3 male | +--------+------+-----------------------------+ 3 rows in set (0.00 sec) 4. Security When thinking about security within a MySQL installation, you should consider a wide range of possible topics and how they affect the security of your MySQL server and related applications: General factors that affect security. These include choosing good passwords, not granting unnecessary privileges to users, ensuring application security by preventing SQL injections and data corruption, and others. Security of the installation itself. The data files, log files, and the all the application files of your installation should be protected to ensure that they are not readable or writable by unauthorized parties. Access control and security within the database system itself, including the users and databases granted with access to the databases, views and stored programs in use within the database. The features offered by security-related plugins. Network security of MySQL and your system. The security is related to the grants for individual users, but you may also wish to restrict MySQL so that it is available only locally on the MySQL server host, or to a limited set of other hosts. Ensure that you have adequate and appropriate backups of your database files, configuration and log files. Also be sure that you have a recovery solution in place and test that you are able to successfully recover the information from your backups. 4.1. Security Guidelines Anyone using MySQL on a computer connected to the Internet should read this section to avoid the most common security mistakes. In discussing security, it is necessary to consider fully protecting the entire server host (not just the MySQL server) against all types of applicable attacks: eavesdropping, altering, playback, and denial of service. MySQL uses security based on Access Control Lists (ACLs) for all connections, queries, and other operations that users can attempt to perform. There is also support for SSL-encrypted connections between MySQL clients and servers. Many of the concepts discussed here are not specific to MySQL at all; the same general ideas apply to almost all applications. When running MySQL, follow these guidelines: Do not ever give anyone (except MySQL root accounts) access to the user table in the mysql system database! This is critical. Learn how the MySQL access privilege system works. Use the GRANT and REVOKE statements to control access to MySQL. Do not grant more privileges than necessary. Never grant privileges to all hosts. Do not store cleartext passwords in your database. If your computer becomes compromised, the intruder can take the full list of passwords and use them. Instead, use SHA2() or some other one-way hashing function and store the hash value. To prevent password recovery using rainbow tables, do not use these functions on a plain password; instead, choose some string to be used as a salt, and use hash(hash(password)+salt) values. Invest in a firewall. This protects you from at least 50% of all types of exploits in any software. Put MySQL behind the firewall or in a demilitarized zone (DMZ). Applications that access MySQL should not trust any data entered by users, and should be written using proper defensive programming techniques. Do not transmit plain (unencrypted) data over the Internet. Learn to use the tcpdump and strings utilities. In most cases, you can check whether MySQL data streams are unencrypted by issuing a command like the following: $ tcpdump -l -i eth0 -w - src or dst port 3306 | strings 4.2. Access Control and Account Management MySQL enables the creation of accounts that permit client users to connect to the server and access data managed by the server. The primary function of the MySQL privilege system is to authenticate a user who connects from a given host and to associate that user with privileges on a database such as SELECT, INSERT, UPDATE, and DELETE. Additional functionality includes the ability to grant privileges for administrative operations. To control which users can connect, each account can be assigned authentication credentials such as a password. The user interface to MySQL accounts consists of SQL statements such as CREATE USER, GRANT, and REVOKE. The MySQL privilege system ensures that all users may perform only the operations permitted to them. As a user, when you connect to a MySQL server, your identity is determined by the host from which you connect and the user name you specify. When you issue requests after connecting, the system grants privileges according to your identity and what you want to do. MySQL considers both your host name and user name in identifying you because there is no reason to assume that a given user name belongs to the same person on all hosts. To see what privileges a given account has, use the SHOW GRANTS statement. For example: SHOW GRANTS FOR &#39;joe&#39;@&#39;office.example.com&#39;; SHOW GRANTS FOR &#39;joe&#39;@&#39;home.example.com&#39;; MySQL access control involves two stages when you run a client program that connects to the server: Stage 1: The server accepts or rejects the connection based on your identity and whether you can verify your identity by supplying the correct password. Stage 2: Assuming that you can connect, the server checks each statement you issue to determine whether you have sufficient privileges to perform it. 4.3. Account User Names and Passwords MySQL stores accounts in the user table of the mysql system database. An account is defined in terms of a user name and the client host or hosts from which the user can connect to the server. mysql&gt; DESCRIBE mysql.user; +--------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Field | Type | Null | Key | Default | Extra | +--------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Host | char(255) | NO | PRI | | | | User | char(32) | NO | PRI | | | | Select_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Insert_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Update_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Delete_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Create_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Drop_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | ... An account may also have authentication credentials such as a password. The credentials are handled by the account authentication plugin. MySQL supports multiple authentication plugins. Some of them use built-in authentication methods, whereas others enable authentication using external authentication methods. mysql&gt; SELECT Host,User FROM mysql.user; +-----------+------------------+ | Host | User | +-----------+------------------+ | % | root | | localhost | mysql.infoschema | | localhost | mysql.session | | localhost | mysql.sys | | localhost | root | +-----------+------------------+ 5 rows in set (0.00 sec) 4.4. Privileges Provided by MySQL The privileges granted to a MySQL account determine which operations the account can perform. MySQL privileges differ in the contexts in which they apply and at different levels of operation: Administrative privileges enable users to manage operation of the MySQL server. These privileges are global because they are not specific to a particular database. Database privileges apply to a database and to all objects within it. These privileges can be granted for specific databases, or globally so that they apply to all databases. Privileges for database objects such as tables, indexes, views, and stored routines can be granted for specific objects within a database, for all objects of a given type within a database (for example, all tables in a database), or globally for all objects of a given type in all databases. 4.5. Grant Tables The mysql system database includes several grant tables that contain information about user accounts and the privileges held by them. However, normally you do not modify the grant tables directly. Modifications occur indirectly when you use account-management statements such as CREATE USER, GRANT, and REVOKE to set up accounts and control the privileges available to each one. When you use such statements to perform account manipulations, the server modifies the grant tables on your behalf. These mysql database tables contain grant information: user: User accounts, static global privileges, and other nonprivilege columns. global_grants: Dynamic global privileges. db: Database-level privileges. tables_priv: Table-level privileges. columns_priv: Column-level privileges. procs_priv: Stored procedure and function privileges. proxies_priv: Proxy-user privileges. default_roles: Default user roles. role_edges: Edges for role subgraphs. password_history: Password change history. To check the privileges for a given account, use the SHOW GRANTS statement. SHOW GRANTS FOR &#39;bob&#39;@&#39;pc84.example.com&#39;; To display nonprivilege properties of an account, use SHOW CREATE USER: SHOW CREATE USER &#39;bob&#39;@&#39;pc84.example.com&#39;; 4.6. Specifying Account Names MySQL account names consist of a user name and a host name, which enables creation of distinct accounts for users with the same user name who connect from different hosts. Account names appear in SQL statements such as CREATE USER, GRANT, and SET PASSWORD and follow these rules: Account name syntax is &#39;user_name&#39;@&#39;host_name&#39;. The @&#39;host_name&#39; part is optional. An account name consisting only of a user name is equivalent to &#39;user_name&#39;@&#39;%&#39;. For example, &#39;me&#39; is equivalent to &#39;me&#39;@&#39;%&#39;. The user name and host name need not be quoted if they are legal as unquoted identifiers. Quotes must be used if a user_name string contains special characters (such as space or -), or a host_name string contains special characters or wildcard characters (such as . or %). For example, in the account name &#39;test-user&#39;@&#39;%.com&#39;, both the user name and host name parts require quotes. Quote user names and host names as identifiers or as strings, using either backticks (`), single quotation marks (&#39;), or double quotation marks (&quot;). The user name and host name parts, if quoted, must be quoted separately. That is, write &#39;me&#39;@&#39;localhost&#39;, not &#39;me@localhost&#39;. The latter is actually equivalent to &#39;me@localhost&#39;@&#39;%&#39;. A reference to the CURRENT_USER or CURRENT_USER() function is equivalent to specifying the current client&#8217;s user name and host name literally. mysql&gt; SELECT CURRENT_USER; +----------------+ | CURRENT_USER | +----------------+ | root@localhost | +----------------+ 1 row in set (0.01 sec) MySQL stores account names in grant tables in the mysql system database using separate columns for the user name and host name parts: The user table contains one row for each account. The User and Host columns store the user name and host name. This table also indicates which global privileges the account has. Other grant tables indicate privileges an account has for databases and objects within databases. These tables have User and Host columns to store the account name. Each row in these tables associates with the account in the user table that has the same User and Host values. For access-checking purposes, comparisons of User values are case-sensitive; comparisons of Host values are not case-sensitive. User names and host names have certain special values or wildcard conventions, as described following. An account with a blank user name is an anonymous user. To specify an anonymous user in SQL statements, use a quoted empty user name part, such as &#39;&#39;@&#39;localhost&#39;. The host name part of an account name can take many forms, and wildcards are permitted: A host value can be a host name or an IP address (IPv4 or IPv6). The name &#39;localhost&#39; indicates the local host. The IP address &#39;127.0.0.1&#39; indicates the IPv4 loopback interface. The IP address &#39;::1&#39; indicates the IPv6 loopback interface. The % and _ wildcard characters are permitted in host name or IP address values. These have the same meaning as for pattern-matching operations performed with the LIKE operator. A host value of &#39;%&#39; matches any host name, whereas a value of &#39;%.mysql.com&#39; matches any host in the mysql.com domain. &#39;198.51.100.%&#39; matches any host in the 198.51.100 class C network. MySQL does not perform matching on host names that start with digits and a dot. For a host value specified as an IPv4 address, a netmask can be given to indicate how many address bits to use for the network number. Netmask notation cannot be used for IPv6 addresses. The syntax is host_ip/netmask. For example: CREATE USER &#39;david&#39;@&#39;198.51.100.0/255.255.255.0&#39;; As of MySQL 8.0.23, a host value specified as an IPv4 address can be written using CIDR notation, such as 198.51.100.44/24. 4.7. Specifying Role Names MySQL role names refer to roles, which are named collections of privileges. Role names have syntax and semantics similar to account names. As stored in the grant tables, they have the same properties as account names. Role names differ from account names in these respects: The user part of role names cannot be blank. Thus, there is no “anonymous role” analogous to the concept of “anonymous user.” As for an account name, omitting the host part of a role name results in a host part of &#39;%&#8216;. But unlike &#8217;%&#39; in an account name, a host part of &#39;%&#39; in a role name has no wildcard properties. For example, for a name &#39;me&#39;@&#39;%&#39; used as a role name, the host part (&#8217;%&#39;`) is just a literal value; it has no “any host” matching property. Netmask notation in the host part of a role name has no significance. An account name is permitted to be CURRENT_USER() in several contexts. A role name is not. 4.8. Access Control, Stage 1: Connection Verification When you attempt to connect to a MySQL server, the server accepts or rejects the connection based on these conditions: Your identity and whether you can verify it by supplying the proper credentials. Whether your account is locked or unlocked. The server checks credentials first, then account locking state. A failure at either step causes the server to deny access to you completely. Otherwise, the server accepts the connection, and then enters Stage 2 and waits for requests. The server performs identity and credentials checking using columns in the user table, accepting the connection only if these conditions are satisfied: The client host name and user name match the Host and User columns in some user table row. The client supplies the credentials specified in the row (for example, a password), as indicated by the authentication_string column. Credentials are interpreted using the authentication plugin named in the plugin column. The row indicates that the account is unlocked. Locking state is recorded in the account_locked column, which must have a value of &#39;N&#39;. Account locking can be set or changed with the CREATE USER or ALTER USER statement. The authentication_string column can be blank. This is not a wildcard and does not mean that any password matches. It means that the user must connect without specifying a password. The authentication method implemented by the plugin that authenticates the client may or may not use the password in the authentication_string column. In this case, it is possible that an external password is also used to authenticate to the MySQL server. From MySQL&#8217;s point of view, the encrypted password is the real password, so you should never give anyone access to it. In particular, do not give nonadministrative users read access to tables in the mysql system database. 4.9. Access Control, Stage 2: Request Verification After the server accepts a connection, it enters Stage 2 of access control. For each request that you issue through the connection, the server determines what operation you want to perform, then checks whether your privileges are sufficient. This is where the privilege columns in the grant tables come into play. These privileges can come from any of the user, global_grants, db, tables_priv, columns_priv, or procs_priv tables. The user and global_grants tables grant global privileges for a given account indicate the account privileges that apply on a global basis no matter what the default database is. It is wise to grant privileges in the user table only to people who need them, such as database administrators. For other users, leave all privileges in the user table set to &#39;N&#39; and grant privileges at more specific levels only (for particular databases, tables, columns, or routines). 4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts To manage MySQL accounts, use the SQL statements intended for that purpose: CREATE USER and DROP USER create and remove accounts. GRANT and REVOKE assign privileges to and revoke privileges from accounts. SHOW GRANTS displays account privilege assignments. 4.10.1. Creating Accounts and Granting Privileges The following example uses CREATE USER and GRANT statements to set up four accounts (where you see &#39;password&#39;, substitute an appropriate password): CREATE USER &#39;finley&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON *.* TO &#39;finley&#39; @&#39;localhost&#39; WITH GRANT OPTION; CREATE USER &#39;finley&#39; @&#39;%.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON *.* TO &#39;finley&#39; @&#39;%.example.com&#39; WITH GRANT OPTION; CREATE USER &#39;admin&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT RELOAD, PROCESS ON *.* TO &#39;admin&#39; @&#39;localhost&#39;; CREATE USER &#39;dummy&#39; @&#39;localhost&#39;; The previous example grants privileges at the global level. The next example creates three accounts and grants them access at lower levels; that is, to specific databases or objects within databases. Each account has a user name of custom, but the host name parts differ: CREATE USER &#39;custom&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON bankaccount.* TO &#39;custom&#39; @&#39;localhost&#39;; CREATE USER &#39;custom&#39; @&#39;host47.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON expenses.* TO &#39;custom&#39; @&#39;host47.example.com&#39;; CREATE USER &#39;custom&#39; @&#39;%.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON customer.addresses TO &#39;custom&#39; @&#39;%.example.com&#39;; 4.10.2. Checking Account Privileges and Properties mysql&gt; SELECT User,Host FROM mysql.user; +------------------+--------------------+ | User | Host | +------------------+--------------------+ | root | % | | custom | %.example.com | | finley | %.example.com | | custom | host47.example.com | | admin | localhost | | custom | localhost | | dummy | localhost | | finley | localhost | | mysql.infoschema | localhost | | mysql.session | localhost | | mysql.sys | localhost | | root | localhost | +------------------+--------------------+ 12 rows in set (0.00 sec) To see the privileges for an account, use SHOW GRANTS: mysql&gt; SHOW GRANTS FOR &#39;admin&#39;@&#39;localhost&#39;; +-----------------------------------------------------+ | Grants for admin@localhost | +-----------------------------------------------------+ | GRANT RELOAD, PROCESS ON *.* TO `admin`@`localhost` | +-----------------------------------------------------+ 1 row in set (0.00 sec) To see nonprivilege properties for an account, use SHOW CREATE USER: mysql&gt; SHOW CREATE USER &#39;admin&#39;@&#39;localhost&#39;\G *************************** 1. row *************************** CREATE USER for admin@localhost: CREATE USER `admin`@`localhost` IDENTIFIED WITH &#39;caching_sha2_password&#39; AS &#39;$A$005$d6zqX\nG\&#39;S03)B8Ixmrn5EBoH1Fc4MFp5p07e1AIzknBpHaKaHwdaXpB&#39; REQUIRE NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK PASSWORD HISTORY DEFAULT PASSWORD REUSE INTERVAL DEFAULT PASSWORD REQUIRE CURRENT DEFAULT 1 row in set (0.00 sec) 4.10.3. Revoking Account Privileges To revoke account privileges, use the REVOKE statement. Privileges can be revoked at different levels, just as they can be granted at different levels. Revoke global privileges: REVOKE ALL ON *.* FROM &#39;finley&#39;@&#39;%.example.com&#39;; REVOKE RELOAD ON *.* FROM &#39;admin&#39;@&#39;localhost&#39;; Revoke database-level privileges: REVOKE CREATE,DROP ON expenses.* FROM &#39;custom&#39;@&#39;host47.example.com&#39;; Revoke table-level privileges: REVOKE INSERT,UPDATE,DELETE ON customer.addresses FROM &#39;custom&#39;@&#39;%.example.com&#39;; To check the effect of privilege revocation, use SHOW GRANTS: mysql&gt; SHOW GRANTS FOR &#39;admin&#39;@&#39;localhost&#39;; +---------------------------------------------+ | Grants for admin@localhost | +---------------------------------------------+ | GRANT PROCESS ON *.* TO `admin`@`localhost` | +---------------------------------------------+ 4.10.4. Dropping Accounts To remove an account, use the DROP USER statement. For example, to drop some of the accounts created previously: DROP USER &#39;finley&#39;@&#39;localhost&#39;; DROP USER &#39;finley&#39;@&#39;%.example.com&#39;; DROP USER &#39;admin&#39;@&#39;localhost&#39;; DROP USER &#39;dummy&#39;@&#39;localhost&#39;; 4.11. Assigning Account Passwords To assign a password when you create a new account, use CREATE USER and include an IDENTIFIED BY clause: CREATE USER &#39;jeffrey&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; To assign or change a password for an existing account, use the ALTER USER statement with an IDENTIFIED BY clause: ALTER USER &#39;jeffrey&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; If you are not connected as an anonymous user, you can change your own password without naming your own account literally: ALTER USER USER() IDENTIFIED BY &#39;password&#39;; 4.12. Account Locking MySQL supports locking and unlocking user accounts using the ACCOUNT LOCK and ACCOUNT UNLOCK clauses for the CREATE USER and ALTER USER statements: When used with CREATE USER, these clauses specify the initial locking state for a new account. In the absence of either clause, the account is created in an unlocked state. When used with ALTER USER, these clauses specify the new locking state for an existing account. In the absence of either clause, the account locking state remains unchanged. Account locking state is recorded in the account_locked column of the mysql.user system table. The output from SHOW CREATE USER indicates whether an account is locked or unlocked. If a client attempts to connect to a locked account, the attempt fails. The server increments the Locked_connects status variable that indicates the number of attempts to connect to a locked account, returns an ER_ACCOUNT_HAS_BEEN_LOCKED error, and writes a message to the error log: Access denied for user &#39;user_name&#39;@&#39;host_name&#39;. Account is locked. mysql&gt; CREATE USER test@localhost IDENTIFIED BY &#39;pwd&#39;; Query OK, 0 rows affected (0.02 sec) mysql&gt; GRANT ALL ON test.* TO test@localhost; Query OK, 0 rows affected, 1 warning (0.01 sec) mysql&gt; SHOW WARNINGS; +---------+------+--------------------------------------------------------------------------------------------------------------+ | Level | Code | Message | +---------+------+--------------------------------------------------------------------------------------------------------------+ | Warning | 1285 | MySQL is started in --skip-name-resolve mode; you must restart it without this switch for this grant to work | +---------+------+--------------------------------------------------------------------------------------------------------------+ 1 row in set (0.01 sec) mysql&gt; ALTER USER test@localhost ACCOUNT LOCK; Query OK, 0 rows affected (0.01 sec) mysql&gt; SELECT User,Host,account_locked FROM mysql.user WHERE User=&#39;test&#39;; +------+-----------+----------------+ | User | Host | account_locked | +------+-----------+----------------+ | test | localhost | Y | +------+-----------+----------------+ 1 row in set (0.00 sec) $ docker exec -it mysql8 mysql -u test -p Enter password: ERROR 3118 (HY000): Access denied for user &#39;test&#39;@&#39;localhost&#39;. Account is locked. mysql&gt; DROP USER test@localhost; Query OK, 0 rows affected (0.01 sec) 5. Backup and Recovery It is important to back up your databases so that you can recover your data and be up and running again in case problems occur, such as system crashes, hardware failures, or users deleting data by mistake. Backups are also essential as a safeguard before upgrading a MySQL installation, and they can be used to transfer a MySQL installation to another system or to set up replica servers. 5.1. Using mysqldump for Backups mysqldump produces two types of output, depending on whether the --tab option is given: Without --tab, mysqldump writes SQL statements to the standard output. This output consists of CREATE statements to create dumped objects (databases, tables, stored routines, and so forth), and INSERT statements to load data into tables. The output can be saved in a file and reloaded later using mysql to recreate the dumped objects. Options are available to modify the format of the SQL statements, and to control which objects are dumped. With --tab, mysqldump produces two output files for each dumped table. The server writes one file as tab-delimited text, one line per table row. This file is named tbl_name.txt in the output directory. The server also sends a CREATE TABLE statement for the table to mysqldump, which writes it as a file named tbl_name.sql in the output directory. 5.1.1. Dumping Data in SQL Format with mysqldump By default, mysqldump writes information as SQL statements to the standard output. You can save the output in a file: $ mysqldump [arguments] &gt; file_name To dump all databases, invoke mysqldump with the --all-databases option: $ mysqldump --all-databases &gt; dump.sql To dump only specific databases, name them on the command line and use the --databases option: $ mysqldump --databases db1 db2 db3 &gt; dump.sql The --databases option causes all names on the command line to be treated as database names. Without this option, mysqldump treats the first name as a database name and those following as table names. With --all-databases or --databases, mysqldump writes CREATE DATABASE and USE statements prior to the dump output for each database. This ensures that when the dump file is reloaded, it creates each database if it does not exist and makes it the default database so database contents are loaded into the same database from which they came. If you want to cause the dump file to force a drop of each database before recreating it, use the --add-drop-database option as well. In this case, mysqldump writes a DROP DATABASE statement preceding each CREATE DATABASE statement. To dump a single database, name it on the command line: $&gt; mysqldump --databases test &gt; dump.sql In the single-database case, it is permissible to omit the --databases option: $&gt; mysqldump test &gt; dump.sql The difference between the two preceding commands is that without --databases, the dump output contains no CREATE DATABASE or USE statements. To dump only specific tables from a database, name them on the command line following the database name: $&gt; mysqldump test t1 t3 t7 &gt; dump.sql $ docker exec -it mysql8 sh -c &quot;mysqldump -u root -p --databases test &gt; /tmp/test.sql&quot; Enter password: $ docker exec -it mysql8 cat /tmp/test.sql -- MySQL dump 10.13 Distrib 8.0.27, for Linux (x86_64) -- -- Host: localhost Database: test -- ------------------------------------------------------ -- Server version 8.0.27 ... -- Dump completed on 2021-12-30 8:07:50 5.1.2. Reloading SQL-Format Backups To reload a dump file written by mysqldump that consists of SQL statements, use it as input to the mysql client. If the dump file was created by mysqldump with the --all-databases or --databases option, it contains CREATE DATABASE and USE statements and it is not necessary to specify a default database into which to load the data: $ mysql &lt; dump.sql Alternatively, from within mysql, use a source command: mysql&gt; source dump.sql If the file is a single-database dump not containing CREATE DATABASE and USE statements, create the database first (if necessary): $ mysqladmin create db1 Then specify the database name when you load the dump file: $ mysql db1 &lt; dump.sql Alternatively, from within mysql, create the database, select it as the default database, and load the dump file: mysql&gt; CREATE DATABASE IF NOT EXISTS db1; mysql&gt; USE db1; mysql&gt; source dump.sql 6. The InnoDB Storage Engine 7. References https://hub.docker.com/_/mysql https://dev.mysql.com/doc/refman/8.0/en/" />
<meta property="og:description" content="1. Deploying MySQL on Linux with Docker 1.1. Starting a MySQL Server Instance 1.2. Using a custom MySQL configuration file 1.3. Creating database dumps 1.4. Restoring data from dump files 1.5. Connecting to and Disconnecting from the Server 2. Entering Queries 3. Creating and Using a Database 3.1. Creating and Selecting a Database 3.2. Creating a Table 3.3. Loading Data into a Table 3.4. Retrieving Information from a Table 4. Security 4.1. Security Guidelines 4.2. Access Control and Account Management 4.3. Account User Names and Passwords 4.4. Privileges Provided by MySQL 4.5. Grant Tables 4.6. Specifying Account Names 4.7. Specifying Role Names 4.8. Access Control, Stage 1: Connection Verification 4.9. Access Control, Stage 2: Request Verification 4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts 4.10.1. Creating Accounts and Granting Privileges 4.10.2. Checking Account Privileges and Properties 4.10.3. Revoking Account Privileges 4.10.4. Dropping Accounts 4.11. Assigning Account Passwords 4.12. Account Locking 5. Backup and Recovery 5.1. Using mysqldump for Backups 5.1.1. Dumping Data in SQL Format with mysqldump 5.1.2. Reloading SQL-Format Backups 6. The InnoDB Storage Engine 7. References 1. Deploying MySQL on Linux with Docker 1.1. Starting a MySQL Server Instance To start a new Docker container for a MySQL Server, use the following command: docker run --name=container_name [--restart on-failure] -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes [-e MYSQL_ONETIME_PASSWORD=yes] image_name:tag $ docker run --name mysql8 -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes mysql:8 b4b86043b5562bb9069d82a663e2beae7fb417d6c3a005ade1a9b48ced6048f5 $ docker logs mysql8 2&gt;&amp;1 | grep GENERATED 2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi $ docker logs mysql8 2021-12-29 08:21:58+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started. 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Switching to dedicated user &#39;mysql&#39; 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started. 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Initializing database files ... 2021-12-29 08:22:05+00:00 [Note] [Entrypoint]: Starting temporary server ... 2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi ... 2021-12-29 08:22:11+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up. 2021-12-29T08:22:12.185059Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.27) starting as process 1 2021-12-29T08:22:12.193270Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. 2021-12-29T08:22:12.948002Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: &#39;8.0.27&#39; socket: &#39;/var/run/mysqld/mysqld.sock&#39; port: 3306 MySQL Community Server - GPL. 1.2. Using a custom MySQL configuration file docker run \ --name some-mysql \ -v /my/custom:/etc/mysql/conf.d \ (1) -v /my/own/datadir:/var/lib/mysql \ (2) -e MYSQL_ROOT_PASSWORD=my-secret-pw \ -d \ mysql:tag 1 The default configuration for MySQL can be found in /etc/mysql/my.cnf, which may !includedir additional directories such as /etc/mysql/conf.d or /etc/mysql/mysql.conf.d. If /my/custom/config-file.cnf is the path and name of your custom configuration file, you can start your mysql container like this (note that only the directory path of the custom config file is used in this command): This will start a new container some-mysql where the MySQL instance uses the combined startup settings from /etc/mysql/my.cnf and /etc/mysql/conf.d/config-file.cnf, with settings from the latter taking precedence. 2 The -v /my/own/datadir:/var/lib/mysql part of the command mounts the /my/own/datadir directory from the underlying host system as /var/lib/mysql inside the container, where MySQL by default will write its data files. 1.3. Creating database dumps docker exec some-mysql \ sh -c &#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /some/path/on/your/host/all-databases.sql 1.4. Restoring data from dump files docker exec -i some-mysql \ sh -c &#39;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &lt; /some/path/on/your/host/all-databases.sql 1.5. Connecting to and Disconnecting from the Server To connect to the server, you usually need to provide a MySQL user name when you invoke mysql and, most likely, a password. If the server runs on a machine other than the one where you log in, you must also specify a host name. $&gt; mysql -h host -u user -p Enter password: ******** host and user represent the host name where your MySQL server is running and the user name of your MySQL account. Substitute appropriate values for your setup. The ******** represents your password; enter it when mysql displays the Enter password: prompt. $ docker exec -it mysql8 mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 9 Server version: 8.0.27 MySQL Community Server - GPL Copyright (c) 2000, 2021, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; \q Bye 2. Entering Queries Here is a simple query that asks the server to tell you its version number and the current date. Type it in as shown here following the mysql&gt; prompt and press Enter: $ docker exec -it mysql8 mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 10 Server version: 8.0.27 MySQL Community Server - GPL Copyright (c) 2000, 2021, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; SELECT VERSION(), CURRENT_DATE; +-----------+--------------+ | VERSION() | CURRENT_DATE | +-----------+--------------+ | 8.0.27 | 2021-12-29 | +-----------+--------------+ 1 row in set (0.00 sec) This query illustrates several things about mysql: A query normally consists of an SQL statement followed by a semicolon. When you issue a query, mysql sends it to the server for execution and displays the results, then prints another mysql&gt; prompt to indicate that it is ready for another query. mysql displays query output in tabular form (rows and columns). The first row contains labels for the columns. The rows following are the query results. mysql shows how many rows were returned and how long the query took to execute, which gives you a rough idea of server performance. These values are imprecise because they represent wall clock time (not CPU or machine time), and because they are affected by factors such as server load and network latency. Keywords may be entered in any lettercase. The following queries are equivalent: mysql&gt; SELECT VERSION(), CURRENT_DATE; mysql&gt; select version(), current_date; mysql&gt; SeLeCt vErSiOn(), current_DATE; Here is another query. It demonstrates that you can use mysql as a simple calculator: mysql&gt; SELECT SIN(PI()/4), (4+1)*5; +-------------------------+---------+ | SIN(PI()/4) | (4+1)*5 | +-------------------------+---------+ | 0.7071067811865475 | 25 | +-------------------------+---------+ 1 row in set (0.00 sec) You can even enter multiple statements on a single line. Just end each one with a semicolon: mysql&gt; SELECT VERSION(); SELECT NOW(); +-----------+ | VERSION() | +-----------+ | 8.0.27 | +-----------+ 1 row in set (0.00 sec) +---------------------+ | NOW() | +---------------------+ | 2021-12-29 09:18:28 | +---------------------+ 1 row in set (0.00 sec) Here is a simple multiple-line statement: mysql&gt; SELECT -&gt; USER() -&gt; , -&gt; CURRENT_DATE -&gt; ; +----------------+----------------+ | USER() | CURRENT_DATE | +----------------+----------------+ | root@localhost | 2021-12-29 | +----------------+----------------+ 1 row in set (0.00 sec) 3. Creating and Using a Database Use the SHOW statement to find out what databases currently exist on the server: mysql&gt; SHOW DATABASES; +------------------------------------------------------------------+ | Database | +------------------------------------------------------------------+ | information_schema | | mysql | | performance_schema | | sys | +------------------------------------------------------------------+ 4 rows in set (0.01 sec) The list of databases displayed by the statement may be different on your machine; SHOW DATABASES does not show databases that you have no privileges for if you do not have the SHOW DATABASES privilege. 3.1. Creating and Selecting a Database If the administrator creates your database for you when setting up your permissions, you can begin using it. Otherwise, you need to create it yourself: mysql&gt; CREATE DATABASE test; Query OK, 1 row affected (0.02 sec) Under Unix, database names are case-sensitive (unlike SQL keywords), so you must always refer to your database as test, not as Test, TEST, or some other variant. This is also true for table names. Creating a database does not select it for use; you must do that explicitly. To make menagerie the current database, use this statement: mysql&gt; SELECT DATABASE(); +------------------------------------+ | DATABASE() | +------------------------------------+ | NULL | +------------------------------------+ 1 row in set (0.00 sec) mysql&gt; USE test Database changed mysql&gt; SELECT DATABASE(); +------------------------------------+ | DATABASE() | +------------------------------------+ | test | +------------------------------------+ 1 row in set (0.00 sec) Your database needs to be created only once, but you must select it for use each time you begin a mysql session. You can do this by issuing a USE statement as shown in the example. Alternatively, you can select the database on the command line when you invoke mysql. Just specify its name after any connection parameters that you might need to provide. For example: $ docker exec -it mysql8 mysql -u root -p test Enter password: ... Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement. mysql&gt; SELECT DATABASE(); +------------+ | DATABASE() | +------------+ | test | +------------+ 1 row in set (0.00 sec) mysql&gt; 3.2. Creating a Table Creating the database is the easy part, but at this point it is empty, as SHOW TABLES tells you: mysql&gt; SHOW TABLES; Empty set (0.01 sec) Use a CREATE TABLE statement to specify the layout of your table: mysql&gt; CREATE TABLE pet ( -&gt; name VARCHAR(20), -&gt; owner VARCHAR(20), -&gt; species VARCHAR(20), -&gt; sex CHAR(1), -&gt; birth DATE, -&gt; death DATE -&gt; ); Query OK, 0 rows affected (0.03 sec) If you make a poor choice and it turns out later that you need a longer field, MySQL provides an ALTER TABLE statement. Once you have created a table, SHOW TABLES should produce some output: mysql&gt; SHOW TABLES; +----------------+ | Tables_in_test | +----------------+ | pet | +----------------+ 1 row in set (0.01 sec) mysql&gt; SHOW TABLES IN test; +----------------+ | Tables_in_test | +----------------+ | pet | +----------------+ 1 row in set (0.00 sec) To verify that your table was created the way you expected, use a DESCRIBE statement: mysql&gt; DESCRIBE pet; +---------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +---------+-------------+------+-----+---------+-------+ | name | varchar(20) | YES | | NULL | | | owner | varchar(20) | YES | | NULL | | | species | varchar(20) | YES | | NULL | | | sex | char(1) | YES | | NULL | | | birth | date | YES | | NULL | | | death | date | YES | | NULL | | +---------+-------------+------+-----+---------+-------+ 6 rows in set (0.07 sec) 3.3. Loading Data into a Table After creating your table, you need to populate it. The LOAD DATA and INSERT statements are useful for this. name owner species sex birth death Fluffy Harold cat f 1993-02-04 Claws Gwen cat m 1994-03-17 Buffy Harold dog f 1989-05-13 Fang Benny dog m 1990-08-27 Bowser Diane dog m 1979-08-31 1995-07-29 Chirpy Gwen bird f 1998-09-11 Whistler Gwen bird 1997-12-09 Slim Benny snake m 1996-04-29 You could create a text file pet.txt containing one record per line, with values separated by tabs, and given in the order in which the columns were listed in the CREATE TABLE statement. For missing values (such as unknown sexes or death dates for animals that are still living), you can use NULL values. To represent these in your text file, use \N (backslash, capital-N). For example, the record for Whistler the bird would look like this (where the whitespace between values is a single tab character): Whistler Gwen bird \N 1997-12-09 \N To load the text file pet.txt into the pet table, use this statement: mysql&gt; LOAD DATA LOCAL INFILE &#39;/path/pet.txt&#39; INTO TABLE pet; When you want to add new records one at a time, the INSERT statement is useful. In its simplest form, you supply values for each column, in the order in which the columns were listed in the CREATE TABLE statement. Suppose that Diane gets a new hamster named “Puffball.” You could add a new record using an INSERT statement like this: mysql&gt; INSERT INTO pet -&gt; VALUES ( -&gt; &#39;Puffball&#39;, -&gt; &#39;Diane&#39;, -&gt; &#39;hamster&#39;, -&gt; &#39;f&#39;, -&gt; &#39;1999-03-30&#39;, -&gt; NULL -&gt; ); Query OK, 1 row affected (0.03 sec) String and date values are specified as quoted strings here. Also, with INSERT, you can insert NULL directly to represent a missing value. You do not use \N like you do with LOAD DATA. 3.4. Retrieving Information from a Table Selecting All Data mysql&gt; SELECT * FROM pet; +----------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+--------+---------+------+------------+------------+ | Puffball | Diane | hamster | f | 1999-03-30 | NULL | | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Fang | Benny | dog | m | 1990-08-27 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Chirpy | Gwen | bird | f | 1998-09-11 | NULL | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | | Slim | Benny | snake | m | 1996-04-29 | NULL | +----------+--------+---------+------+------------+------------+ 9 rows in set (0.00 sec) Selecting Particular Rows mysql&gt; SELECT * FROM pet WHERE name=&#39;Browser&#39;; Empty set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name=&#39;Bowser&#39;; +--------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+-------+---------+------+------------+------------+ | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+-------+---------+------+------------+------------+ 1 row in set (0.00 sec) Selecting Particular Columns mysql&gt; SELECT name,birth FROM pet; +----------+------------+ | name | birth | +----------+------------+ | Puffball | 1999-03-30 | | Fluffy | 1993-02-04 | | Claws | 1994-03-17 | | Buffy | 1989-05-13 | | Fang | 1990-08-27 | | Bowser | 1979-08-31 | | Chirpy | 1998-09-11 | | Whistler | 1997-12-09 | | Slim | 1996-04-29 | +----------+------------+ 9 rows in set (0.00 sec) Sorting Rows mysql&gt; SELECT name,birth FROM pet ORDER BY birth; +----------+------------+ | name | birth | +----------+------------+ | Bowser | 1979-08-31 | | Buffy | 1989-05-13 | | Fang | 1990-08-27 | | Fluffy | 1993-02-04 | | Claws | 1994-03-17 | | Slim | 1996-04-29 | | Whistler | 1997-12-09 | | Chirpy | 1998-09-11 | | Puffball | 1999-03-30 | +----------+------------+ 9 rows in set (0.00 sec) Date Calculations mysql&gt; SELECT name, -&gt; birth, -&gt; CURDATE(), -&gt; TIMESTAMPDIFF(YEAR, birth, CURDATE()) AS age -&gt; FROM pet; +----------+------------+------------+------+ | name | birth | CURDATE() | age | +----------+------------+------------+------+ | Puffball | 1999-03-30 | 2021-12-29 | 22 | | Fluffy | 1993-02-04 | 2021-12-29 | 28 | | Claws | 1994-03-17 | 2021-12-29 | 27 | | Buffy | 1989-05-13 | 2021-12-29 | 32 | | Fang | 1990-08-27 | 2021-12-29 | 31 | | Bowser | 1979-08-31 | 2021-12-29 | 42 | | Chirpy | 1998-09-11 | 2021-12-29 | 23 | | Whistler | 1997-12-09 | 2021-12-29 | 24 | | Slim | 1996-04-29 | 2021-12-29 | 25 | +----------+------------+------------+------+ 9 rows in set (0.01 sec) mysql&gt; SELECT name, -&gt; birth, -&gt; death, -&gt; TIMESTAMPDIFF(YEAR, birth, death) AS age -&gt; FROM pet -&gt; WHERE death IS NOT NULL -&gt; ORDER BY age; +--------+------------+------------+------+ | name | birth | death | age | +--------+------------+------------+------+ | Bowser | 1979-08-31 | 1995-07-29 | 15 | +--------+------------+------------+------+ 1 row in set (0.00 sec) mysql&gt; SELECT name, birth, MONTH(birth) FROM pet; +----------+------------+--------------+ | name | birth | MONTH(birth) | +----------+------------+--------------+ | Puffball | 1999-03-30 | 3 | | Fluffy | 1993-02-04 | 2 | | Claws | 1994-03-17 | 3 | | Buffy | 1989-05-13 | 5 | | Fang | 1990-08-27 | 8 | | Bowser | 1979-08-31 | 8 | | Chirpy | 1998-09-11 | 9 | | Whistler | 1997-12-09 | 12 | | Slim | 1996-04-29 | 4 | +----------+------------+--------------+ 9 rows in set (0.00 sec) mysql&gt; SELECT &#39;2018-10-31&#39; + INTERVAL 1 DAY; +-------------------------------+ | &#39;2018-10-31&#39; + INTERVAL 1 DAY | +-------------------------------+ | 2018-11-01 | +-------------------------------+ 1 row in set (0.00 sec) mysql&gt; SELECT &#39;2018-10-32&#39; + INTERVAL 1 DAY; +-------------------------------+ | &#39;2018-10-32&#39; + INTERVAL 1 DAY | +-------------------------------+ | NULL | +-------------------------------+ 1 row in set, 1 warning (0.00 sec) mysql&gt; SHOW WARNINGS; +---------+------+----------------------------------------+ | Level | Code | Message | +---------+------+----------------------------------------+ | Warning | 1292 | Incorrect datetime value: &#39;2018-10-32&#39; | +---------+------+----------------------------------------+ 1 row in set (0.00 sec) Working with NULL Values mysql&gt; SELECT 1 IS NULL, 1 IS NOT NULL; +-----------+---------------+ | 1 IS NULL | 1 IS NOT NULL | +-----------+---------------+ | 0 | 1 | +-----------+---------------+ 1 row in set (0.00 sec) mysql&gt; SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL; +----------+-----------+----------+----------+ | 1 = NULL | 1 &lt;&gt; NULL | 1 &lt; NULL | 1 &gt; NULL | +----------+-----------+----------+----------+ | NULL | NULL | NULL | NULL | +----------+-----------+----------+----------+ 1 row in set (0.00 sec) mysql&gt; SELECT 0 IS NULL, 0 IS NOT NULL, &#39;&#39; IS NULL, &#39;&#39; IS NOT NULL; +-----------+---------------+------------+----------------+ | 0 IS NULL | 0 IS NOT NULL | &#39;&#39; IS NULL | &#39;&#39; IS NOT NULL | +-----------+---------------+------------+----------------+ | 0 | 1 | 0 | 1 | +-----------+---------------+------------+----------------+ 1 row in set (0.00 sec) Pattern Matching mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;b%&#39;; +--------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+------------+ | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+--------+---------+------+------------+------------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;%fy&#39;; +--------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+-------+ | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +--------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;%w%&#39;; +----------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+-------+---------+------+------------+------------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | +----------+-------+---------+------+------------+------------+ 3 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;_____&#39;; +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^b&#39;); +--------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+------------+ | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+--------+---------+------+------------+------------+ 2 rows in set (0.01 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;fy$&#39;); +--------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+-------+ | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +--------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;w&#39;); +----------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+-------+---------+------+------------+------------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | +----------+-------+---------+------+------------+------------+ 3 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^.....$&#39;); +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^.{5}$&#39;); +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) Counting Rows mysql&gt; SELECT COUNT(*) FROM pet; +----------+ | COUNT(*) | +----------+ | 9 | +----------+ 1 row in set (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet GROUP BY owner; +--------+----------+ | owner | COUNT(*) | +--------+----------+ | Diane | 2 | | Harold | 2 | | Gwen | 3 | | Benny | 2 | +--------+----------+ 4 rows in set (0.00 sec) mysql&gt; SET sql_mode = &#39;ONLY_FULL_GROUP_BY&#39;; Query OK, 0 rows affected (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet; ERROR 1140 (42000): In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggregated column &#39;test.pet.owner&#39;; this is incompatible with sql_mode=only_full_group_by mysql&gt; SET sql_mode = &#39;&#39;; Query OK, 0 rows affected (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet; +-------+----------+ | owner | COUNT(*) | +-------+----------+ | Diane | 9 | +-------+----------+ 1 row in set (0.00 sec) Using More Than one Table event.sql CREATE TABLE event ( name VARCHAR(20), date DATE, type VARCHAR(15), remark VARCHAR(255) ); INSERT INTO event VALUES(&#39;Fluffy&#39;,&#39;1995-05-15&#39;,&#39;litter&#39;,&#39;4 kittens, 3 female, 1 male&#39;); INSERT INTO event VALUES(&#39;Buffy&#39;,&#39;1993-06-23&#39;,&#39;litter&#39;,&#39;5 puppies, 2 female, 3 male&#39;); INSERT INTO event VALUES(&#39;Buffy&#39;,&#39;1994-06-19&#39;,&#39;litter&#39;,&#39;3 puppies, 3 female&#39;); INSERT INTO event VALUES(&#39;Chirpy&#39;,&#39;1999-03-21&#39;,&#39;vet&#39;,&#39;needed beak straightened&#39;); INSERT INTO event VALUES(&#39;Slim&#39;,&#39;1997-08-03&#39;,&#39;vet&#39;,&#39;broken rib&#39;); INSERT INTO event VALUES(&#39;Bowser&#39;,&#39;1991-10-12&#39;,&#39;kennel&#39;,NULL); INSERT INTO event VALUES(&#39;Fang&#39;,&#39;1991-10-12&#39;,&#39;kennel&#39;,NULL); INSERT INTO event VALUES(&#39;Fang&#39;,&#39;1998-08-28&#39;,&#39;birthday&#39;,&#39;Gave him a new chew toy&#39;); INSERT INTO event VALUES(&#39;Claws&#39;,&#39;1998-03-17&#39;,&#39;birthday&#39;,&#39;Gave him a new flea collar&#39;); INSERT INTO event values(&#39;Whistler&#39;,&#39;1998-12-09&#39;,&#39;birthday&#39;,&#39;First birthday&#39;); $ docker exec -it mysql8 sh -c &quot;mysql -u root -p test &lt; event.sql&quot; Enter password: ***** mysql&gt; SHOW TABLES; +----------------+ | Tables_in_test | +----------------+ | event | | pet | +----------------+ 2 rows in set (0.02 sec) mysql&gt; DESCRIBE event; +--------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +--------+--------------+------+-----+---------+-------+ | name | varchar(20) | YES | | NULL | | | date | date | YES | | NULL | | | type | varchar(15) | YES | | NULL | | | remark | varchar(255) | YES | | NULL | | +--------+--------------+------+-----+---------+-------+ 4 rows in set (0.03 sec) mysql&gt; SELECT pet.name, -&gt; TIMESTAMPDIFF(YEAR, birth, date) AS age, -&gt; remark -&gt; FROM pet -&gt; INNER JOIN event ON pet.name = event.name -&gt; WHERE event.type = &#39;litter&#39;; +--------+------+-----------------------------+ | name | age | remark | +--------+------+-----------------------------+ | Fluffy | 2 | 4 kittens, 3 female, 1 male | | Buffy | 5 | 3 puppies, 3 female | | Buffy | 4 | 5 puppies, 2 female, 3 male | +--------+------+-----------------------------+ 3 rows in set (0.00 sec) 4. Security When thinking about security within a MySQL installation, you should consider a wide range of possible topics and how they affect the security of your MySQL server and related applications: General factors that affect security. These include choosing good passwords, not granting unnecessary privileges to users, ensuring application security by preventing SQL injections and data corruption, and others. Security of the installation itself. The data files, log files, and the all the application files of your installation should be protected to ensure that they are not readable or writable by unauthorized parties. Access control and security within the database system itself, including the users and databases granted with access to the databases, views and stored programs in use within the database. The features offered by security-related plugins. Network security of MySQL and your system. The security is related to the grants for individual users, but you may also wish to restrict MySQL so that it is available only locally on the MySQL server host, or to a limited set of other hosts. Ensure that you have adequate and appropriate backups of your database files, configuration and log files. Also be sure that you have a recovery solution in place and test that you are able to successfully recover the information from your backups. 4.1. Security Guidelines Anyone using MySQL on a computer connected to the Internet should read this section to avoid the most common security mistakes. In discussing security, it is necessary to consider fully protecting the entire server host (not just the MySQL server) against all types of applicable attacks: eavesdropping, altering, playback, and denial of service. MySQL uses security based on Access Control Lists (ACLs) for all connections, queries, and other operations that users can attempt to perform. There is also support for SSL-encrypted connections between MySQL clients and servers. Many of the concepts discussed here are not specific to MySQL at all; the same general ideas apply to almost all applications. When running MySQL, follow these guidelines: Do not ever give anyone (except MySQL root accounts) access to the user table in the mysql system database! This is critical. Learn how the MySQL access privilege system works. Use the GRANT and REVOKE statements to control access to MySQL. Do not grant more privileges than necessary. Never grant privileges to all hosts. Do not store cleartext passwords in your database. If your computer becomes compromised, the intruder can take the full list of passwords and use them. Instead, use SHA2() or some other one-way hashing function and store the hash value. To prevent password recovery using rainbow tables, do not use these functions on a plain password; instead, choose some string to be used as a salt, and use hash(hash(password)+salt) values. Invest in a firewall. This protects you from at least 50% of all types of exploits in any software. Put MySQL behind the firewall or in a demilitarized zone (DMZ). Applications that access MySQL should not trust any data entered by users, and should be written using proper defensive programming techniques. Do not transmit plain (unencrypted) data over the Internet. Learn to use the tcpdump and strings utilities. In most cases, you can check whether MySQL data streams are unencrypted by issuing a command like the following: $ tcpdump -l -i eth0 -w - src or dst port 3306 | strings 4.2. Access Control and Account Management MySQL enables the creation of accounts that permit client users to connect to the server and access data managed by the server. The primary function of the MySQL privilege system is to authenticate a user who connects from a given host and to associate that user with privileges on a database such as SELECT, INSERT, UPDATE, and DELETE. Additional functionality includes the ability to grant privileges for administrative operations. To control which users can connect, each account can be assigned authentication credentials such as a password. The user interface to MySQL accounts consists of SQL statements such as CREATE USER, GRANT, and REVOKE. The MySQL privilege system ensures that all users may perform only the operations permitted to them. As a user, when you connect to a MySQL server, your identity is determined by the host from which you connect and the user name you specify. When you issue requests after connecting, the system grants privileges according to your identity and what you want to do. MySQL considers both your host name and user name in identifying you because there is no reason to assume that a given user name belongs to the same person on all hosts. To see what privileges a given account has, use the SHOW GRANTS statement. For example: SHOW GRANTS FOR &#39;joe&#39;@&#39;office.example.com&#39;; SHOW GRANTS FOR &#39;joe&#39;@&#39;home.example.com&#39;; MySQL access control involves two stages when you run a client program that connects to the server: Stage 1: The server accepts or rejects the connection based on your identity and whether you can verify your identity by supplying the correct password. Stage 2: Assuming that you can connect, the server checks each statement you issue to determine whether you have sufficient privileges to perform it. 4.3. Account User Names and Passwords MySQL stores accounts in the user table of the mysql system database. An account is defined in terms of a user name and the client host or hosts from which the user can connect to the server. mysql&gt; DESCRIBE mysql.user; +--------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Field | Type | Null | Key | Default | Extra | +--------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Host | char(255) | NO | PRI | | | | User | char(32) | NO | PRI | | | | Select_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Insert_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Update_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Delete_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Create_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Drop_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | ... An account may also have authentication credentials such as a password. The credentials are handled by the account authentication plugin. MySQL supports multiple authentication plugins. Some of them use built-in authentication methods, whereas others enable authentication using external authentication methods. mysql&gt; SELECT Host,User FROM mysql.user; +-----------+------------------+ | Host | User | +-----------+------------------+ | % | root | | localhost | mysql.infoschema | | localhost | mysql.session | | localhost | mysql.sys | | localhost | root | +-----------+------------------+ 5 rows in set (0.00 sec) 4.4. Privileges Provided by MySQL The privileges granted to a MySQL account determine which operations the account can perform. MySQL privileges differ in the contexts in which they apply and at different levels of operation: Administrative privileges enable users to manage operation of the MySQL server. These privileges are global because they are not specific to a particular database. Database privileges apply to a database and to all objects within it. These privileges can be granted for specific databases, or globally so that they apply to all databases. Privileges for database objects such as tables, indexes, views, and stored routines can be granted for specific objects within a database, for all objects of a given type within a database (for example, all tables in a database), or globally for all objects of a given type in all databases. 4.5. Grant Tables The mysql system database includes several grant tables that contain information about user accounts and the privileges held by them. However, normally you do not modify the grant tables directly. Modifications occur indirectly when you use account-management statements such as CREATE USER, GRANT, and REVOKE to set up accounts and control the privileges available to each one. When you use such statements to perform account manipulations, the server modifies the grant tables on your behalf. These mysql database tables contain grant information: user: User accounts, static global privileges, and other nonprivilege columns. global_grants: Dynamic global privileges. db: Database-level privileges. tables_priv: Table-level privileges. columns_priv: Column-level privileges. procs_priv: Stored procedure and function privileges. proxies_priv: Proxy-user privileges. default_roles: Default user roles. role_edges: Edges for role subgraphs. password_history: Password change history. To check the privileges for a given account, use the SHOW GRANTS statement. SHOW GRANTS FOR &#39;bob&#39;@&#39;pc84.example.com&#39;; To display nonprivilege properties of an account, use SHOW CREATE USER: SHOW CREATE USER &#39;bob&#39;@&#39;pc84.example.com&#39;; 4.6. Specifying Account Names MySQL account names consist of a user name and a host name, which enables creation of distinct accounts for users with the same user name who connect from different hosts. Account names appear in SQL statements such as CREATE USER, GRANT, and SET PASSWORD and follow these rules: Account name syntax is &#39;user_name&#39;@&#39;host_name&#39;. The @&#39;host_name&#39; part is optional. An account name consisting only of a user name is equivalent to &#39;user_name&#39;@&#39;%&#39;. For example, &#39;me&#39; is equivalent to &#39;me&#39;@&#39;%&#39;. The user name and host name need not be quoted if they are legal as unquoted identifiers. Quotes must be used if a user_name string contains special characters (such as space or -), or a host_name string contains special characters or wildcard characters (such as . or %). For example, in the account name &#39;test-user&#39;@&#39;%.com&#39;, both the user name and host name parts require quotes. Quote user names and host names as identifiers or as strings, using either backticks (`), single quotation marks (&#39;), or double quotation marks (&quot;). The user name and host name parts, if quoted, must be quoted separately. That is, write &#39;me&#39;@&#39;localhost&#39;, not &#39;me@localhost&#39;. The latter is actually equivalent to &#39;me@localhost&#39;@&#39;%&#39;. A reference to the CURRENT_USER or CURRENT_USER() function is equivalent to specifying the current client&#8217;s user name and host name literally. mysql&gt; SELECT CURRENT_USER; +----------------+ | CURRENT_USER | +----------------+ | root@localhost | +----------------+ 1 row in set (0.01 sec) MySQL stores account names in grant tables in the mysql system database using separate columns for the user name and host name parts: The user table contains one row for each account. The User and Host columns store the user name and host name. This table also indicates which global privileges the account has. Other grant tables indicate privileges an account has for databases and objects within databases. These tables have User and Host columns to store the account name. Each row in these tables associates with the account in the user table that has the same User and Host values. For access-checking purposes, comparisons of User values are case-sensitive; comparisons of Host values are not case-sensitive. User names and host names have certain special values or wildcard conventions, as described following. An account with a blank user name is an anonymous user. To specify an anonymous user in SQL statements, use a quoted empty user name part, such as &#39;&#39;@&#39;localhost&#39;. The host name part of an account name can take many forms, and wildcards are permitted: A host value can be a host name or an IP address (IPv4 or IPv6). The name &#39;localhost&#39; indicates the local host. The IP address &#39;127.0.0.1&#39; indicates the IPv4 loopback interface. The IP address &#39;::1&#39; indicates the IPv6 loopback interface. The % and _ wildcard characters are permitted in host name or IP address values. These have the same meaning as for pattern-matching operations performed with the LIKE operator. A host value of &#39;%&#39; matches any host name, whereas a value of &#39;%.mysql.com&#39; matches any host in the mysql.com domain. &#39;198.51.100.%&#39; matches any host in the 198.51.100 class C network. MySQL does not perform matching on host names that start with digits and a dot. For a host value specified as an IPv4 address, a netmask can be given to indicate how many address bits to use for the network number. Netmask notation cannot be used for IPv6 addresses. The syntax is host_ip/netmask. For example: CREATE USER &#39;david&#39;@&#39;198.51.100.0/255.255.255.0&#39;; As of MySQL 8.0.23, a host value specified as an IPv4 address can be written using CIDR notation, such as 198.51.100.44/24. 4.7. Specifying Role Names MySQL role names refer to roles, which are named collections of privileges. Role names have syntax and semantics similar to account names. As stored in the grant tables, they have the same properties as account names. Role names differ from account names in these respects: The user part of role names cannot be blank. Thus, there is no “anonymous role” analogous to the concept of “anonymous user.” As for an account name, omitting the host part of a role name results in a host part of &#39;%&#8216;. But unlike &#8217;%&#39; in an account name, a host part of &#39;%&#39; in a role name has no wildcard properties. For example, for a name &#39;me&#39;@&#39;%&#39; used as a role name, the host part (&#8217;%&#39;`) is just a literal value; it has no “any host” matching property. Netmask notation in the host part of a role name has no significance. An account name is permitted to be CURRENT_USER() in several contexts. A role name is not. 4.8. Access Control, Stage 1: Connection Verification When you attempt to connect to a MySQL server, the server accepts or rejects the connection based on these conditions: Your identity and whether you can verify it by supplying the proper credentials. Whether your account is locked or unlocked. The server checks credentials first, then account locking state. A failure at either step causes the server to deny access to you completely. Otherwise, the server accepts the connection, and then enters Stage 2 and waits for requests. The server performs identity and credentials checking using columns in the user table, accepting the connection only if these conditions are satisfied: The client host name and user name match the Host and User columns in some user table row. The client supplies the credentials specified in the row (for example, a password), as indicated by the authentication_string column. Credentials are interpreted using the authentication plugin named in the plugin column. The row indicates that the account is unlocked. Locking state is recorded in the account_locked column, which must have a value of &#39;N&#39;. Account locking can be set or changed with the CREATE USER or ALTER USER statement. The authentication_string column can be blank. This is not a wildcard and does not mean that any password matches. It means that the user must connect without specifying a password. The authentication method implemented by the plugin that authenticates the client may or may not use the password in the authentication_string column. In this case, it is possible that an external password is also used to authenticate to the MySQL server. From MySQL&#8217;s point of view, the encrypted password is the real password, so you should never give anyone access to it. In particular, do not give nonadministrative users read access to tables in the mysql system database. 4.9. Access Control, Stage 2: Request Verification After the server accepts a connection, it enters Stage 2 of access control. For each request that you issue through the connection, the server determines what operation you want to perform, then checks whether your privileges are sufficient. This is where the privilege columns in the grant tables come into play. These privileges can come from any of the user, global_grants, db, tables_priv, columns_priv, or procs_priv tables. The user and global_grants tables grant global privileges for a given account indicate the account privileges that apply on a global basis no matter what the default database is. It is wise to grant privileges in the user table only to people who need them, such as database administrators. For other users, leave all privileges in the user table set to &#39;N&#39; and grant privileges at more specific levels only (for particular databases, tables, columns, or routines). 4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts To manage MySQL accounts, use the SQL statements intended for that purpose: CREATE USER and DROP USER create and remove accounts. GRANT and REVOKE assign privileges to and revoke privileges from accounts. SHOW GRANTS displays account privilege assignments. 4.10.1. Creating Accounts and Granting Privileges The following example uses CREATE USER and GRANT statements to set up four accounts (where you see &#39;password&#39;, substitute an appropriate password): CREATE USER &#39;finley&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON *.* TO &#39;finley&#39; @&#39;localhost&#39; WITH GRANT OPTION; CREATE USER &#39;finley&#39; @&#39;%.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON *.* TO &#39;finley&#39; @&#39;%.example.com&#39; WITH GRANT OPTION; CREATE USER &#39;admin&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT RELOAD, PROCESS ON *.* TO &#39;admin&#39; @&#39;localhost&#39;; CREATE USER &#39;dummy&#39; @&#39;localhost&#39;; The previous example grants privileges at the global level. The next example creates three accounts and grants them access at lower levels; that is, to specific databases or objects within databases. Each account has a user name of custom, but the host name parts differ: CREATE USER &#39;custom&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON bankaccount.* TO &#39;custom&#39; @&#39;localhost&#39;; CREATE USER &#39;custom&#39; @&#39;host47.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON expenses.* TO &#39;custom&#39; @&#39;host47.example.com&#39;; CREATE USER &#39;custom&#39; @&#39;%.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON customer.addresses TO &#39;custom&#39; @&#39;%.example.com&#39;; 4.10.2. Checking Account Privileges and Properties mysql&gt; SELECT User,Host FROM mysql.user; +------------------+--------------------+ | User | Host | +------------------+--------------------+ | root | % | | custom | %.example.com | | finley | %.example.com | | custom | host47.example.com | | admin | localhost | | custom | localhost | | dummy | localhost | | finley | localhost | | mysql.infoschema | localhost | | mysql.session | localhost | | mysql.sys | localhost | | root | localhost | +------------------+--------------------+ 12 rows in set (0.00 sec) To see the privileges for an account, use SHOW GRANTS: mysql&gt; SHOW GRANTS FOR &#39;admin&#39;@&#39;localhost&#39;; +-----------------------------------------------------+ | Grants for admin@localhost | +-----------------------------------------------------+ | GRANT RELOAD, PROCESS ON *.* TO `admin`@`localhost` | +-----------------------------------------------------+ 1 row in set (0.00 sec) To see nonprivilege properties for an account, use SHOW CREATE USER: mysql&gt; SHOW CREATE USER &#39;admin&#39;@&#39;localhost&#39;\G *************************** 1. row *************************** CREATE USER for admin@localhost: CREATE USER `admin`@`localhost` IDENTIFIED WITH &#39;caching_sha2_password&#39; AS &#39;$A$005$d6zqX\nG\&#39;S03)B8Ixmrn5EBoH1Fc4MFp5p07e1AIzknBpHaKaHwdaXpB&#39; REQUIRE NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK PASSWORD HISTORY DEFAULT PASSWORD REUSE INTERVAL DEFAULT PASSWORD REQUIRE CURRENT DEFAULT 1 row in set (0.00 sec) 4.10.3. Revoking Account Privileges To revoke account privileges, use the REVOKE statement. Privileges can be revoked at different levels, just as they can be granted at different levels. Revoke global privileges: REVOKE ALL ON *.* FROM &#39;finley&#39;@&#39;%.example.com&#39;; REVOKE RELOAD ON *.* FROM &#39;admin&#39;@&#39;localhost&#39;; Revoke database-level privileges: REVOKE CREATE,DROP ON expenses.* FROM &#39;custom&#39;@&#39;host47.example.com&#39;; Revoke table-level privileges: REVOKE INSERT,UPDATE,DELETE ON customer.addresses FROM &#39;custom&#39;@&#39;%.example.com&#39;; To check the effect of privilege revocation, use SHOW GRANTS: mysql&gt; SHOW GRANTS FOR &#39;admin&#39;@&#39;localhost&#39;; +---------------------------------------------+ | Grants for admin@localhost | +---------------------------------------------+ | GRANT PROCESS ON *.* TO `admin`@`localhost` | +---------------------------------------------+ 4.10.4. Dropping Accounts To remove an account, use the DROP USER statement. For example, to drop some of the accounts created previously: DROP USER &#39;finley&#39;@&#39;localhost&#39;; DROP USER &#39;finley&#39;@&#39;%.example.com&#39;; DROP USER &#39;admin&#39;@&#39;localhost&#39;; DROP USER &#39;dummy&#39;@&#39;localhost&#39;; 4.11. Assigning Account Passwords To assign a password when you create a new account, use CREATE USER and include an IDENTIFIED BY clause: CREATE USER &#39;jeffrey&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; To assign or change a password for an existing account, use the ALTER USER statement with an IDENTIFIED BY clause: ALTER USER &#39;jeffrey&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; If you are not connected as an anonymous user, you can change your own password without naming your own account literally: ALTER USER USER() IDENTIFIED BY &#39;password&#39;; 4.12. Account Locking MySQL supports locking and unlocking user accounts using the ACCOUNT LOCK and ACCOUNT UNLOCK clauses for the CREATE USER and ALTER USER statements: When used with CREATE USER, these clauses specify the initial locking state for a new account. In the absence of either clause, the account is created in an unlocked state. When used with ALTER USER, these clauses specify the new locking state for an existing account. In the absence of either clause, the account locking state remains unchanged. Account locking state is recorded in the account_locked column of the mysql.user system table. The output from SHOW CREATE USER indicates whether an account is locked or unlocked. If a client attempts to connect to a locked account, the attempt fails. The server increments the Locked_connects status variable that indicates the number of attempts to connect to a locked account, returns an ER_ACCOUNT_HAS_BEEN_LOCKED error, and writes a message to the error log: Access denied for user &#39;user_name&#39;@&#39;host_name&#39;. Account is locked. mysql&gt; CREATE USER test@localhost IDENTIFIED BY &#39;pwd&#39;; Query OK, 0 rows affected (0.02 sec) mysql&gt; GRANT ALL ON test.* TO test@localhost; Query OK, 0 rows affected, 1 warning (0.01 sec) mysql&gt; SHOW WARNINGS; +---------+------+--------------------------------------------------------------------------------------------------------------+ | Level | Code | Message | +---------+------+--------------------------------------------------------------------------------------------------------------+ | Warning | 1285 | MySQL is started in --skip-name-resolve mode; you must restart it without this switch for this grant to work | +---------+------+--------------------------------------------------------------------------------------------------------------+ 1 row in set (0.01 sec) mysql&gt; ALTER USER test@localhost ACCOUNT LOCK; Query OK, 0 rows affected (0.01 sec) mysql&gt; SELECT User,Host,account_locked FROM mysql.user WHERE User=&#39;test&#39;; +------+-----------+----------------+ | User | Host | account_locked | +------+-----------+----------------+ | test | localhost | Y | +------+-----------+----------------+ 1 row in set (0.00 sec) $ docker exec -it mysql8 mysql -u test -p Enter password: ERROR 3118 (HY000): Access denied for user &#39;test&#39;@&#39;localhost&#39;. Account is locked. mysql&gt; DROP USER test@localhost; Query OK, 0 rows affected (0.01 sec) 5. Backup and Recovery It is important to back up your databases so that you can recover your data and be up and running again in case problems occur, such as system crashes, hardware failures, or users deleting data by mistake. Backups are also essential as a safeguard before upgrading a MySQL installation, and they can be used to transfer a MySQL installation to another system or to set up replica servers. 5.1. Using mysqldump for Backups mysqldump produces two types of output, depending on whether the --tab option is given: Without --tab, mysqldump writes SQL statements to the standard output. This output consists of CREATE statements to create dumped objects (databases, tables, stored routines, and so forth), and INSERT statements to load data into tables. The output can be saved in a file and reloaded later using mysql to recreate the dumped objects. Options are available to modify the format of the SQL statements, and to control which objects are dumped. With --tab, mysqldump produces two output files for each dumped table. The server writes one file as tab-delimited text, one line per table row. This file is named tbl_name.txt in the output directory. The server also sends a CREATE TABLE statement for the table to mysqldump, which writes it as a file named tbl_name.sql in the output directory. 5.1.1. Dumping Data in SQL Format with mysqldump By default, mysqldump writes information as SQL statements to the standard output. You can save the output in a file: $ mysqldump [arguments] &gt; file_name To dump all databases, invoke mysqldump with the --all-databases option: $ mysqldump --all-databases &gt; dump.sql To dump only specific databases, name them on the command line and use the --databases option: $ mysqldump --databases db1 db2 db3 &gt; dump.sql The --databases option causes all names on the command line to be treated as database names. Without this option, mysqldump treats the first name as a database name and those following as table names. With --all-databases or --databases, mysqldump writes CREATE DATABASE and USE statements prior to the dump output for each database. This ensures that when the dump file is reloaded, it creates each database if it does not exist and makes it the default database so database contents are loaded into the same database from which they came. If you want to cause the dump file to force a drop of each database before recreating it, use the --add-drop-database option as well. In this case, mysqldump writes a DROP DATABASE statement preceding each CREATE DATABASE statement. To dump a single database, name it on the command line: $&gt; mysqldump --databases test &gt; dump.sql In the single-database case, it is permissible to omit the --databases option: $&gt; mysqldump test &gt; dump.sql The difference between the two preceding commands is that without --databases, the dump output contains no CREATE DATABASE or USE statements. To dump only specific tables from a database, name them on the command line following the database name: $&gt; mysqldump test t1 t3 t7 &gt; dump.sql $ docker exec -it mysql8 sh -c &quot;mysqldump -u root -p --databases test &gt; /tmp/test.sql&quot; Enter password: $ docker exec -it mysql8 cat /tmp/test.sql -- MySQL dump 10.13 Distrib 8.0.27, for Linux (x86_64) -- -- Host: localhost Database: test -- ------------------------------------------------------ -- Server version 8.0.27 ... -- Dump completed on 2021-12-30 8:07:50 5.1.2. Reloading SQL-Format Backups To reload a dump file written by mysqldump that consists of SQL statements, use it as input to the mysql client. If the dump file was created by mysqldump with the --all-databases or --databases option, it contains CREATE DATABASE and USE statements and it is not necessary to specify a default database into which to load the data: $ mysql &lt; dump.sql Alternatively, from within mysql, use a source command: mysql&gt; source dump.sql If the file is a single-database dump not containing CREATE DATABASE and USE statements, create the database first (if necessary): $ mysqladmin create db1 Then specify the database name when you load the dump file: $ mysql db1 &lt; dump.sql Alternatively, from within mysql, create the database, select it as the default database, and load the dump file: mysql&gt; CREATE DATABASE IF NOT EXISTS db1; mysql&gt; USE db1; mysql&gt; source dump.sql 6. The InnoDB Storage Engine 7. References https://hub.docker.com/_/mysql https://dev.mysql.com/doc/refman/8.0/en/" />
<link rel="canonical" href="https://blog.codefarm.me/2021/12/29/what-is-mysql/" />
<meta property="og:url" content="https://blog.codefarm.me/2021/12/29/what-is-mysql/" />
<meta property="og:site_name" content="CODE FARM" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-29T15:39:20+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="What is MySQL?" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-12-29T15:39:20+08:00","datePublished":"2021-12-29T15:39:20+08:00","description":"1. Deploying MySQL on Linux with Docker 1.1. Starting a MySQL Server Instance 1.2. Using a custom MySQL configuration file 1.3. Creating database dumps 1.4. Restoring data from dump files 1.5. Connecting to and Disconnecting from the Server 2. Entering Queries 3. Creating and Using a Database 3.1. Creating and Selecting a Database 3.2. Creating a Table 3.3. Loading Data into a Table 3.4. Retrieving Information from a Table 4. Security 4.1. Security Guidelines 4.2. Access Control and Account Management 4.3. Account User Names and Passwords 4.4. Privileges Provided by MySQL 4.5. Grant Tables 4.6. Specifying Account Names 4.7. Specifying Role Names 4.8. Access Control, Stage 1: Connection Verification 4.9. Access Control, Stage 2: Request Verification 4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts 4.10.1. Creating Accounts and Granting Privileges 4.10.2. Checking Account Privileges and Properties 4.10.3. Revoking Account Privileges 4.10.4. Dropping Accounts 4.11. Assigning Account Passwords 4.12. Account Locking 5. Backup and Recovery 5.1. Using mysqldump for Backups 5.1.1. Dumping Data in SQL Format with mysqldump 5.1.2. Reloading SQL-Format Backups 6. The InnoDB Storage Engine 7. References 1. Deploying MySQL on Linux with Docker 1.1. Starting a MySQL Server Instance To start a new Docker container for a MySQL Server, use the following command: docker run --name=container_name [--restart on-failure] -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes [-e MYSQL_ONETIME_PASSWORD=yes] image_name:tag $ docker run --name mysql8 -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes mysql:8 b4b86043b5562bb9069d82a663e2beae7fb417d6c3a005ade1a9b48ced6048f5 $ docker logs mysql8 2&gt;&amp;1 | grep GENERATED 2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi $ docker logs mysql8 2021-12-29 08:21:58+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started. 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Switching to dedicated user &#39;mysql&#39; 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started. 2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Initializing database files ... 2021-12-29 08:22:05+00:00 [Note] [Entrypoint]: Starting temporary server ... 2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi ... 2021-12-29 08:22:11+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up. 2021-12-29T08:22:12.185059Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.27) starting as process 1 2021-12-29T08:22:12.193270Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. 2021-12-29T08:22:12.948002Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: &#39;8.0.27&#39; socket: &#39;/var/run/mysqld/mysqld.sock&#39; port: 3306 MySQL Community Server - GPL. 1.2. Using a custom MySQL configuration file docker run \\ --name some-mysql \\ -v /my/custom:/etc/mysql/conf.d \\ (1) -v /my/own/datadir:/var/lib/mysql \\ (2) -e MYSQL_ROOT_PASSWORD=my-secret-pw \\ -d \\ mysql:tag 1 The default configuration for MySQL can be found in /etc/mysql/my.cnf, which may !includedir additional directories such as /etc/mysql/conf.d or /etc/mysql/mysql.conf.d. If /my/custom/config-file.cnf is the path and name of your custom configuration file, you can start your mysql container like this (note that only the directory path of the custom config file is used in this command): This will start a new container some-mysql where the MySQL instance uses the combined startup settings from /etc/mysql/my.cnf and /etc/mysql/conf.d/config-file.cnf, with settings from the latter taking precedence. 2 The -v /my/own/datadir:/var/lib/mysql part of the command mounts the /my/own/datadir directory from the underlying host system as /var/lib/mysql inside the container, where MySQL by default will write its data files. 1.3. Creating database dumps docker exec some-mysql \\ sh -c &#39;exec mysqldump --all-databases -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &gt; /some/path/on/your/host/all-databases.sql 1.4. Restoring data from dump files docker exec -i some-mysql \\ sh -c &#39;exec mysql -uroot -p&quot;$MYSQL_ROOT_PASSWORD&quot;&#39; &lt; /some/path/on/your/host/all-databases.sql 1.5. Connecting to and Disconnecting from the Server To connect to the server, you usually need to provide a MySQL user name when you invoke mysql and, most likely, a password. If the server runs on a machine other than the one where you log in, you must also specify a host name. $&gt; mysql -h host -u user -p Enter password: ******** host and user represent the host name where your MySQL server is running and the user name of your MySQL account. Substitute appropriate values for your setup. The ******** represents your password; enter it when mysql displays the Enter password: prompt. $ docker exec -it mysql8 mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 9 Server version: 8.0.27 MySQL Community Server - GPL Copyright (c) 2000, 2021, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. mysql&gt; \\q Bye 2. Entering Queries Here is a simple query that asks the server to tell you its version number and the current date. Type it in as shown here following the mysql&gt; prompt and press Enter: $ docker exec -it mysql8 mysql -u root -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 10 Server version: 8.0.27 MySQL Community Server - GPL Copyright (c) 2000, 2021, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. mysql&gt; SELECT VERSION(), CURRENT_DATE; +-----------+--------------+ | VERSION() | CURRENT_DATE | +-----------+--------------+ | 8.0.27 | 2021-12-29 | +-----------+--------------+ 1 row in set (0.00 sec) This query illustrates several things about mysql: A query normally consists of an SQL statement followed by a semicolon. When you issue a query, mysql sends it to the server for execution and displays the results, then prints another mysql&gt; prompt to indicate that it is ready for another query. mysql displays query output in tabular form (rows and columns). The first row contains labels for the columns. The rows following are the query results. mysql shows how many rows were returned and how long the query took to execute, which gives you a rough idea of server performance. These values are imprecise because they represent wall clock time (not CPU or machine time), and because they are affected by factors such as server load and network latency. Keywords may be entered in any lettercase. The following queries are equivalent: mysql&gt; SELECT VERSION(), CURRENT_DATE; mysql&gt; select version(), current_date; mysql&gt; SeLeCt vErSiOn(), current_DATE; Here is another query. It demonstrates that you can use mysql as a simple calculator: mysql&gt; SELECT SIN(PI()/4), (4+1)*5; +-------------------------+---------+ | SIN(PI()/4) | (4+1)*5 | +-------------------------+---------+ | 0.7071067811865475 | 25 | +-------------------------+---------+ 1 row in set (0.00 sec) You can even enter multiple statements on a single line. Just end each one with a semicolon: mysql&gt; SELECT VERSION(); SELECT NOW(); +-----------+ | VERSION() | +-----------+ | 8.0.27 | +-----------+ 1 row in set (0.00 sec) +---------------------+ | NOW() | +---------------------+ | 2021-12-29 09:18:28 | +---------------------+ 1 row in set (0.00 sec) Here is a simple multiple-line statement: mysql&gt; SELECT -&gt; USER() -&gt; , -&gt; CURRENT_DATE -&gt; ; +----------------+----------------+ | USER() | CURRENT_DATE | +----------------+----------------+ | root@localhost | 2021-12-29 | +----------------+----------------+ 1 row in set (0.00 sec) 3. Creating and Using a Database Use the SHOW statement to find out what databases currently exist on the server: mysql&gt; SHOW DATABASES; +------------------------------------------------------------------+ | Database | +------------------------------------------------------------------+ | information_schema | | mysql | | performance_schema | | sys | +------------------------------------------------------------------+ 4 rows in set (0.01 sec) The list of databases displayed by the statement may be different on your machine; SHOW DATABASES does not show databases that you have no privileges for if you do not have the SHOW DATABASES privilege. 3.1. Creating and Selecting a Database If the administrator creates your database for you when setting up your permissions, you can begin using it. Otherwise, you need to create it yourself: mysql&gt; CREATE DATABASE test; Query OK, 1 row affected (0.02 sec) Under Unix, database names are case-sensitive (unlike SQL keywords), so you must always refer to your database as test, not as Test, TEST, or some other variant. This is also true for table names. Creating a database does not select it for use; you must do that explicitly. To make menagerie the current database, use this statement: mysql&gt; SELECT DATABASE(); +------------------------------------+ | DATABASE() | +------------------------------------+ | NULL | +------------------------------------+ 1 row in set (0.00 sec) mysql&gt; USE test Database changed mysql&gt; SELECT DATABASE(); +------------------------------------+ | DATABASE() | +------------------------------------+ | test | +------------------------------------+ 1 row in set (0.00 sec) Your database needs to be created only once, but you must select it for use each time you begin a mysql session. You can do this by issuing a USE statement as shown in the example. Alternatively, you can select the database on the command line when you invoke mysql. Just specify its name after any connection parameters that you might need to provide. For example: $ docker exec -it mysql8 mysql -u root -p test Enter password: ... Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. mysql&gt; SELECT DATABASE(); +------------+ | DATABASE() | +------------+ | test | +------------+ 1 row in set (0.00 sec) mysql&gt; 3.2. Creating a Table Creating the database is the easy part, but at this point it is empty, as SHOW TABLES tells you: mysql&gt; SHOW TABLES; Empty set (0.01 sec) Use a CREATE TABLE statement to specify the layout of your table: mysql&gt; CREATE TABLE pet ( -&gt; name VARCHAR(20), -&gt; owner VARCHAR(20), -&gt; species VARCHAR(20), -&gt; sex CHAR(1), -&gt; birth DATE, -&gt; death DATE -&gt; ); Query OK, 0 rows affected (0.03 sec) If you make a poor choice and it turns out later that you need a longer field, MySQL provides an ALTER TABLE statement. Once you have created a table, SHOW TABLES should produce some output: mysql&gt; SHOW TABLES; +----------------+ | Tables_in_test | +----------------+ | pet | +----------------+ 1 row in set (0.01 sec) mysql&gt; SHOW TABLES IN test; +----------------+ | Tables_in_test | +----------------+ | pet | +----------------+ 1 row in set (0.00 sec) To verify that your table was created the way you expected, use a DESCRIBE statement: mysql&gt; DESCRIBE pet; +---------+-------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +---------+-------------+------+-----+---------+-------+ | name | varchar(20) | YES | | NULL | | | owner | varchar(20) | YES | | NULL | | | species | varchar(20) | YES | | NULL | | | sex | char(1) | YES | | NULL | | | birth | date | YES | | NULL | | | death | date | YES | | NULL | | +---------+-------------+------+-----+---------+-------+ 6 rows in set (0.07 sec) 3.3. Loading Data into a Table After creating your table, you need to populate it. The LOAD DATA and INSERT statements are useful for this. name owner species sex birth death Fluffy Harold cat f 1993-02-04 Claws Gwen cat m 1994-03-17 Buffy Harold dog f 1989-05-13 Fang Benny dog m 1990-08-27 Bowser Diane dog m 1979-08-31 1995-07-29 Chirpy Gwen bird f 1998-09-11 Whistler Gwen bird 1997-12-09 Slim Benny snake m 1996-04-29 You could create a text file pet.txt containing one record per line, with values separated by tabs, and given in the order in which the columns were listed in the CREATE TABLE statement. For missing values (such as unknown sexes or death dates for animals that are still living), you can use NULL values. To represent these in your text file, use \\N (backslash, capital-N). For example, the record for Whistler the bird would look like this (where the whitespace between values is a single tab character): Whistler Gwen bird \\N 1997-12-09 \\N To load the text file pet.txt into the pet table, use this statement: mysql&gt; LOAD DATA LOCAL INFILE &#39;/path/pet.txt&#39; INTO TABLE pet; When you want to add new records one at a time, the INSERT statement is useful. In its simplest form, you supply values for each column, in the order in which the columns were listed in the CREATE TABLE statement. Suppose that Diane gets a new hamster named “Puffball.” You could add a new record using an INSERT statement like this: mysql&gt; INSERT INTO pet -&gt; VALUES ( -&gt; &#39;Puffball&#39;, -&gt; &#39;Diane&#39;, -&gt; &#39;hamster&#39;, -&gt; &#39;f&#39;, -&gt; &#39;1999-03-30&#39;, -&gt; NULL -&gt; ); Query OK, 1 row affected (0.03 sec) String and date values are specified as quoted strings here. Also, with INSERT, you can insert NULL directly to represent a missing value. You do not use \\N like you do with LOAD DATA. 3.4. Retrieving Information from a Table Selecting All Data mysql&gt; SELECT * FROM pet; +----------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+--------+---------+------+------------+------------+ | Puffball | Diane | hamster | f | 1999-03-30 | NULL | | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Fang | Benny | dog | m | 1990-08-27 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Chirpy | Gwen | bird | f | 1998-09-11 | NULL | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | | Slim | Benny | snake | m | 1996-04-29 | NULL | +----------+--------+---------+------+------------+------------+ 9 rows in set (0.00 sec) Selecting Particular Rows mysql&gt; SELECT * FROM pet WHERE name=&#39;Browser&#39;; Empty set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name=&#39;Bowser&#39;; +--------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+-------+---------+------+------------+------------+ | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+-------+---------+------+------------+------------+ 1 row in set (0.00 sec) Selecting Particular Columns mysql&gt; SELECT name,birth FROM pet; +----------+------------+ | name | birth | +----------+------------+ | Puffball | 1999-03-30 | | Fluffy | 1993-02-04 | | Claws | 1994-03-17 | | Buffy | 1989-05-13 | | Fang | 1990-08-27 | | Bowser | 1979-08-31 | | Chirpy | 1998-09-11 | | Whistler | 1997-12-09 | | Slim | 1996-04-29 | +----------+------------+ 9 rows in set (0.00 sec) Sorting Rows mysql&gt; SELECT name,birth FROM pet ORDER BY birth; +----------+------------+ | name | birth | +----------+------------+ | Bowser | 1979-08-31 | | Buffy | 1989-05-13 | | Fang | 1990-08-27 | | Fluffy | 1993-02-04 | | Claws | 1994-03-17 | | Slim | 1996-04-29 | | Whistler | 1997-12-09 | | Chirpy | 1998-09-11 | | Puffball | 1999-03-30 | +----------+------------+ 9 rows in set (0.00 sec) Date Calculations mysql&gt; SELECT name, -&gt; birth, -&gt; CURDATE(), -&gt; TIMESTAMPDIFF(YEAR, birth, CURDATE()) AS age -&gt; FROM pet; +----------+------------+------------+------+ | name | birth | CURDATE() | age | +----------+------------+------------+------+ | Puffball | 1999-03-30 | 2021-12-29 | 22 | | Fluffy | 1993-02-04 | 2021-12-29 | 28 | | Claws | 1994-03-17 | 2021-12-29 | 27 | | Buffy | 1989-05-13 | 2021-12-29 | 32 | | Fang | 1990-08-27 | 2021-12-29 | 31 | | Bowser | 1979-08-31 | 2021-12-29 | 42 | | Chirpy | 1998-09-11 | 2021-12-29 | 23 | | Whistler | 1997-12-09 | 2021-12-29 | 24 | | Slim | 1996-04-29 | 2021-12-29 | 25 | +----------+------------+------------+------+ 9 rows in set (0.01 sec) mysql&gt; SELECT name, -&gt; birth, -&gt; death, -&gt; TIMESTAMPDIFF(YEAR, birth, death) AS age -&gt; FROM pet -&gt; WHERE death IS NOT NULL -&gt; ORDER BY age; +--------+------------+------------+------+ | name | birth | death | age | +--------+------------+------------+------+ | Bowser | 1979-08-31 | 1995-07-29 | 15 | +--------+------------+------------+------+ 1 row in set (0.00 sec) mysql&gt; SELECT name, birth, MONTH(birth) FROM pet; +----------+------------+--------------+ | name | birth | MONTH(birth) | +----------+------------+--------------+ | Puffball | 1999-03-30 | 3 | | Fluffy | 1993-02-04 | 2 | | Claws | 1994-03-17 | 3 | | Buffy | 1989-05-13 | 5 | | Fang | 1990-08-27 | 8 | | Bowser | 1979-08-31 | 8 | | Chirpy | 1998-09-11 | 9 | | Whistler | 1997-12-09 | 12 | | Slim | 1996-04-29 | 4 | +----------+------------+--------------+ 9 rows in set (0.00 sec) mysql&gt; SELECT &#39;2018-10-31&#39; + INTERVAL 1 DAY; +-------------------------------+ | &#39;2018-10-31&#39; + INTERVAL 1 DAY | +-------------------------------+ | 2018-11-01 | +-------------------------------+ 1 row in set (0.00 sec) mysql&gt; SELECT &#39;2018-10-32&#39; + INTERVAL 1 DAY; +-------------------------------+ | &#39;2018-10-32&#39; + INTERVAL 1 DAY | +-------------------------------+ | NULL | +-------------------------------+ 1 row in set, 1 warning (0.00 sec) mysql&gt; SHOW WARNINGS; +---------+------+----------------------------------------+ | Level | Code | Message | +---------+------+----------------------------------------+ | Warning | 1292 | Incorrect datetime value: &#39;2018-10-32&#39; | +---------+------+----------------------------------------+ 1 row in set (0.00 sec) Working with NULL Values mysql&gt; SELECT 1 IS NULL, 1 IS NOT NULL; +-----------+---------------+ | 1 IS NULL | 1 IS NOT NULL | +-----------+---------------+ | 0 | 1 | +-----------+---------------+ 1 row in set (0.00 sec) mysql&gt; SELECT 1 = NULL, 1 &lt;&gt; NULL, 1 &lt; NULL, 1 &gt; NULL; +----------+-----------+----------+----------+ | 1 = NULL | 1 &lt;&gt; NULL | 1 &lt; NULL | 1 &gt; NULL | +----------+-----------+----------+----------+ | NULL | NULL | NULL | NULL | +----------+-----------+----------+----------+ 1 row in set (0.00 sec) mysql&gt; SELECT 0 IS NULL, 0 IS NOT NULL, &#39;&#39; IS NULL, &#39;&#39; IS NOT NULL; +-----------+---------------+------------+----------------+ | 0 IS NULL | 0 IS NOT NULL | &#39;&#39; IS NULL | &#39;&#39; IS NOT NULL | +-----------+---------------+------------+----------------+ | 0 | 1 | 0 | 1 | +-----------+---------------+------------+----------------+ 1 row in set (0.00 sec) Pattern Matching mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;b%&#39;; +--------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+------------+ | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+--------+---------+------+------------+------------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;%fy&#39;; +--------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+-------+ | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +--------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;%w%&#39;; +----------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+-------+---------+------+------------+------------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | +----------+-------+---------+------+------------+------------+ 3 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE name LIKE &#39;_____&#39;; +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^b&#39;); +--------+--------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+------------+ | Buffy | Harold | dog | f | 1989-05-13 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | +--------+--------+---------+------+------------+------------+ 2 rows in set (0.01 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;fy$&#39;); +--------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +--------+--------+---------+------+------------+-------+ | Fluffy | Harold | cat | f | 1993-02-04 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +--------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;w&#39;); +----------+-------+---------+------+------------+------------+ | name | owner | species | sex | birth | death | +----------+-------+---------+------+------------+------------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Bowser | Diane | dog | m | 1979-08-31 | 1995-07-29 | | Whistler | Gwen | bird | NULL | 1997-12-09 | NULL | +----------+-------+---------+------+------------+------------+ 3 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^.....$&#39;); +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) mysql&gt; SELECT * FROM pet WHERE REGEXP_LIKE(name, &#39;^.{5}$&#39;); +-------+--------+---------+------+------------+-------+ | name | owner | species | sex | birth | death | +-------+--------+---------+------+------------+-------+ | Claws | Gwen | cat | m | 1994-03-17 | NULL | | Buffy | Harold | dog | f | 1989-05-13 | NULL | +-------+--------+---------+------+------------+-------+ 2 rows in set (0.00 sec) Counting Rows mysql&gt; SELECT COUNT(*) FROM pet; +----------+ | COUNT(*) | +----------+ | 9 | +----------+ 1 row in set (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet GROUP BY owner; +--------+----------+ | owner | COUNT(*) | +--------+----------+ | Diane | 2 | | Harold | 2 | | Gwen | 3 | | Benny | 2 | +--------+----------+ 4 rows in set (0.00 sec) mysql&gt; SET sql_mode = &#39;ONLY_FULL_GROUP_BY&#39;; Query OK, 0 rows affected (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet; ERROR 1140 (42000): In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggregated column &#39;test.pet.owner&#39;; this is incompatible with sql_mode=only_full_group_by mysql&gt; SET sql_mode = &#39;&#39;; Query OK, 0 rows affected (0.00 sec) mysql&gt; SELECT owner, COUNT(*) FROM pet; +-------+----------+ | owner | COUNT(*) | +-------+----------+ | Diane | 9 | +-------+----------+ 1 row in set (0.00 sec) Using More Than one Table event.sql CREATE TABLE event ( name VARCHAR(20), date DATE, type VARCHAR(15), remark VARCHAR(255) ); INSERT INTO event VALUES(&#39;Fluffy&#39;,&#39;1995-05-15&#39;,&#39;litter&#39;,&#39;4 kittens, 3 female, 1 male&#39;); INSERT INTO event VALUES(&#39;Buffy&#39;,&#39;1993-06-23&#39;,&#39;litter&#39;,&#39;5 puppies, 2 female, 3 male&#39;); INSERT INTO event VALUES(&#39;Buffy&#39;,&#39;1994-06-19&#39;,&#39;litter&#39;,&#39;3 puppies, 3 female&#39;); INSERT INTO event VALUES(&#39;Chirpy&#39;,&#39;1999-03-21&#39;,&#39;vet&#39;,&#39;needed beak straightened&#39;); INSERT INTO event VALUES(&#39;Slim&#39;,&#39;1997-08-03&#39;,&#39;vet&#39;,&#39;broken rib&#39;); INSERT INTO event VALUES(&#39;Bowser&#39;,&#39;1991-10-12&#39;,&#39;kennel&#39;,NULL); INSERT INTO event VALUES(&#39;Fang&#39;,&#39;1991-10-12&#39;,&#39;kennel&#39;,NULL); INSERT INTO event VALUES(&#39;Fang&#39;,&#39;1998-08-28&#39;,&#39;birthday&#39;,&#39;Gave him a new chew toy&#39;); INSERT INTO event VALUES(&#39;Claws&#39;,&#39;1998-03-17&#39;,&#39;birthday&#39;,&#39;Gave him a new flea collar&#39;); INSERT INTO event values(&#39;Whistler&#39;,&#39;1998-12-09&#39;,&#39;birthday&#39;,&#39;First birthday&#39;); $ docker exec -it mysql8 sh -c &quot;mysql -u root -p test &lt; event.sql&quot; Enter password: ***** mysql&gt; SHOW TABLES; +----------------+ | Tables_in_test | +----------------+ | event | | pet | +----------------+ 2 rows in set (0.02 sec) mysql&gt; DESCRIBE event; +--------+--------------+------+-----+---------+-------+ | Field | Type | Null | Key | Default | Extra | +--------+--------------+------+-----+---------+-------+ | name | varchar(20) | YES | | NULL | | | date | date | YES | | NULL | | | type | varchar(15) | YES | | NULL | | | remark | varchar(255) | YES | | NULL | | +--------+--------------+------+-----+---------+-------+ 4 rows in set (0.03 sec) mysql&gt; SELECT pet.name, -&gt; TIMESTAMPDIFF(YEAR, birth, date) AS age, -&gt; remark -&gt; FROM pet -&gt; INNER JOIN event ON pet.name = event.name -&gt; WHERE event.type = &#39;litter&#39;; +--------+------+-----------------------------+ | name | age | remark | +--------+------+-----------------------------+ | Fluffy | 2 | 4 kittens, 3 female, 1 male | | Buffy | 5 | 3 puppies, 3 female | | Buffy | 4 | 5 puppies, 2 female, 3 male | +--------+------+-----------------------------+ 3 rows in set (0.00 sec) 4. Security When thinking about security within a MySQL installation, you should consider a wide range of possible topics and how they affect the security of your MySQL server and related applications: General factors that affect security. These include choosing good passwords, not granting unnecessary privileges to users, ensuring application security by preventing SQL injections and data corruption, and others. Security of the installation itself. The data files, log files, and the all the application files of your installation should be protected to ensure that they are not readable or writable by unauthorized parties. Access control and security within the database system itself, including the users and databases granted with access to the databases, views and stored programs in use within the database. The features offered by security-related plugins. Network security of MySQL and your system. The security is related to the grants for individual users, but you may also wish to restrict MySQL so that it is available only locally on the MySQL server host, or to a limited set of other hosts. Ensure that you have adequate and appropriate backups of your database files, configuration and log files. Also be sure that you have a recovery solution in place and test that you are able to successfully recover the information from your backups. 4.1. Security Guidelines Anyone using MySQL on a computer connected to the Internet should read this section to avoid the most common security mistakes. In discussing security, it is necessary to consider fully protecting the entire server host (not just the MySQL server) against all types of applicable attacks: eavesdropping, altering, playback, and denial of service. MySQL uses security based on Access Control Lists (ACLs) for all connections, queries, and other operations that users can attempt to perform. There is also support for SSL-encrypted connections between MySQL clients and servers. Many of the concepts discussed here are not specific to MySQL at all; the same general ideas apply to almost all applications. When running MySQL, follow these guidelines: Do not ever give anyone (except MySQL root accounts) access to the user table in the mysql system database! This is critical. Learn how the MySQL access privilege system works. Use the GRANT and REVOKE statements to control access to MySQL. Do not grant more privileges than necessary. Never grant privileges to all hosts. Do not store cleartext passwords in your database. If your computer becomes compromised, the intruder can take the full list of passwords and use them. Instead, use SHA2() or some other one-way hashing function and store the hash value. To prevent password recovery using rainbow tables, do not use these functions on a plain password; instead, choose some string to be used as a salt, and use hash(hash(password)+salt) values. Invest in a firewall. This protects you from at least 50% of all types of exploits in any software. Put MySQL behind the firewall or in a demilitarized zone (DMZ). Applications that access MySQL should not trust any data entered by users, and should be written using proper defensive programming techniques. Do not transmit plain (unencrypted) data over the Internet. Learn to use the tcpdump and strings utilities. In most cases, you can check whether MySQL data streams are unencrypted by issuing a command like the following: $ tcpdump -l -i eth0 -w - src or dst port 3306 | strings 4.2. Access Control and Account Management MySQL enables the creation of accounts that permit client users to connect to the server and access data managed by the server. The primary function of the MySQL privilege system is to authenticate a user who connects from a given host and to associate that user with privileges on a database such as SELECT, INSERT, UPDATE, and DELETE. Additional functionality includes the ability to grant privileges for administrative operations. To control which users can connect, each account can be assigned authentication credentials such as a password. The user interface to MySQL accounts consists of SQL statements such as CREATE USER, GRANT, and REVOKE. The MySQL privilege system ensures that all users may perform only the operations permitted to them. As a user, when you connect to a MySQL server, your identity is determined by the host from which you connect and the user name you specify. When you issue requests after connecting, the system grants privileges according to your identity and what you want to do. MySQL considers both your host name and user name in identifying you because there is no reason to assume that a given user name belongs to the same person on all hosts. To see what privileges a given account has, use the SHOW GRANTS statement. For example: SHOW GRANTS FOR &#39;joe&#39;@&#39;office.example.com&#39;; SHOW GRANTS FOR &#39;joe&#39;@&#39;home.example.com&#39;; MySQL access control involves two stages when you run a client program that connects to the server: Stage 1: The server accepts or rejects the connection based on your identity and whether you can verify your identity by supplying the correct password. Stage 2: Assuming that you can connect, the server checks each statement you issue to determine whether you have sufficient privileges to perform it. 4.3. Account User Names and Passwords MySQL stores accounts in the user table of the mysql system database. An account is defined in terms of a user name and the client host or hosts from which the user can connect to the server. mysql&gt; DESCRIBE mysql.user; +--------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Field | Type | Null | Key | Default | Extra | +--------------------------+-----------------------------------+------+-----+-----------------------+-------+ | Host | char(255) | NO | PRI | | | | User | char(32) | NO | PRI | | | | Select_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Insert_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Update_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Delete_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Create_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | | Drop_priv | enum(&#39;N&#39;,&#39;Y&#39;) | NO | | N | | ... An account may also have authentication credentials such as a password. The credentials are handled by the account authentication plugin. MySQL supports multiple authentication plugins. Some of them use built-in authentication methods, whereas others enable authentication using external authentication methods. mysql&gt; SELECT Host,User FROM mysql.user; +-----------+------------------+ | Host | User | +-----------+------------------+ | % | root | | localhost | mysql.infoschema | | localhost | mysql.session | | localhost | mysql.sys | | localhost | root | +-----------+------------------+ 5 rows in set (0.00 sec) 4.4. Privileges Provided by MySQL The privileges granted to a MySQL account determine which operations the account can perform. MySQL privileges differ in the contexts in which they apply and at different levels of operation: Administrative privileges enable users to manage operation of the MySQL server. These privileges are global because they are not specific to a particular database. Database privileges apply to a database and to all objects within it. These privileges can be granted for specific databases, or globally so that they apply to all databases. Privileges for database objects such as tables, indexes, views, and stored routines can be granted for specific objects within a database, for all objects of a given type within a database (for example, all tables in a database), or globally for all objects of a given type in all databases. 4.5. Grant Tables The mysql system database includes several grant tables that contain information about user accounts and the privileges held by them. However, normally you do not modify the grant tables directly. Modifications occur indirectly when you use account-management statements such as CREATE USER, GRANT, and REVOKE to set up accounts and control the privileges available to each one. When you use such statements to perform account manipulations, the server modifies the grant tables on your behalf. These mysql database tables contain grant information: user: User accounts, static global privileges, and other nonprivilege columns. global_grants: Dynamic global privileges. db: Database-level privileges. tables_priv: Table-level privileges. columns_priv: Column-level privileges. procs_priv: Stored procedure and function privileges. proxies_priv: Proxy-user privileges. default_roles: Default user roles. role_edges: Edges for role subgraphs. password_history: Password change history. To check the privileges for a given account, use the SHOW GRANTS statement. SHOW GRANTS FOR &#39;bob&#39;@&#39;pc84.example.com&#39;; To display nonprivilege properties of an account, use SHOW CREATE USER: SHOW CREATE USER &#39;bob&#39;@&#39;pc84.example.com&#39;; 4.6. Specifying Account Names MySQL account names consist of a user name and a host name, which enables creation of distinct accounts for users with the same user name who connect from different hosts. Account names appear in SQL statements such as CREATE USER, GRANT, and SET PASSWORD and follow these rules: Account name syntax is &#39;user_name&#39;@&#39;host_name&#39;. The @&#39;host_name&#39; part is optional. An account name consisting only of a user name is equivalent to &#39;user_name&#39;@&#39;%&#39;. For example, &#39;me&#39; is equivalent to &#39;me&#39;@&#39;%&#39;. The user name and host name need not be quoted if they are legal as unquoted identifiers. Quotes must be used if a user_name string contains special characters (such as space or -), or a host_name string contains special characters or wildcard characters (such as . or %). For example, in the account name &#39;test-user&#39;@&#39;%.com&#39;, both the user name and host name parts require quotes. Quote user names and host names as identifiers or as strings, using either backticks (`), single quotation marks (&#39;), or double quotation marks (&quot;). The user name and host name parts, if quoted, must be quoted separately. That is, write &#39;me&#39;@&#39;localhost&#39;, not &#39;me@localhost&#39;. The latter is actually equivalent to &#39;me@localhost&#39;@&#39;%&#39;. A reference to the CURRENT_USER or CURRENT_USER() function is equivalent to specifying the current client&#8217;s user name and host name literally. mysql&gt; SELECT CURRENT_USER; +----------------+ | CURRENT_USER | +----------------+ | root@localhost | +----------------+ 1 row in set (0.01 sec) MySQL stores account names in grant tables in the mysql system database using separate columns for the user name and host name parts: The user table contains one row for each account. The User and Host columns store the user name and host name. This table also indicates which global privileges the account has. Other grant tables indicate privileges an account has for databases and objects within databases. These tables have User and Host columns to store the account name. Each row in these tables associates with the account in the user table that has the same User and Host values. For access-checking purposes, comparisons of User values are case-sensitive; comparisons of Host values are not case-sensitive. User names and host names have certain special values or wildcard conventions, as described following. An account with a blank user name is an anonymous user. To specify an anonymous user in SQL statements, use a quoted empty user name part, such as &#39;&#39;@&#39;localhost&#39;. The host name part of an account name can take many forms, and wildcards are permitted: A host value can be a host name or an IP address (IPv4 or IPv6). The name &#39;localhost&#39; indicates the local host. The IP address &#39;127.0.0.1&#39; indicates the IPv4 loopback interface. The IP address &#39;::1&#39; indicates the IPv6 loopback interface. The % and _ wildcard characters are permitted in host name or IP address values. These have the same meaning as for pattern-matching operations performed with the LIKE operator. A host value of &#39;%&#39; matches any host name, whereas a value of &#39;%.mysql.com&#39; matches any host in the mysql.com domain. &#39;198.51.100.%&#39; matches any host in the 198.51.100 class C network. MySQL does not perform matching on host names that start with digits and a dot. For a host value specified as an IPv4 address, a netmask can be given to indicate how many address bits to use for the network number. Netmask notation cannot be used for IPv6 addresses. The syntax is host_ip/netmask. For example: CREATE USER &#39;david&#39;@&#39;198.51.100.0/255.255.255.0&#39;; As of MySQL 8.0.23, a host value specified as an IPv4 address can be written using CIDR notation, such as 198.51.100.44/24. 4.7. Specifying Role Names MySQL role names refer to roles, which are named collections of privileges. Role names have syntax and semantics similar to account names. As stored in the grant tables, they have the same properties as account names. Role names differ from account names in these respects: The user part of role names cannot be blank. Thus, there is no “anonymous role” analogous to the concept of “anonymous user.” As for an account name, omitting the host part of a role name results in a host part of &#39;%&#8216;. But unlike &#8217;%&#39; in an account name, a host part of &#39;%&#39; in a role name has no wildcard properties. For example, for a name &#39;me&#39;@&#39;%&#39; used as a role name, the host part (&#8217;%&#39;`) is just a literal value; it has no “any host” matching property. Netmask notation in the host part of a role name has no significance. An account name is permitted to be CURRENT_USER() in several contexts. A role name is not. 4.8. Access Control, Stage 1: Connection Verification When you attempt to connect to a MySQL server, the server accepts or rejects the connection based on these conditions: Your identity and whether you can verify it by supplying the proper credentials. Whether your account is locked or unlocked. The server checks credentials first, then account locking state. A failure at either step causes the server to deny access to you completely. Otherwise, the server accepts the connection, and then enters Stage 2 and waits for requests. The server performs identity and credentials checking using columns in the user table, accepting the connection only if these conditions are satisfied: The client host name and user name match the Host and User columns in some user table row. The client supplies the credentials specified in the row (for example, a password), as indicated by the authentication_string column. Credentials are interpreted using the authentication plugin named in the plugin column. The row indicates that the account is unlocked. Locking state is recorded in the account_locked column, which must have a value of &#39;N&#39;. Account locking can be set or changed with the CREATE USER or ALTER USER statement. The authentication_string column can be blank. This is not a wildcard and does not mean that any password matches. It means that the user must connect without specifying a password. The authentication method implemented by the plugin that authenticates the client may or may not use the password in the authentication_string column. In this case, it is possible that an external password is also used to authenticate to the MySQL server. From MySQL&#8217;s point of view, the encrypted password is the real password, so you should never give anyone access to it. In particular, do not give nonadministrative users read access to tables in the mysql system database. 4.9. Access Control, Stage 2: Request Verification After the server accepts a connection, it enters Stage 2 of access control. For each request that you issue through the connection, the server determines what operation you want to perform, then checks whether your privileges are sufficient. This is where the privilege columns in the grant tables come into play. These privileges can come from any of the user, global_grants, db, tables_priv, columns_priv, or procs_priv tables. The user and global_grants tables grant global privileges for a given account indicate the account privileges that apply on a global basis no matter what the default database is. It is wise to grant privileges in the user table only to people who need them, such as database administrators. For other users, leave all privileges in the user table set to &#39;N&#39; and grant privileges at more specific levels only (for particular databases, tables, columns, or routines). 4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts To manage MySQL accounts, use the SQL statements intended for that purpose: CREATE USER and DROP USER create and remove accounts. GRANT and REVOKE assign privileges to and revoke privileges from accounts. SHOW GRANTS displays account privilege assignments. 4.10.1. Creating Accounts and Granting Privileges The following example uses CREATE USER and GRANT statements to set up four accounts (where you see &#39;password&#39;, substitute an appropriate password): CREATE USER &#39;finley&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON *.* TO &#39;finley&#39; @&#39;localhost&#39; WITH GRANT OPTION; CREATE USER &#39;finley&#39; @&#39;%.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON *.* TO &#39;finley&#39; @&#39;%.example.com&#39; WITH GRANT OPTION; CREATE USER &#39;admin&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT RELOAD, PROCESS ON *.* TO &#39;admin&#39; @&#39;localhost&#39;; CREATE USER &#39;dummy&#39; @&#39;localhost&#39;; The previous example grants privileges at the global level. The next example creates three accounts and grants them access at lower levels; that is, to specific databases or objects within databases. Each account has a user name of custom, but the host name parts differ: CREATE USER &#39;custom&#39; @&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL ON bankaccount.* TO &#39;custom&#39; @&#39;localhost&#39;; CREATE USER &#39;custom&#39; @&#39;host47.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON expenses.* TO &#39;custom&#39; @&#39;host47.example.com&#39;; CREATE USER &#39;custom&#39; @&#39;%.example.com&#39; IDENTIFIED BY &#39;password&#39;; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON customer.addresses TO &#39;custom&#39; @&#39;%.example.com&#39;; 4.10.2. Checking Account Privileges and Properties mysql&gt; SELECT User,Host FROM mysql.user; +------------------+--------------------+ | User | Host | +------------------+--------------------+ | root | % | | custom | %.example.com | | finley | %.example.com | | custom | host47.example.com | | admin | localhost | | custom | localhost | | dummy | localhost | | finley | localhost | | mysql.infoschema | localhost | | mysql.session | localhost | | mysql.sys | localhost | | root | localhost | +------------------+--------------------+ 12 rows in set (0.00 sec) To see the privileges for an account, use SHOW GRANTS: mysql&gt; SHOW GRANTS FOR &#39;admin&#39;@&#39;localhost&#39;; +-----------------------------------------------------+ | Grants for admin@localhost | +-----------------------------------------------------+ | GRANT RELOAD, PROCESS ON *.* TO `admin`@`localhost` | +-----------------------------------------------------+ 1 row in set (0.00 sec) To see nonprivilege properties for an account, use SHOW CREATE USER: mysql&gt; SHOW CREATE USER &#39;admin&#39;@&#39;localhost&#39;\\G *************************** 1. row *************************** CREATE USER for admin@localhost: CREATE USER `admin`@`localhost` IDENTIFIED WITH &#39;caching_sha2_password&#39; AS &#39;$A$005$d6zqX\\nG\\&#39;S03)B8Ixmrn5EBoH1Fc4MFp5p07e1AIzknBpHaKaHwdaXpB&#39; REQUIRE NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK PASSWORD HISTORY DEFAULT PASSWORD REUSE INTERVAL DEFAULT PASSWORD REQUIRE CURRENT DEFAULT 1 row in set (0.00 sec) 4.10.3. Revoking Account Privileges To revoke account privileges, use the REVOKE statement. Privileges can be revoked at different levels, just as they can be granted at different levels. Revoke global privileges: REVOKE ALL ON *.* FROM &#39;finley&#39;@&#39;%.example.com&#39;; REVOKE RELOAD ON *.* FROM &#39;admin&#39;@&#39;localhost&#39;; Revoke database-level privileges: REVOKE CREATE,DROP ON expenses.* FROM &#39;custom&#39;@&#39;host47.example.com&#39;; Revoke table-level privileges: REVOKE INSERT,UPDATE,DELETE ON customer.addresses FROM &#39;custom&#39;@&#39;%.example.com&#39;; To check the effect of privilege revocation, use SHOW GRANTS: mysql&gt; SHOW GRANTS FOR &#39;admin&#39;@&#39;localhost&#39;; +---------------------------------------------+ | Grants for admin@localhost | +---------------------------------------------+ | GRANT PROCESS ON *.* TO `admin`@`localhost` | +---------------------------------------------+ 4.10.4. Dropping Accounts To remove an account, use the DROP USER statement. For example, to drop some of the accounts created previously: DROP USER &#39;finley&#39;@&#39;localhost&#39;; DROP USER &#39;finley&#39;@&#39;%.example.com&#39;; DROP USER &#39;admin&#39;@&#39;localhost&#39;; DROP USER &#39;dummy&#39;@&#39;localhost&#39;; 4.11. Assigning Account Passwords To assign a password when you create a new account, use CREATE USER and include an IDENTIFIED BY clause: CREATE USER &#39;jeffrey&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; To assign or change a password for an existing account, use the ALTER USER statement with an IDENTIFIED BY clause: ALTER USER &#39;jeffrey&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;; If you are not connected as an anonymous user, you can change your own password without naming your own account literally: ALTER USER USER() IDENTIFIED BY &#39;password&#39;; 4.12. Account Locking MySQL supports locking and unlocking user accounts using the ACCOUNT LOCK and ACCOUNT UNLOCK clauses for the CREATE USER and ALTER USER statements: When used with CREATE USER, these clauses specify the initial locking state for a new account. In the absence of either clause, the account is created in an unlocked state. When used with ALTER USER, these clauses specify the new locking state for an existing account. In the absence of either clause, the account locking state remains unchanged. Account locking state is recorded in the account_locked column of the mysql.user system table. The output from SHOW CREATE USER indicates whether an account is locked or unlocked. If a client attempts to connect to a locked account, the attempt fails. The server increments the Locked_connects status variable that indicates the number of attempts to connect to a locked account, returns an ER_ACCOUNT_HAS_BEEN_LOCKED error, and writes a message to the error log: Access denied for user &#39;user_name&#39;@&#39;host_name&#39;. Account is locked. mysql&gt; CREATE USER test@localhost IDENTIFIED BY &#39;pwd&#39;; Query OK, 0 rows affected (0.02 sec) mysql&gt; GRANT ALL ON test.* TO test@localhost; Query OK, 0 rows affected, 1 warning (0.01 sec) mysql&gt; SHOW WARNINGS; +---------+------+--------------------------------------------------------------------------------------------------------------+ | Level | Code | Message | +---------+------+--------------------------------------------------------------------------------------------------------------+ | Warning | 1285 | MySQL is started in --skip-name-resolve mode; you must restart it without this switch for this grant to work | +---------+------+--------------------------------------------------------------------------------------------------------------+ 1 row in set (0.01 sec) mysql&gt; ALTER USER test@localhost ACCOUNT LOCK; Query OK, 0 rows affected (0.01 sec) mysql&gt; SELECT User,Host,account_locked FROM mysql.user WHERE User=&#39;test&#39;; +------+-----------+----------------+ | User | Host | account_locked | +------+-----------+----------------+ | test | localhost | Y | +------+-----------+----------------+ 1 row in set (0.00 sec) $ docker exec -it mysql8 mysql -u test -p Enter password: ERROR 3118 (HY000): Access denied for user &#39;test&#39;@&#39;localhost&#39;. Account is locked. mysql&gt; DROP USER test@localhost; Query OK, 0 rows affected (0.01 sec) 5. Backup and Recovery It is important to back up your databases so that you can recover your data and be up and running again in case problems occur, such as system crashes, hardware failures, or users deleting data by mistake. Backups are also essential as a safeguard before upgrading a MySQL installation, and they can be used to transfer a MySQL installation to another system or to set up replica servers. 5.1. Using mysqldump for Backups mysqldump produces two types of output, depending on whether the --tab option is given: Without --tab, mysqldump writes SQL statements to the standard output. This output consists of CREATE statements to create dumped objects (databases, tables, stored routines, and so forth), and INSERT statements to load data into tables. The output can be saved in a file and reloaded later using mysql to recreate the dumped objects. Options are available to modify the format of the SQL statements, and to control which objects are dumped. With --tab, mysqldump produces two output files for each dumped table. The server writes one file as tab-delimited text, one line per table row. This file is named tbl_name.txt in the output directory. The server also sends a CREATE TABLE statement for the table to mysqldump, which writes it as a file named tbl_name.sql in the output directory. 5.1.1. Dumping Data in SQL Format with mysqldump By default, mysqldump writes information as SQL statements to the standard output. You can save the output in a file: $ mysqldump [arguments] &gt; file_name To dump all databases, invoke mysqldump with the --all-databases option: $ mysqldump --all-databases &gt; dump.sql To dump only specific databases, name them on the command line and use the --databases option: $ mysqldump --databases db1 db2 db3 &gt; dump.sql The --databases option causes all names on the command line to be treated as database names. Without this option, mysqldump treats the first name as a database name and those following as table names. With --all-databases or --databases, mysqldump writes CREATE DATABASE and USE statements prior to the dump output for each database. This ensures that when the dump file is reloaded, it creates each database if it does not exist and makes it the default database so database contents are loaded into the same database from which they came. If you want to cause the dump file to force a drop of each database before recreating it, use the --add-drop-database option as well. In this case, mysqldump writes a DROP DATABASE statement preceding each CREATE DATABASE statement. To dump a single database, name it on the command line: $&gt; mysqldump --databases test &gt; dump.sql In the single-database case, it is permissible to omit the --databases option: $&gt; mysqldump test &gt; dump.sql The difference between the two preceding commands is that without --databases, the dump output contains no CREATE DATABASE or USE statements. To dump only specific tables from a database, name them on the command line following the database name: $&gt; mysqldump test t1 t3 t7 &gt; dump.sql $ docker exec -it mysql8 sh -c &quot;mysqldump -u root -p --databases test &gt; /tmp/test.sql&quot; Enter password: $ docker exec -it mysql8 cat /tmp/test.sql -- MySQL dump 10.13 Distrib 8.0.27, for Linux (x86_64) -- -- Host: localhost Database: test -- ------------------------------------------------------ -- Server version 8.0.27 ... -- Dump completed on 2021-12-30 8:07:50 5.1.2. Reloading SQL-Format Backups To reload a dump file written by mysqldump that consists of SQL statements, use it as input to the mysql client. If the dump file was created by mysqldump with the --all-databases or --databases option, it contains CREATE DATABASE and USE statements and it is not necessary to specify a default database into which to load the data: $ mysql &lt; dump.sql Alternatively, from within mysql, use a source command: mysql&gt; source dump.sql If the file is a single-database dump not containing CREATE DATABASE and USE statements, create the database first (if necessary): $ mysqladmin create db1 Then specify the database name when you load the dump file: $ mysql db1 &lt; dump.sql Alternatively, from within mysql, create the database, select it as the default database, and load the dump file: mysql&gt; CREATE DATABASE IF NOT EXISTS db1; mysql&gt; USE db1; mysql&gt; source dump.sql 6. The InnoDB Storage Engine 7. References https://hub.docker.com/_/mysql https://dev.mysql.com/doc/refman/8.0/en/","headline":"What is MySQL?","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.codefarm.me/2021/12/29/what-is-mysql/"},"url":"https://blog.codefarm.me/2021/12/29/what-is-mysql/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/style.css"><!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SN88FJ18E5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-SN88FJ18E5');
    </script></head>
  <body>
    <header class="c-header">
  <div class="o-container">
    <a class="c-header-title" href="/">CODE FARM</a>
    <button class="c-header-nav-toggle" id="nav-toggle" aria-label="Toggle navigation">
      <span class="c-header-nav-toggle-icon"></span>
    </button>
    <div class="c-header-nav-wrapper" id="nav-wrapper">
      <nav class="c-header-nav">
        <a href="/">Home</a>
        <a href="/categories/">Category</a>
        <a href="/tags/">Tag</a>
        <a href="/archives/">Archive</a>
        <a href="/about/">About</a>
        <a href="https://resume.github.io/?looogos" target="_blank">R&eacute;sum&eacute;</a>
      </nav>
    </div>
  </div>
  



<div class="o-container">
  <div class="c-banner">
    <img src="/assets/images/galaxy.svg" alt="Galaxy background" class="c-banner-bg">
    <div class="c-banner-quote">
      <p>"The Renaissance was a time when art, science, and philosophy flourished."</p>
      <cite>- Michelangelo</cite>
    </div>
  </div>
</div>
</header>

    <main class="o-container">
      <article class="c-post">
  <header class="c-post-header">
    <h1 class="c-post-title">What is MySQL?</h1><p class="c-post-meta">29 Dec 2021</p>
  </header>

  <div class="c-post-content">
    <div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#deploying-mysql-on-linux-with-docker">1. Deploying MySQL on Linux with Docker</a>
<ul class="sectlevel2">
<li><a href="#starting-a-mysql-server-instance">1.1. Starting a MySQL Server Instance</a></li>
<li><a href="#using-a-custom-mysql-configuration-file">1.2. Using a custom MySQL configuration file</a></li>
<li><a href="#creating-database-dumps">1.3. Creating database dumps</a></li>
<li><a href="#restoring-data-from-dump-files">1.4. Restoring data from dump files</a></li>
<li><a href="#connecting-to-and-disconnecting-from-the-server">1.5. Connecting to and Disconnecting from the Server</a></li>
</ul>
</li>
<li><a href="#entering-queries">2. Entering Queries</a></li>
<li><a href="#creating-and-using-a-database">3. Creating and Using a Database</a>
<ul class="sectlevel2">
<li><a href="#creating-and-selecting-a-database">3.1. Creating and Selecting a Database</a></li>
<li><a href="#creating-a-table">3.2. Creating a Table</a></li>
<li><a href="#loading-data-into-a-table">3.3. Loading Data into a Table</a></li>
<li><a href="#retrieving-information-from-a-table">3.4. Retrieving Information from a Table</a></li>
</ul>
</li>
<li><a href="#security">4. Security</a>
<ul class="sectlevel2">
<li><a href="#security-guidelines">4.1. Security Guidelines</a></li>
<li><a href="#access-control-and-account-management">4.2. Access Control and Account Management</a></li>
<li><a href="#account-user-names-and-passwords">4.3. Account User Names and Passwords</a></li>
<li><a href="#privileges-provided-by-mysql">4.4. Privileges Provided by MySQL</a></li>
<li><a href="#grant-tables">4.5. Grant Tables</a></li>
<li><a href="#specifying-account-names">4.6. Specifying Account Names</a></li>
<li><a href="#specifying-role-names">4.7. Specifying Role Names</a></li>
<li><a href="#access-control-stage-1-connection-verification">4.8. Access Control, Stage 1: Connection Verification</a></li>
<li><a href="#access-control-stage-2-request-verification">4.9. Access Control, Stage 2: Request Verification</a></li>
<li><a href="#adding-accounts-assigning-privileges-and-dropping-accounts">4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts</a>
<ul class="sectlevel3">
<li><a href="#creating-accounts-and-granting-privileges">4.10.1. Creating Accounts and Granting Privileges</a></li>
<li><a href="#checking-account-privileges-and-properties">4.10.2. Checking Account Privileges and Properties</a></li>
<li><a href="#revoking-account-privileges">4.10.3. Revoking Account Privileges</a></li>
<li><a href="#dropping-accounts">4.10.4. Dropping Accounts</a></li>
</ul>
</li>
<li><a href="#assigning-account-passwords">4.11. Assigning Account Passwords</a></li>
<li><a href="#account-locking">4.12. Account Locking</a></li>
</ul>
</li>
<li><a href="#backup-and-recovery">5. Backup and Recovery</a>
<ul class="sectlevel2">
<li><a href="#using-mysqldump-for-backups">5.1. Using mysqldump for Backups</a>
<ul class="sectlevel3">
<li><a href="#dumping-data-in-sql-format-with-mysqldump">5.1.1. Dumping Data in SQL Format with mysqldump</a></li>
<li><a href="#reloading-sql-format-backups">5.1.2. Reloading SQL-Format Backups</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#the-innodb-storage-engine">6. The InnoDB Storage Engine</a></li>
<li><a href="#references">7. References</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="deploying-mysql-on-linux-with-docker">1. Deploying MySQL on Linux with Docker</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="starting-a-mysql-server-instance">1.1. Starting a MySQL Server Instance</h3>
<div class="paragraph">
<p>To start a new Docker container for a MySQL Server, use the following command:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>docker run --name=container_name [--restart on-failure] -d -e MYSQL_RANDOM_ROOT_PASSWORD=yes [-e MYSQL_ONETIME_PASSWORD=yes] image_name:tag</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker run <span class="nt">--name</span> mysql8 <span class="nt">-d</span> <span class="nt">-e</span> <span class="nv">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="o">=</span><span class="nb">yes </span>mysql:8
<span class="go">b4b86043b5562bb9069d82a663e2beae7fb417d6c3a005ade1a9b48ced6048f5

</span><span class="gp">$</span><span class="w"> </span>docker logs mysql8 2&gt;&amp;1 | <span class="nb">grep </span>GENERATED
<span class="go">2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker logs mysql8
<span class="go">2021-12-29 08:21:58+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.</span>
<span class="go">2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'</span>
<span class="go">2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.</span>
<span class="go">2021-12-29 08:21:59+00:00 [Note] [Entrypoint]: Initializing database files</span>
<span class="c">...</span>
<span class="go">2021-12-29 08:22:05+00:00 [Note] [Entrypoint]: Starting temporary server</span>
<span class="c">...</span>
<span class="hll"><span class="go">2021-12-29 08:22:09+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: aetheQuihaichoReiziejeey3Echoovi</span>
</span><span class="c">...</span>

<span class="go">2021-12-29 08:22:11+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up.</span>

<span class="go">2021-12-29T08:22:12.185059Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.27) starting as process 1</span>
<span class="go">2021-12-29T08:22:12.193270Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.</span>

<span class="go">2021-12-29T08:22:12.948002Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.27'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server - GPL.</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-a-custom-mysql-configuration-file">1.2. Using a custom MySQL configuration file</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">docker run <span class="se">\</span>
    <span class="nt">--name</span> some-mysql <span class="se">\</span>
    <span class="nt">-v</span> /my/custom:/etc/mysql/conf.d <span class="se">\ </span><i class="conum" data-value="1"></i><b>(1)</b>
    <span class="nt">-v</span> /my/own/datadir:/var/lib/mysql <span class="se">\ </span><i class="conum" data-value="2"></i><b>(2)</b>
    <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>my-secret-pw <span class="se">\</span>
    <span class="nt">-d</span> <span class="se">\</span>
    mysql:tag</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The default configuration for MySQL can be found in <code>/etc/mysql/my.cnf</code>, which may <code>!includedir</code> additional directories such as <code>/etc/mysql/conf.d</code> or <code>/etc/mysql/mysql.conf.d</code>.
<div class="paragraph">
<p>If <code>/my/custom/config-file.cnf</code> is the path and name of your custom configuration file, you can start your mysql container like this (note that only the directory path of the custom config file is used in this command):</p>
</div>
<div class="paragraph">
<p>This will start a new container <code>some-mysql</code> where the MySQL instance uses the combined startup settings from <code>/etc/mysql/my.cnf</code> and <code>/etc/mysql/conf.d/config-file.cnf</code>, with settings from the latter taking precedence.</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>-v /my/own/datadir:/var/lib/mysql</code> part of the command mounts the <code>/my/own/datadir</code> directory from the underlying host system as <code>/var/lib/mysql</code> inside the container, where MySQL by default will write its data files.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="creating-database-dumps">1.3. Creating database dumps</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">docker <span class="nb">exec </span>some-mysql <span class="se">\</span>
    sh <span class="nt">-c</span> <span class="s1">'exec mysqldump --all-databases -uroot -p"$MYSQL_ROOT_PASSWORD"'</span> <span class="o">&gt;</span> /some/path/on/your/host/all-databases.sql</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="restoring-data-from-dump-files">1.4. Restoring data from dump files</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">docker <span class="nb">exec</span> <span class="nt">-i</span> some-mysql <span class="se">\</span>
    sh <span class="nt">-c</span> <span class="s1">'exec mysql -uroot -p"$MYSQL_ROOT_PASSWORD"'</span> &lt; /some/path/on/your/host/all-databases.sql</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="connecting-to-and-disconnecting-from-the-server">1.5. Connecting to and Disconnecting from the Server</h3>
<div class="paragraph">
<p>To connect to the server, you usually need to provide a MySQL user name when you invoke mysql and, most likely, a password. If the server runs on a machine other than the one where you log in, you must also specify a host name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="o">&gt;</span> mysql <span class="nt">-h</span> host <span class="nt">-u</span> user <span class="nt">-p</span>
<span class="go">Enter password: ********</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>host</code> and <code>user</code> represent the host name where your MySQL server is running and the user name of your MySQL account. Substitute appropriate values for your setup. The ******** represents your password; enter it when mysql displays the Enter password: prompt.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 mysql <span class="nt">-u</span> root <span class="nt">-p</span>
<span class="go">Enter password:
</span><span class="gp">Welcome to the MySQL monitor.  Commands end with ;</span><span class="w"> </span>or <span class="se">\g</span><span class="nb">.</span>
<span class="go">Your MySQL connection id is 9
Server version: 8.0.27 MySQL Community Server - GPL

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

</span><span class="gp">Type 'help;</span><span class="s1">' or '</span><span class="se">\h</span><span class="s1">' for help. Type '</span><span class="se">\c</span><span class="s1">' to clear the current input statement.
</span><span class="go">
</span><span class="gp">mysql&gt;</span><span class="w"> </span><span class="se">\q</span>
<span class="go">Bye</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="entering-queries">2. Entering Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is a simple query that asks the server to tell you its version number and the current date. Type it in as shown here following the <code>mysql&gt;</code> prompt and press Enter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 mysql <span class="nt">-u</span> root <span class="nt">-p</span>
<span class="go">Enter password:
</span><span class="gp">Welcome to the MySQL monitor.  Commands end with ;</span><span class="w"> </span>or <span class="se">\g</span><span class="nb">.</span>
<span class="go">Your MySQL connection id is 10
Server version: 8.0.27 MySQL Community Server - GPL

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

</span><span class="gp">Type 'help;</span><span class="s1">' or '</span><span class="se">\h</span><span class="s1">' for help. Type '</span><span class="se">\c</span><span class="s1">' to clear the current input statement.
</span><span class="go">
</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT VERSION<span class="o">()</span>, CURRENT_DATE<span class="p">;</span>
<span class="go">+-----------+--------------+
| VERSION() | CURRENT_DATE |
+-----------+--------------+
| 8.0.27    | 2021-12-29   |
+-----------+--------------+
1 row in set (0.00 sec)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This query illustrates several things about mysql:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A query normally consists of an SQL statement followed by a semicolon.</p>
</li>
<li>
<p>When you issue a query, mysql sends it to the server for execution and displays the results, then prints another <code>mysql&gt;</code> prompt to indicate that it is ready for another query.</p>
</li>
<li>
<p>mysql displays query output in tabular form (rows and columns).</p>
<div class="paragraph">
<p>The first row contains labels for the columns.</p>
</div>
<div class="paragraph">
<p>The rows following are the query results.</p>
</div>
</li>
<li>
<p>mysql shows how many rows were returned and how long the query took to execute, which gives you a rough idea of server performance.</p>
<div class="paragraph">
<p>These values are imprecise because they represent wall clock time (not CPU or machine time), and because they are affected by factors such as server load and network latency.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Keywords may be entered in any lettercase. The following queries are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT VERSION<span class="o">()</span>, CURRENT_DATE<span class="p">;</span>
<span class="gp">mysql&gt;</span><span class="w"> </span><span class="k">select </span>version<span class="o">()</span>, current_date<span class="p">;</span>
<span class="gp">mysql&gt;</span><span class="w"> </span>SeLeCt vErSiOn<span class="o">()</span>, current_DATE<span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is another query. It demonstrates that you can use mysql as a simple calculator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT SIN<span class="o">(</span>PI<span class="o">()</span>/4<span class="o">)</span>, <span class="o">(</span>4+1<span class="o">)</span><span class="k">*</span>5<span class="p">;</span>
<span class="go">+-------------------------+---------+
| SIN(PI()/4)             | (4+1)*5 |
+-------------------------+---------+
|      0.7071067811865475 |      25 |
+-------------------------+---------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can even enter multiple statements on a single line. Just end each one with a semicolon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT VERSION<span class="o">()</span><span class="p">;</span> SELECT NOW<span class="o">()</span><span class="p">;</span>
<span class="go">+-----------+
| VERSION() |
+-----------+
| 8.0.27    |
+-----------+
1 row in set (0.00 sec)

+---------------------+
| NOW()               |
+---------------------+
| 2021-12-29 09:18:28 |
+---------------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a simple multiple-line statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT
<span class="gp">    -&gt;</span><span class="w"> </span>USER<span class="o">()</span>
<span class="gp">    -&gt;</span><span class="w"> </span>,
<span class="gp">    -&gt;</span><span class="w"> </span>CURRENT_DATE
<span class="gp">    -&gt;</span><span class="w"> </span><span class="p">;</span>
<span class="go">+----------------+----------------+
| USER()         | CURRENT_DATE   |
+----------------+----------------+
| root@localhost | 2021-12-29     |
+----------------+----------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-and-using-a-database">3. Creating and Using a Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the <code>SHOW</code> statement to find out what databases currently exist on the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW DATABASES<span class="p">;</span>
<span class="go">+------------------------------------------------------------------+
| Database                                                         |
+------------------------------------------------------------------+
| information_schema                                               |
| mysql                                                            |
| performance_schema                                               |
| sys                                                              |
+------------------------------------------------------------------+
4 rows in set (0.01 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The list of databases displayed by the statement may be different on your machine; <code>SHOW DATABASES</code> does not show databases that you have no privileges for if you do not have the <code>SHOW DATABASES</code> privilege.</p>
</div>
<div class="sect2">
<h3 id="creating-and-selecting-a-database">3.1. Creating and Selecting a Database</h3>
<div class="paragraph">
<p>If the administrator creates your database for you when setting up your permissions, you can begin using it. Otherwise, you need to create it yourself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>CREATE DATABASE <span class="nb">test</span><span class="p">;</span>
<span class="go">Query OK, 1 row affected (0.02 sec)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Under Unix, database names are case-sensitive (unlike SQL keywords), so you must always refer to your database as test, not as Test, TEST, or some other variant. This is also true for table names.</p>
</div>
<div class="paragraph">
<p>Creating a database does not select it for use; you must do that explicitly. To make menagerie the current database, use this statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT DATABASE<span class="o">()</span><span class="p">;</span>
<span class="go">+------------------------------------+
| DATABASE()                         |
+------------------------------------+
| NULL                               |
+------------------------------------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>USE <span class="nb">test</span>
<span class="go">Database changed

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT DATABASE<span class="o">()</span><span class="p">;</span>
<span class="go">+------------------------------------+
| DATABASE()                         |
+------------------------------------+
| test                               |
+------------------------------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Your database needs to be created only once, but you must select it for use each time you begin a mysql session. You can do this by issuing a <code>USE</code> statement as shown in the example. Alternatively, you can select the database on the command line when you invoke mysql. Just specify its name after any connection parameters that you might need to provide. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 mysql <span class="nt">-u</span> root <span class="nt">-p</span> <span class="nb">test</span>
<span class="go">Enter password:
</span><span class="c">...
</span><span class="gp">Type 'help;</span><span class="s1">' or '</span><span class="se">\h</span><span class="s1">' for help. Type '</span><span class="se">\c</span><span class="s1">' to clear the current input statement.
</span><span class="go">
</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT DATABASE<span class="o">()</span><span class="p">;</span>
<span class="go">+------------+
| DATABASE() |
+------------+
| test       |
+------------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-table">3.2. Creating a Table</h3>
<div class="paragraph">
<p>Creating the database is the easy part, but at this point it is empty, as <code>SHOW TABLES</code> tells you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW TABLES<span class="p">;</span>
<span class="go">Empty set (0.01 sec)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use a <code>CREATE TABLE</code> statement to specify the layout of your table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>CREATE TABLE pet <span class="o">(</span>
<span class="gp">    -&gt;</span><span class="w">     </span>name VARCHAR<span class="o">(</span>20<span class="o">)</span>,
<span class="gp">    -&gt;</span><span class="w">     </span>owner VARCHAR<span class="o">(</span>20<span class="o">)</span>,
<span class="gp">    -&gt;</span><span class="w">     </span>species VARCHAR<span class="o">(</span>20<span class="o">)</span>,
<span class="gp">    -&gt;</span><span class="w">     </span>sex CHAR<span class="o">(</span>1<span class="o">)</span>,
<span class="gp">    -&gt;</span><span class="w">     </span>birth DATE,
<span class="gp">    -&gt;</span><span class="w">     </span>death DATE
<span class="gp">    -&gt;</span><span class="w"> </span><span class="o">)</span><span class="p">;</span>
<span class="go">Query OK, 0 rows affected (0.03 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you make a poor choice and it turns out later that you need a longer field, MySQL provides an <code>ALTER TABLE</code> statement.</p>
</div>
<div class="paragraph">
<p>Once you have created a table, <code>SHOW TABLES</code> should produce some output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW TABLES<span class="p">;</span>
<span class="go">+----------------+
| Tables_in_test |
+----------------+
| pet            |
+----------------+
1 row in set (0.01 sec)
</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW TABLES IN <span class="nb">test</span><span class="p">;</span>
<span class="go">+----------------+
| Tables_in_test |
+----------------+
| pet            |
+----------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To verify that your table was created the way you expected, use a <code>DESCRIBE</code> statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>DESCRIBE pet<span class="p">;</span>
<span class="go">+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| name    | varchar(20) | YES  |     | NULL    |       |
| owner   | varchar(20) | YES  |     | NULL    |       |
| species | varchar(20) | YES  |     | NULL    |       |
| sex     | char(1)     | YES  |     | NULL    |       |
| birth   | date        | YES  |     | NULL    |       |
| death   | date        | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
6 rows in set (0.07 sec)
</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loading-data-into-a-table">3.3. Loading Data into a Table</h3>
<div class="paragraph">
<p>After creating your table, you need to populate it. The <code>LOAD DATA</code> and <code>INSERT</code> statements are useful for this.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">owner</th>
<th class="tableblock halign-left valign-top">species</th>
<th class="tableblock halign-left valign-top">sex</th>
<th class="tableblock halign-left valign-top">birth</th>
<th class="tableblock halign-left valign-top">death</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fluffy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Harold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1993-02-04</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Claws</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gwen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cat</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1994-03-17</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buffy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Harold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1989-05-13</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1990-08-27</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bowser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1979-08-31</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1995-07-29</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chirpy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gwen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bird</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">f</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1998-09-11</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whistler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gwen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bird</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997-12-09</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slim</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benny</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">snake</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1996-04-29</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You could create a text file <code>pet.txt</code> containing one record per line, with values separated by tabs, and given in the order in which the columns were listed in the <code>CREATE TABLE</code> statement. For missing values (such as unknown sexes or death dates for animals that are still living), you can use <code>NULL</code> values. To represent these in your text file, use <code>\N</code> (backslash, capital-N). For example, the record for Whistler the bird would look like this (where the whitespace between values is a single tab character):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">Whistler        Gwen    bird    \N      1997-12-09      \N</code></pre>
</div>
</div>
<div class="paragraph">
<p>To load the text file <code>pet.txt</code> into the pet table, use this statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>LOAD DATA LOCAL INFILE <span class="s1">'/path/pet.txt'</span> INTO TABLE pet<span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When you want to add new records one at a time, the <code>INSERT</code> statement is useful. In its simplest form, you supply values for each column, in the order in which the columns were listed in the <code>CREATE TABLE</code> statement. Suppose that Diane gets a new hamster named “Puffball.” You could add a new record using an <code>INSERT</code> statement like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>INSERT INTO pet
<span class="gp">    -&gt;</span><span class="w"> </span>VALUES <span class="o">(</span>
<span class="gp">    -&gt;</span><span class="w">         </span><span class="s1">'Puffball'</span>,
<span class="gp">    -&gt;</span><span class="w">         </span><span class="s1">'Diane'</span>,
<span class="gp">    -&gt;</span><span class="w">         </span><span class="s1">'hamster'</span>,
<span class="gp">    -&gt;</span><span class="w">         </span><span class="s1">'f'</span>,
<span class="gp">    -&gt;</span><span class="w">         </span><span class="s1">'1999-03-30'</span>,
<span class="gp">    -&gt;</span><span class="w">         </span>NULL
<span class="gp">    -&gt;</span><span class="w">     </span><span class="o">)</span><span class="p">;</span>
<span class="go">Query OK, 1 row affected (0.03 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>String and date values are specified as quoted strings here. Also, with <code>INSERT</code>, you can insert <code>NULL</code> directly to represent a missing value. You do not use <code>\N</code> like you do with <code>LOAD DATA</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="retrieving-information-from-a-table">3.4. Retrieving Information from a Table</h3>
<div class="ulist">
<ul>
<li>
<p>Selecting All Data</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet<span class="p">;</span>
<span class="go">+----------+--------+---------+------+------------+------------+
| name     | owner  | species | sex  | birth      | death      |
+----------+--------+---------+------+------------+------------+
| Puffball | Diane  | hamster | f    | 1999-03-30 | NULL       |
| Fluffy   | Harold | cat     | f    | 1993-02-04 | NULL       |
| Claws    | Gwen   | cat     | m    | 1994-03-17 | NULL       |
| Buffy    | Harold | dog     | f    | 1989-05-13 | NULL       |
| Fang     | Benny  | dog     | m    | 1990-08-27 | NULL       |
| Bowser   | Diane  | dog     | m    | 1979-08-31 | 1995-07-29 |
| Chirpy   | Gwen   | bird    | f    | 1998-09-11 | NULL       |
| Whistler | Gwen   | bird    | NULL | 1997-12-09 | NULL       |
| Slim     | Benny  | snake   | m    | 1996-04-29 | NULL       |
+----------+--------+---------+------+------------+------------+
9 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Selecting Particular Rows</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE <span class="nv">name</span><span class="o">=</span><span class="s1">'Browser'</span><span class="p">;</span>
<span class="go">Empty set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE <span class="nv">name</span><span class="o">=</span><span class="s1">'Bowser'</span><span class="p">;</span>
<span class="go">+--------+-------+---------+------+------------+------------+
| name   | owner | species | sex  | birth      | death      |
+--------+-------+---------+------+------------+------------+
| Bowser | Diane | dog     | m    | 1979-08-31 | 1995-07-29 |
+--------+-------+---------+------+------------+------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Selecting Particular Columns</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT name,birth FROM pet<span class="p">;</span>
<span class="go">+----------+------------+
| name     | birth      |
+----------+------------+
| Puffball | 1999-03-30 |
| Fluffy   | 1993-02-04 |
| Claws    | 1994-03-17 |
| Buffy    | 1989-05-13 |
| Fang     | 1990-08-27 |
| Bowser   | 1979-08-31 |
| Chirpy   | 1998-09-11 |
| Whistler | 1997-12-09 |
| Slim     | 1996-04-29 |
+----------+------------+
9 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Sorting Rows</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT name,birth FROM pet ORDER BY birth<span class="p">;</span>
<span class="go">+----------+------------+
| name     | birth      |
+----------+------------+
| Bowser   | 1979-08-31 |
| Buffy    | 1989-05-13 |
| Fang     | 1990-08-27 |
| Fluffy   | 1993-02-04 |
| Claws    | 1994-03-17 |
| Slim     | 1996-04-29 |
| Whistler | 1997-12-09 |
| Chirpy   | 1998-09-11 |
| Puffball | 1999-03-30 |
+----------+------------+
9 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Date Calculations</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT name,
<span class="gp">    -&gt;</span><span class="w">     </span>birth,
<span class="gp">    -&gt;</span><span class="w">     </span>CURDATE<span class="o">()</span>,
<span class="gp">    -&gt;</span><span class="w">     </span>TIMESTAMPDIFF<span class="o">(</span>YEAR, birth, CURDATE<span class="o">())</span> AS age
<span class="gp">    -&gt;</span><span class="w"> </span>FROM pet<span class="p">;</span>
<span class="go">+----------+------------+------------+------+
| name     | birth      | CURDATE()  | age  |
+----------+------------+------------+------+
| Puffball | 1999-03-30 | 2021-12-29 |   22 |
| Fluffy   | 1993-02-04 | 2021-12-29 |   28 |
| Claws    | 1994-03-17 | 2021-12-29 |   27 |
| Buffy    | 1989-05-13 | 2021-12-29 |   32 |
| Fang     | 1990-08-27 | 2021-12-29 |   31 |
| Bowser   | 1979-08-31 | 2021-12-29 |   42 |
| Chirpy   | 1998-09-11 | 2021-12-29 |   23 |
| Whistler | 1997-12-09 | 2021-12-29 |   24 |
| Slim     | 1996-04-29 | 2021-12-29 |   25 |
+----------+------------+------------+------+
9 rows in set (0.01 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT name,
<span class="gp">    -&gt;</span><span class="w">     </span>birth,
<span class="gp">    -&gt;</span><span class="w">     </span>death,
<span class="gp">    -&gt;</span><span class="w">     </span>TIMESTAMPDIFF<span class="o">(</span>YEAR, birth, death<span class="o">)</span> AS age
<span class="gp">    -&gt;</span><span class="w"> </span>FROM pet
<span class="gp">    -&gt;</span><span class="w"> </span>WHERE death IS NOT NULL
<span class="gp">    -&gt;</span><span class="w"> </span>ORDER BY age<span class="p">;</span>
<span class="go">+--------+------------+------------+------+
| name   | birth      | death      | age  |
+--------+------------+------------+------+
| Bowser | 1979-08-31 | 1995-07-29 |   15 |
+--------+------------+------------+------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT name, birth, MONTH<span class="o">(</span>birth<span class="o">)</span> FROM pet<span class="p">;</span>
<span class="go">+----------+------------+--------------+
| name     | birth      | MONTH(birth) |
+----------+------------+--------------+
| Puffball | 1999-03-30 |            3 |
| Fluffy   | 1993-02-04 |            2 |
| Claws    | 1994-03-17 |            3 |
| Buffy    | 1989-05-13 |            5 |
| Fang     | 1990-08-27 |            8 |
| Bowser   | 1979-08-31 |            8 |
| Chirpy   | 1998-09-11 |            9 |
| Whistler | 1997-12-09 |           12 |
| Slim     | 1996-04-29 |            4 |
+----------+------------+--------------+
9 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w">  </span>SELECT <span class="s1">'2018-10-31'</span> + INTERVAL 1 DAY<span class="p">;</span>
<span class="go">+-------------------------------+
| '2018-10-31' + INTERVAL 1 DAY |
+-------------------------------+
| 2018-11-01                    |
+-------------------------------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="s1">'2018-10-32'</span> + INTERVAL 1 DAY<span class="p">;</span>
<span class="go">+-------------------------------+
| '2018-10-32' + INTERVAL 1 DAY |
+-------------------------------+
| NULL                          |
+-------------------------------+
1 row in set, 1 warning (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW WARNINGS<span class="p">;</span>
<span class="go">+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1292 | Incorrect datetime value: '2018-10-32' |
+---------+------+----------------------------------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Working with NULL Values</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT 1 IS NULL, 1 IS NOT NULL<span class="p">;</span>
<span class="go">+-----------+---------------+
| 1 IS NULL | 1 IS NOT NULL |
+-----------+---------------+
|         0 |             1 |
+-----------+---------------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT 1 <span class="o">=</span> NULL, 1 &lt;<span class="o">&gt;</span> NULL, 1 &lt; NULL, 1 <span class="o">&gt;</span> NULL<span class="p">;</span>
<span class="go">+----------+-----------+----------+----------+
</span><span class="gp">| 1 = NULL | 1 &lt;&gt;</span><span class="w"> </span>NULL | 1 &lt; NULL | 1 <span class="o">&gt;</span> NULL |
<span class="go">+----------+-----------+----------+----------+
|     NULL |      NULL |     NULL |     NULL |
+----------+-----------+----------+----------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT 0 IS NULL, 0 IS NOT NULL, <span class="s1">''</span> IS NULL, <span class="s1">''</span> IS NOT NULL<span class="p">;</span>
<span class="go">+-----------+---------------+------------+----------------+
| 0 IS NULL | 0 IS NOT NULL | '' IS NULL | '' IS NOT NULL |
+-----------+---------------+------------+----------------+
|         0 |             1 |          0 |              1 |
+-----------+---------------+------------+----------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Pattern Matching</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE name LIKE <span class="s1">'b%'</span><span class="p">;</span>
<span class="go">+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1979-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+
2 rows in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE name LIKE <span class="s1">'%fy'</span><span class="p">;</span>
<span class="go">+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+
2 rows in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE name LIKE <span class="s1">'%w%'</span><span class="p">;</span>
<span class="go">+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1979-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+
3 rows in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE name LIKE <span class="s1">'_____'</span><span class="p">;</span>
<span class="go">+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
2 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE REGEXP_LIKE<span class="o">(</span>name, <span class="s1">'^b'</span><span class="o">)</span><span class="p">;</span>
<span class="go">+--------+--------+---------+------+------------+------------+
| name   | owner  | species | sex  | birth      | death      |
+--------+--------+---------+------+------------+------------+
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL       |
| Bowser | Diane  | dog     | m    | 1979-08-31 | 1995-07-29 |
+--------+--------+---------+------+------------+------------+
2 rows in set (0.01 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE REGEXP_LIKE<span class="o">(</span>name, <span class="s1">'fy$'</span><span class="o">)</span><span class="p">;</span>
<span class="go">+--------+--------+---------+------+------------+-------+
| name   | owner  | species | sex  | birth      | death |
+--------+--------+---------+------+------------+-------+
| Fluffy | Harold | cat     | f    | 1993-02-04 | NULL  |
| Buffy  | Harold | dog     | f    | 1989-05-13 | NULL  |
+--------+--------+---------+------+------------+-------+
2 rows in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE REGEXP_LIKE<span class="o">(</span>name, <span class="s1">'w'</span><span class="o">)</span><span class="p">;</span>
<span class="go">+----------+-------+---------+------+------------+------------+
| name     | owner | species | sex  | birth      | death      |
+----------+-------+---------+------+------------+------------+
| Claws    | Gwen  | cat     | m    | 1994-03-17 | NULL       |
| Bowser   | Diane | dog     | m    | 1979-08-31 | 1995-07-29 |
| Whistler | Gwen  | bird    | NULL | 1997-12-09 | NULL       |
+----------+-------+---------+------+------------+------------+
3 rows in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE REGEXP_LIKE<span class="o">(</span>name, <span class="s1">'^.....$'</span><span class="o">)</span><span class="p">;</span>
<span class="go">+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
2 rows in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT <span class="k">*</span> FROM pet WHERE REGEXP_LIKE<span class="o">(</span>name, <span class="s1">'^.{5}$'</span><span class="o">)</span><span class="p">;</span>
<span class="go">+-------+--------+---------+------+------------+-------+
| name  | owner  | species | sex  | birth      | death |
+-------+--------+---------+------+------------+-------+
| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |
| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |
+-------+--------+---------+------+------------+-------+
2 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Counting Rows</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT COUNT<span class="o">(</span><span class="k">*</span><span class="o">)</span> FROM pet<span class="p">;</span>
<span class="go">+----------+
| COUNT(*) |
+----------+
|        9 |
+----------+
1 row in set (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT owner, COUNT<span class="o">(</span><span class="k">*</span><span class="o">)</span> FROM pet GROUP BY owner<span class="p">;</span>
<span class="go">+--------+----------+
| owner  | COUNT(*) |
+--------+----------+
| Diane  |        2 |
| Harold |        2 |
| Gwen   |        3 |
| Benny  |        2 |
+--------+----------+
4 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SET sql_mode <span class="o">=</span> <span class="s1">'ONLY_FULL_GROUP_BY'</span><span class="p">;</span>
<span class="go">Query OK, 0 rows affected (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT owner, COUNT<span class="o">(</span><span class="k">*</span><span class="o">)</span> FROM pet<span class="p">;</span>
<span class="gp">ERROR 1140 (42000): In aggregated query without GROUP BY, expression #</span>1 of SELECT list contains nonaggregated column <span class="s1">'test.pet.owner'</span><span class="p">;</span> this is incompatible with <span class="nv">sql_mode</span><span class="o">=</span>only_full_group_by
<span class="gp">mysql&gt;</span><span class="w"> </span>SET sql_mode <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="go">Query OK, 0 rows affected (0.00 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT owner, COUNT<span class="o">(</span><span class="k">*</span><span class="o">)</span> FROM pet<span class="p">;</span>
<span class="go">+-------+----------+
| owner | COUNT(*) |
+-------+----------+
| Diane |        9 |
+-------+----------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
<li>
<p>Using More Than one Table</p>
<div class="listingblock">
<div class="title">event.sql</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">event</span> <span class="p">(</span>
    <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="nb">date</span> <span class="nb">DATE</span><span class="p">,</span>
    <span class="k">type</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">),</span>
    <span class="n">remark</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Fluffy'</span><span class="p">,</span><span class="s1">'1995-05-15'</span><span class="p">,</span><span class="s1">'litter'</span><span class="p">,</span><span class="s1">'4 kittens, 3 female, 1 male'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Buffy'</span><span class="p">,</span><span class="s1">'1993-06-23'</span><span class="p">,</span><span class="s1">'litter'</span><span class="p">,</span><span class="s1">'5 puppies, 2 female, 3 male'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Buffy'</span><span class="p">,</span><span class="s1">'1994-06-19'</span><span class="p">,</span><span class="s1">'litter'</span><span class="p">,</span><span class="s1">'3 puppies, 3 female'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Chirpy'</span><span class="p">,</span><span class="s1">'1999-03-21'</span><span class="p">,</span><span class="s1">'vet'</span><span class="p">,</span><span class="s1">'needed beak straightened'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Slim'</span><span class="p">,</span><span class="s1">'1997-08-03'</span><span class="p">,</span><span class="s1">'vet'</span><span class="p">,</span><span class="s1">'broken rib'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Bowser'</span><span class="p">,</span><span class="s1">'1991-10-12'</span><span class="p">,</span><span class="s1">'kennel'</span><span class="p">,</span><span class="k">NULL</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Fang'</span><span class="p">,</span><span class="s1">'1991-10-12'</span><span class="p">,</span><span class="s1">'kennel'</span><span class="p">,</span><span class="k">NULL</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Fang'</span><span class="p">,</span><span class="s1">'1998-08-28'</span><span class="p">,</span><span class="s1">'birthday'</span><span class="p">,</span><span class="s1">'Gave him a new chew toy'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'Claws'</span><span class="p">,</span><span class="s1">'1998-03-17'</span><span class="p">,</span><span class="s1">'birthday'</span><span class="p">,</span><span class="s1">'Gave him a new flea collar'</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">event</span> <span class="k">values</span><span class="p">(</span><span class="s1">'Whistler'</span><span class="p">,</span><span class="s1">'1998-12-09'</span><span class="p">,</span><span class="s1">'birthday'</span><span class="p">,</span><span class="s1">'First birthday'</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 sh <span class="nt">-c</span> <span class="s2">"mysql -u root -p test &lt; event.sql"</span>
<span class="go">Enter password: *****</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW TABLES<span class="p">;</span>
<span class="go">+----------------+
| Tables_in_test |
+----------------+
| event          |
| pet            |
+----------------+
2 rows in set (0.02 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>DESCRIBE event<span class="p">;</span>
<span class="go">+--------+--------------+------+-----+---------+-------+
| Field  | Type         | Null | Key | Default | Extra |
+--------+--------------+------+-----+---------+-------+
| name   | varchar(20)  | YES  |     | NULL    |       |
| date   | date         | YES  |     | NULL    |       |
| type   | varchar(15)  | YES  |     | NULL    |       |
| remark | varchar(255) | YES  |     | NULL    |       |
+--------+--------------+------+-----+---------+-------+
4 rows in set (0.03 sec)
</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT pet.name,
<span class="gp">    -&gt;</span><span class="w">     </span>TIMESTAMPDIFF<span class="o">(</span>YEAR, birth, <span class="nb">date</span><span class="o">)</span> AS age,
<span class="gp">    -&gt;</span><span class="w">     </span>remark
<span class="gp">    -&gt;</span><span class="w"> </span>FROM pet
<span class="gp">    -&gt;</span><span class="w">     </span>INNER JOIN event ON pet.name <span class="o">=</span> event.name
<span class="gp">    -&gt;</span><span class="w"> </span>WHERE event.type <span class="o">=</span> <span class="s1">'litter'</span><span class="p">;</span>
<span class="go">+--------+------+-----------------------------+
| name   | age  | remark                      |
+--------+------+-----------------------------+
| Fluffy |    2 | 4 kittens, 3 female, 1 male |
| Buffy  |    5 | 3 puppies, 3 female         |
| Buffy  |    4 | 5 puppies, 2 female, 3 male |
+--------+------+-----------------------------+
3 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security">4. Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When thinking about security within a MySQL installation, you should consider a wide range of possible topics and how they affect the security of your MySQL server and related applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>General factors that affect security.</p>
<div class="paragraph">
<p>These include choosing good passwords, not granting unnecessary privileges to users, ensuring application security by preventing SQL injections and data corruption, and others.</p>
</div>
</li>
<li>
<p>Security of the installation itself.</p>
<div class="paragraph">
<p>The data files, log files, and the all the application files of your installation should be protected to ensure that they are not readable or writable by unauthorized parties.</p>
</div>
</li>
<li>
<p>Access control and security within the database system itself, including the users and databases granted with access to the databases, views and stored programs in use within the database.</p>
</li>
<li>
<p>The features offered by security-related plugins.</p>
</li>
<li>
<p>Network security of MySQL and your system.</p>
<div class="paragraph">
<p>The security is related to the grants for individual users, but you may also wish to restrict MySQL so that it is available only locally on the MySQL server host, or to a limited set of other hosts.</p>
</div>
</li>
<li>
<p>Ensure that you have adequate and appropriate backups of your database files, configuration and log files.</p>
<div class="paragraph">
<p>Also be sure that you have a recovery solution in place and test that you are able to successfully recover the information from your backups.</p>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="security-guidelines">4.1. Security Guidelines</h3>
<div class="paragraph">
<p>Anyone using MySQL on a computer connected to the Internet should read this section to avoid the most common security mistakes.</p>
</div>
<div class="paragraph">
<p>In discussing security, it is necessary to consider fully protecting the entire server host (not just the MySQL server) against all types of applicable attacks: eavesdropping, altering, playback, and denial of service.</p>
</div>
<div class="paragraph">
<p>MySQL uses security based on Access Control Lists (<strong>ACLs</strong>) for all connections, queries, and other operations that users can attempt to perform. There is also support for SSL-encrypted connections between MySQL clients and servers. Many of the concepts discussed here are not specific to MySQL at all; the same general ideas apply to almost all applications.</p>
</div>
<div class="paragraph">
<p>When running MySQL, follow these guidelines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Do not ever give anyone (except MySQL <code>root</code> accounts) access to the <code>user</code> table in the mysql system database!</strong> This is critical.</p>
</li>
<li>
<p>Learn how the MySQL access privilege system works.</p>
<div class="ulist">
<ul>
<li>
<p>Use the <code>GRANT</code> and <code>REVOKE</code> statements to control access to MySQL.</p>
</li>
<li>
<p>Do not grant more privileges than necessary.</p>
</li>
<li>
<p>Never grant privileges to all hosts.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Do not store cleartext passwords in your database.</p>
<div class="paragraph">
<p>If your computer becomes compromised, the intruder can take the full list of passwords and use them. Instead, use <code>SHA2()</code> or some other one-way hashing function and store the hash value.</p>
</div>
<div class="paragraph">
<p>To prevent password recovery using rainbow tables, do not use these functions on a plain password; instead, choose some string to be used as a salt, and use <code>hash(hash(password)+salt)</code> values.</p>
</div>
</li>
<li>
<p>Invest in a firewall. This protects you from at least 50% of all types of exploits in any software. Put MySQL behind the firewall or in a demilitarized zone (DMZ).</p>
</li>
<li>
<p>Applications that access MySQL should not trust any data entered by users, and should be written using proper defensive programming techniques.</p>
</li>
<li>
<p>Do not transmit plain (unencrypted) data over the Internet.</p>
</li>
<li>
<p>Learn to use the <code>tcpdump</code> and <code>strings</code> utilities.</p>
<div class="paragraph">
<p>In most cases, you can check whether MySQL data streams are unencrypted by issuing a command like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>tcpdump <span class="nt">-l</span> <span class="nt">-i</span> eth0 <span class="nt">-w</span> - src or dst port 3306 | strings</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="access-control-and-account-management">4.2. Access Control and Account Management</h3>
<div class="paragraph">
<p>MySQL enables the creation of accounts that permit client users to connect to the server and access data managed by the server. The primary function of the MySQL privilege system is to authenticate a user who connects from a given host and to associate that user with privileges on a database such as SELECT, INSERT, UPDATE, and DELETE. Additional functionality includes the ability to grant privileges for administrative operations.</p>
</div>
<div class="paragraph">
<p>To control which users can connect, each account can be assigned authentication credentials such as a password. The user interface to MySQL accounts consists of SQL statements such as <code>CREATE USER</code>, <code>GRANT</code>, and <code>REVOKE</code>.</p>
</div>
<div class="paragraph">
<p>The MySQL privilege system ensures that all users may perform only the operations permitted to them.</p>
</div>
<div class="paragraph">
<p>As a user, when you connect to a MySQL server, your identity is determined by <strong>the host from which you connect</strong> and <strong>the user name you specify</strong>.</p>
</div>
<div class="paragraph">
<p>When you issue requests after connecting, the system grants privileges according to your identity and what you want to do.</p>
</div>
<div class="paragraph">
<p>MySQL considers both your host name and user name in identifying you because there is no reason to assume that a given user name belongs to the same person on all hosts.</p>
</div>
<div class="paragraph">
<p>To see what privileges a given account has, use the <code>SHOW GRANTS</code> statement. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">SHOW GRANTS FOR 'joe'@'office.example.com';</span><span class="w">
</span><span class="gp">SHOW GRANTS FOR 'joe'@'home.example.com';</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>MySQL access control involves two stages when you run a client program that connects to the server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Stage 1: The server <strong>accepts or rejects the connection</strong> based on your identity and whether you can verify your identity by supplying the correct password.</p>
</li>
<li>
<p>Stage 2: Assuming that you can connect, the server <strong>checks each statement you issue</strong> to determine whether you have sufficient privileges to perform it.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="account-user-names-and-passwords">4.3. Account User Names and Passwords</h3>
<div class="paragraph">
<p>MySQL stores accounts in the <code>user</code> table of the <code>mysql</code> system database. An account is defined in terms of a user name and the client host or hosts from which the user can connect to the server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>DESCRIBE mysql.user<span class="p">;</span>
<span class="go">+--------------------------+-----------------------------------+------+-----+-----------------------+-------+
| Field                    | Type                              | Null | Key | Default               | Extra |
+--------------------------+-----------------------------------+------+-----+-----------------------+-------+
| Host                     | char(255)                         | NO   | PRI |                       |       |
| User                     | char(32)                          | NO   | PRI |                       |       |
| Select_priv              | enum('N','Y')                     | NO   |     | N                     |       |
| Insert_priv              | enum('N','Y')                     | NO   |     | N                     |       |
| Update_priv              | enum('N','Y')                     | NO   |     | N                     |       |
| Delete_priv              | enum('N','Y')                     | NO   |     | N                     |       |
| Create_priv              | enum('N','Y')                     | NO   |     | N                     |       |
| Drop_priv                | enum('N','Y')                     | NO   |     | N                     |       |

</span><span class="c">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An account may also have authentication credentials such as a password. The credentials are handled by the account authentication plugin. MySQL supports multiple authentication plugins. Some of them use built-in authentication methods, whereas others enable authentication using external authentication methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT Host,User FROM mysql.user<span class="p">;</span>
<span class="go">+-----------+------------------+
| Host      | User             |
+-----------+------------------+
| %         | root             |
| localhost | mysql.infoschema |
| localhost | mysql.session    |
| localhost | mysql.sys        |
| localhost | root             |
+-----------+------------------+
5 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="privileges-provided-by-mysql">4.4. Privileges Provided by MySQL</h3>
<div class="paragraph">
<p>The privileges granted to a MySQL account determine which operations the account can perform. MySQL privileges differ in the contexts in which they apply and at different levels of operation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Administrative privileges</strong> enable users to manage operation of the MySQL server.</p>
<div class="paragraph">
<p>These privileges are global because they are not specific to a particular database.</p>
</div>
</li>
<li>
<p><strong>Database privileges</strong> apply to a database and to all objects within it.</p>
<div class="paragraph">
<p>These privileges can be granted for specific databases, or globally so that they apply to all databases.</p>
</div>
</li>
<li>
<p><strong>Privileges for database objects</strong> such as tables, indexes, views, and stored routines can be granted for specific objects within a database, for all objects of a given type within a database (for example, all tables in a database), or globally for all objects of a given type in all databases.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="grant-tables">4.5. Grant Tables</h3>
<div class="paragraph">
<p>The mysql system database includes several grant tables that contain information about user accounts and the privileges held by them.</p>
</div>
<div class="paragraph">
<p>However, normally you do not modify the grant tables directly. Modifications occur indirectly when you use account-management statements such as <code>CREATE USER</code>, <code>GRANT</code>, and <code>REVOKE</code> to set up accounts and control the privileges available to each one. When you use such statements to perform account manipulations, the server modifies the grant tables on your behalf.</p>
</div>
<div class="paragraph">
<p>These mysql database tables contain grant information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>user: User accounts, static global privileges, and other nonprivilege columns.</p>
</li>
<li>
<p>global_grants: Dynamic global privileges.</p>
</li>
<li>
<p>db: Database-level privileges.</p>
</li>
<li>
<p>tables_priv: Table-level privileges.</p>
</li>
<li>
<p>columns_priv: Column-level privileges.</p>
</li>
<li>
<p>procs_priv: Stored procedure and function privileges.</p>
</li>
<li>
<p>proxies_priv: Proxy-user privileges.</p>
</li>
<li>
<p>default_roles: Default user roles.</p>
</li>
<li>
<p>role_edges: Edges for role subgraphs.</p>
</li>
<li>
<p>password_history: Password change history.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To check the privileges for a given account, use the <code>SHOW GRANTS</code> statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SHOW</span> <span class="n">GRANTS</span> <span class="k">FOR</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'pc84.example.com'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To display nonprivilege properties of an account, use <code>SHOW CREATE</code> USER:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'bob'</span><span class="o">@</span><span class="s1">'pc84.example.com'</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="specifying-account-names">4.6. Specifying Account Names</h3>
<div class="paragraph">
<p>MySQL account names consist of a user name and a host name, which enables creation of distinct accounts for users with the same user name who connect from different hosts.</p>
</div>
<div class="paragraph">
<p>Account names appear in SQL statements such as <code>CREATE USER</code>, <code>GRANT</code>, and <code>SET PASSWORD</code> and follow these rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Account name syntax is <code>'user_name'@'host_name'</code>.</p>
</li>
<li>
<p>The <code>@'host_name'</code> part is optional.</p>
<div class="paragraph">
<p>An account name consisting only of a user name is equivalent to <code>'user_name'@'%'</code>. For example, <code>'me'</code> is equivalent to <code>'me'@'%'</code>.</p>
</div>
</li>
<li>
<p>The user name and host name need not be quoted if they are legal as unquoted identifiers.</p>
<div class="paragraph">
<p>Quotes must be used if a user_name string contains special characters (such as space or -), or a host_name string contains special characters or wildcard characters (such as . or %).</p>
</div>
<div class="paragraph">
<p>For example, in the account name <code>'test-user'@'%.com'</code>, both the user name and host name parts require quotes.</p>
</div>
</li>
<li>
<p>Quote user names and host names as identifiers or as strings, using either backticks (<code>`</code>), single quotation marks (<code>'</code>), or double quotation marks (<code>"</code>).</p>
</li>
<li>
<p>The user name and host name parts, if quoted, must be quoted separately. That is, write <code>'me'@'localhost'</code>, not <code>'me@localhost'</code>. The latter is actually equivalent to <code>'me@localhost'@'%'</code>.</p>
</li>
<li>
<p>A reference to the <code>CURRENT_USER</code> or <code>CURRENT_USER()</code> function is equivalent to specifying the current client&#8217;s user name and host name literally.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT CURRENT_USER<span class="p">;</span>
<span class="go">+----------------+
| CURRENT_USER   |
+----------------+
| root@localhost |
+----------------+
1 row in set (0.01 sec)
</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>MySQL stores account names in grant tables in the <code>mysql</code> system database using separate columns for the user name and host name parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>user</code> table contains one row for each account.</p>
<div class="ulist">
<ul>
<li>
<p>The <code>User</code> and <code>Host</code> columns store the user name and host name.</p>
</li>
<li>
<p>This table also indicates which global privileges the account has.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Other grant tables indicate privileges an account has for databases and objects within databases.</p>
<div class="ulist">
<ul>
<li>
<p>These tables have <code>User</code> and <code>Host</code> columns to store the account name.</p>
</li>
<li>
<p>Each row in these tables associates with the account in the <code>user</code> table that has the same <code>User</code> and <code>Host</code> values.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For access-checking purposes,</p>
<div class="ulist">
<ul>
<li>
<p>comparisons of <code>User</code> values are case-sensitive;</p>
</li>
<li>
<p>comparisons of <code>Host</code> values are not case-sensitive.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>User names and host names have certain special values or wildcard conventions, as described following.</p>
</div>
<div class="paragraph">
<p>An account with a blank user name is an <strong>anonymous user</strong>. To specify an anonymous user in SQL statements, use a quoted empty user name part, such as <code>''@'localhost'</code>.</p>
</div>
<div class="paragraph">
<p>The host name part of an account name can take many forms, and wildcards are permitted:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A host value can be a host name or an IP address (IPv4 or IPv6).</p>
<div class="ulist">
<ul>
<li>
<p>The name <code>'localhost'</code> indicates the local host.</p>
</li>
<li>
<p>The IP address <code>'127.0.0.1'</code> indicates the IPv4 loopback interface.</p>
</li>
<li>
<p>The IP address <code>'::1'</code> indicates the IPv6 loopback interface.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <code>%</code> and <code>_</code> wildcard characters are permitted in host name or IP address values. These have the same meaning as for pattern-matching operations performed with the <code>LIKE</code> operator.</p>
<div class="ulist">
<ul>
<li>
<p>A host value of <code>'%'</code> matches any host name, whereas a value of <code>'%.mysql.com'</code> matches any host in the <code>mysql.com</code> domain.</p>
</li>
<li>
<p><code>'198.51.100.%'</code> matches any host in the <code>198.51.100</code> class C network.</p>
</li>
</ul>
</div>
</li>
<li>
<p>MySQL does not perform matching on host names that start with digits and a dot.</p>
</li>
<li>
<p>For a host value specified as an IPv4 address, a netmask can be given to indicate how many address bits to use for the network number. Netmask notation cannot be used for IPv6 addresses.</p>
<div class="paragraph">
<p>The syntax is <code>host_ip/netmask</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'david'</span><span class="o">@</span><span class="s1">'198.51.100.0/255.255.255.0'</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>As of MySQL 8.0.23, a host value specified as an IPv4 address can be written using CIDR notation, such as <code>198.51.100.44/24</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="specifying-role-names">4.7. Specifying Role Names</h3>
<div class="paragraph">
<p>MySQL role names refer to roles, which are named collections of privileges.</p>
</div>
<div class="paragraph">
<p>Role names have syntax and semantics similar to account names. As stored in the grant tables, they have the same properties as account names.</p>
</div>
<div class="paragraph">
<p>Role names differ from account names in these respects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The user part of role names cannot be blank. Thus, there is no “anonymous role” analogous to the concept of “anonymous user.”</p>
</li>
<li>
<p>As for an account name, omitting the host part of a role name results in a host part of <code>'%&#8216;. But unlike &#8217;%'</code> in an account name, a host part of <code>'%'</code> in a role name has no wildcard properties. For example, for a name <code>'me'@'%'</code> used as a role name, the host part (&#8217;%'`) is just a literal value; it has no “any host” matching property.</p>
</li>
<li>
<p>Netmask notation in the host part of a role name has no significance.</p>
</li>
<li>
<p>An account name is permitted to be <code>CURRENT_USER()</code> in several contexts. A role name is not.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="access-control-stage-1-connection-verification">4.8. Access Control, Stage 1: Connection Verification</h3>
<div class="paragraph">
<p>When you attempt to connect to a MySQL server, the server accepts or rejects the connection based on these conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your identity and whether you can verify it by supplying the proper credentials.</p>
</li>
<li>
<p>Whether your account is locked or unlocked.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The server checks credentials first, then account locking state. A failure at either step causes the server to deny access to you completely. Otherwise, the server accepts the connection, and then enters Stage 2 and waits for requests.</p>
</div>
<div class="paragraph">
<p>The server performs identity and credentials checking using columns in the user table, accepting the connection only if these conditions are satisfied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The client host name and user name match the <code>Host</code> and <code>User</code> columns in some user table row.</p>
</li>
<li>
<p>The client supplies the credentials specified in the row (for example, a password), as indicated by the <code>authentication_string</code> column. Credentials are interpreted using the authentication plugin named in the <code>plugin</code> column.</p>
</li>
<li>
<p>The row indicates that the account is unlocked. Locking state is recorded in the <code>account_locked</code> column, which must have a value of <code>'N'</code>. Account locking can be set or changed with the <code>CREATE USER</code> or <code>ALTER USER</code> statement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>authentication_string</code> column can be blank. This is not a wildcard and does not mean that any password matches. It means that the user must connect without specifying a password. The authentication method implemented by the plugin that authenticates the client may or may not use the password in the <code>authentication_string</code> column. In this case, it is possible that an external password is also used to authenticate to the MySQL server.</p>
</div>
<div class="paragraph">
<p>From MySQL&#8217;s point of view, the encrypted password is the <strong>real</strong> password, so you should never give anyone access to it. In particular, <strong>do not give nonadministrative users read access to tables in the <code>mysql</code> system database</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="access-control-stage-2-request-verification">4.9. Access Control, Stage 2: Request Verification</h3>
<div class="paragraph">
<p>After the server accepts a connection, it enters Stage 2 of access control. For each request that you issue through the connection, the server determines what operation you want to perform, then checks whether your privileges are sufficient. This is where the privilege columns in the grant tables come into play. These privileges can come from any of the <code>user</code>, <code>global_grants</code>, <code>db</code>, <code>tables_priv</code>, <code>columns_priv</code>, or <code>procs_priv</code> tables.</p>
</div>
<div class="paragraph">
<p>The <code>user</code> and <code>global_grants</code> tables grant <strong>global privileges</strong> for a given account indicate the account privileges that apply on a global basis no matter what the default database is.</p>
</div>
<div class="paragraph">
<p>It is wise to grant privileges in the <code>user</code> table only to people who need them, such as database administrators.</p>
</div>
<div class="paragraph">
<p>For other users, leave all privileges in the user table set to <code>'N'</code> and grant privileges at more specific levels only (for particular databases, tables, columns, or routines).</p>
</div>
</div>
<div class="sect2">
<h3 id="adding-accounts-assigning-privileges-and-dropping-accounts">4.10. Adding Accounts, Assigning Privileges, and Dropping Accounts</h3>
<div class="paragraph">
<p>To manage MySQL accounts, use the SQL statements intended for that purpose:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CREATE USER</code> and <code>DROP USER</code> create and remove accounts.</p>
</li>
<li>
<p><code>GRANT</code> and <code>REVOKE</code> assign privileges to and revoke privileges from accounts.</p>
</li>
<li>
<p><code>SHOW GRANTS</code> displays account privilege assignments.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="creating-accounts-and-granting-privileges">4.10.1. Creating Accounts and Granting Privileges</h4>
<div class="paragraph">
<p>The following example uses <code>CREATE USER</code> and <code>GRANT</code> statements to set up four accounts (where you see <code>'password'</code>, substitute an appropriate password):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'finley'</span> <span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'finley'</span> <span class="o">@</span><span class="s1">'localhost'</span> <span class="k">WITH</span>
<span class="k">GRANT</span> <span class="k">OPTION</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'finley'</span> <span class="o">@</span><span class="s1">'%.example.com'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'finley'</span> <span class="o">@</span><span class="s1">'%.example.com'</span> <span class="k">WITH</span>
<span class="k">GRANT</span> <span class="k">OPTION</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'admin'</span> <span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="n">RELOAD</span><span class="p">,</span>
    <span class="n">PROCESS</span> <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'admin'</span> <span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'dummy'</span> <span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous example grants privileges at the global level. The next example creates three accounts and grants them access at lower levels; that is, to specific databases or objects within databases. Each account has a user name of custom, but the host name parts differ:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'custom'</span> <span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">bankaccount</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'custom'</span> <span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'custom'</span> <span class="o">@</span><span class="s1">'host47.example.com'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span>
    <span class="k">INSERT</span><span class="p">,</span>
    <span class="k">UPDATE</span><span class="p">,</span>
    <span class="k">DELETE</span><span class="p">,</span>
    <span class="k">CREATE</span><span class="p">,</span>
    <span class="k">DROP</span> <span class="k">ON</span> <span class="n">expenses</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'custom'</span> <span class="o">@</span><span class="s1">'host47.example.com'</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'custom'</span> <span class="o">@</span><span class="s1">'%.example.com'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span>
    <span class="k">INSERT</span><span class="p">,</span>
    <span class="k">UPDATE</span><span class="p">,</span>
    <span class="k">DELETE</span><span class="p">,</span>
    <span class="k">CREATE</span><span class="p">,</span>
    <span class="k">DROP</span> <span class="k">ON</span> <span class="n">customer</span><span class="p">.</span><span class="n">addresses</span> <span class="k">TO</span> <span class="s1">'custom'</span> <span class="o">@</span><span class="s1">'%.example.com'</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="checking-account-privileges-and-properties">4.10.2. Checking Account Privileges and Properties</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT User,Host FROM mysql.user<span class="p">;</span>
<span class="go">+------------------+--------------------+
| User             | Host               |
+------------------+--------------------+
| root             | %                  |
| custom           | %.example.com      |
| finley           | %.example.com      |
| custom           | host47.example.com |
| admin            | localhost          |
| custom           | localhost          |
| dummy            | localhost          |
| finley           | localhost          |
| mysql.infoschema | localhost          |
| mysql.session    | localhost          |
| mysql.sys        | localhost          |
| root             | localhost          |
+------------------+--------------------+
12 rows in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To see the privileges for an account, use <code>SHOW GRANTS</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW GRANTS FOR <span class="s1">'admin'</span>@<span class="s1">'localhost'</span><span class="p">;</span>
<span class="go">+-----------------------------------------------------+
| Grants for admin@localhost                          |
+-----------------------------------------------------+
| GRANT RELOAD, PROCESS ON *.* TO `admin`@`localhost` |
+-----------------------------------------------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To see nonprivilege properties for an account, use <code>SHOW CREATE USER</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW CREATE USER <span class="s1">'admin'</span>@<span class="s1">'localhost'</span><span class="se">\G</span>
<span class="go">*************************** 1. row ***************************
</span><span class="gp">CREATE USER for admin@localhost: CREATE USER `admin`@`localhost` IDENTIFIED WITH 'caching_sha2_password' AS '$</span>A<span class="nv">$005$d6zqX</span><span class="se">\n</span>G<span class="se">\'</span>S03<span class="o">)</span>B8Ixmrn5EBoH1Fc4MFp5p07e1AIzknBpHaKaHwdaXpB<span class="s1">' REQUIRE NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK PASSWORD HISTORY DEFAULT PASSWORD REUSE INTERVAL DEFAULT PASSWORD REQUIRE CURRENT DEFAULT
</span><span class="go">1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="revoking-account-privileges">4.10.3. Revoking Account Privileges</h4>
<div class="paragraph">
<p>To revoke account privileges, use the <code>REVOKE</code> statement. Privileges can be revoked at different levels, just as they can be granted at different levels.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Revoke global privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">REVOKE</span> <span class="k">ALL</span>
  <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span>
  <span class="k">FROM</span> <span class="s1">'finley'</span><span class="o">@</span><span class="s1">'%.example.com'</span><span class="p">;</span>

<span class="k">REVOKE</span> <span class="n">RELOAD</span>
  <span class="k">ON</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span>
  <span class="k">FROM</span> <span class="s1">'admin'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Revoke database-level privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">REVOKE</span> <span class="k">CREATE</span><span class="p">,</span><span class="k">DROP</span>
  <span class="k">ON</span> <span class="n">expenses</span><span class="p">.</span><span class="o">*</span>
  <span class="k">FROM</span> <span class="s1">'custom'</span><span class="o">@</span><span class="s1">'host47.example.com'</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Revoke table-level privileges:</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">REVOKE</span> <span class="k">INSERT</span><span class="p">,</span><span class="k">UPDATE</span><span class="p">,</span><span class="k">DELETE</span>
  <span class="k">ON</span> <span class="n">customer</span><span class="p">.</span><span class="n">addresses</span>
  <span class="k">FROM</span> <span class="s1">'custom'</span><span class="o">@</span><span class="s1">'%.example.com'</span><span class="p">;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To check the effect of privilege revocation, use <code>SHOW GRANTS</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW GRANTS FOR <span class="s1">'admin'</span>@<span class="s1">'localhost'</span><span class="p">;</span>
<span class="go">+---------------------------------------------+
| Grants for admin@localhost                  |
+---------------------------------------------+
| GRANT PROCESS ON *.* TO `admin`@`localhost` |
+---------------------------------------------+</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dropping-accounts">4.10.4. Dropping Accounts</h4>
<div class="paragraph">
<p>To remove an account, use the <code>DROP USER</code> statement. For example, to drop some of the accounts created previously:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">DROP</span> <span class="k">USER</span> <span class="s1">'finley'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">USER</span> <span class="s1">'finley'</span><span class="o">@</span><span class="s1">'%.example.com'</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">USER</span> <span class="s1">'admin'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">USER</span> <span class="s1">'dummy'</span><span class="o">@</span><span class="s1">'localhost'</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="assigning-account-passwords">4.11. Assigning Account Passwords</h3>
<div class="paragraph">
<p>To assign a password when you create a new account, use <code>CREATE USER</code> and include an <code>IDENTIFIED BY</code> clause:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'jeffrey'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To assign or change a password for an existing account, use the <code>ALTER USER</code> statement with an <code>IDENTIFIED BY</code> clause:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'jeffrey'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are not connected as an anonymous user, you can change your own password without naming your own account literally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">ALTER</span> <span class="k">USER</span> <span class="k">USER</span><span class="p">()</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'password'</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="account-locking">4.12. Account Locking</h3>
<div class="paragraph">
<p>MySQL supports locking and unlocking user accounts using the <code>ACCOUNT LOCK</code> and <code>ACCOUNT UNLOCK</code> clauses for the <code>CREATE USER</code> and <code>ALTER USER</code> statements:</p>
</div>
<div class="paragraph">
<p>When used with <code>CREATE USER</code>, these clauses specify the initial locking state for a new account. In the absence of either clause, the account is created in an unlocked state.</p>
</div>
<div class="paragraph">
<p>When used with <code>ALTER USER</code>, these clauses specify the new locking state for an existing account. In the absence of either clause, the account locking state remains unchanged.</p>
</div>
<div class="paragraph">
<p>Account locking state is recorded in the account_locked column of the <code>mysql.user</code> system table. The output from <code>SHOW CREATE USER</code> indicates whether an account is locked or unlocked.</p>
</div>
<div class="paragraph">
<p>If a client attempts to connect to a locked account, the attempt fails. The server increments the Locked_connects status variable that indicates the number of attempts to connect to a locked account, returns an <code>ER_ACCOUNT_HAS_BEEN_LOCKED</code> error, and writes a message to the error log:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">Access denied for user 'user_name'@'host_name'.
Account is locked.</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>CREATE USER <span class="nb">test</span>@localhost IDENTIFIED BY <span class="s1">'pwd'</span><span class="p">;</span>
<span class="go">Query OK, 0 rows affected (0.02 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>GRANT ALL ON test.<span class="k">*</span> TO <span class="nb">test</span>@localhost<span class="p">;</span>
<span class="go">Query OK, 0 rows affected, 1 warning (0.01 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SHOW WARNINGS<span class="p">;</span>
<span class="go">+---------+------+--------------------------------------------------------------------------------------------------------------+
| Level   | Code | Message                                                                                                      |
+---------+------+--------------------------------------------------------------------------------------------------------------+
</span><span class="gp">| Warning | 1285 | MySQL is started in --skip-name-resolve mode;</span><span class="w"> </span>you must restart it without this switch <span class="k">for </span>this grant to work |
<span class="go">+---------+------+--------------------------------------------------------------------------------------------------------------+
1 row in set (0.01 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>ALTER USER <span class="nb">test</span>@localhost ACCOUNT LOCK<span class="p">;</span>
<span class="go">Query OK, 0 rows affected (0.01 sec)

</span><span class="gp">mysql&gt;</span><span class="w"> </span>SELECT User,Host,account_locked FROM mysql.user WHERE <span class="nv">User</span><span class="o">=</span><span class="s1">'test'</span><span class="p">;</span>
<span class="go">+------+-----------+----------------+
| User | Host      | account_locked |
+------+-----------+----------------+
| test | localhost | Y              |
+------+-----------+----------------+
1 row in set (0.00 sec)
</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 mysql <span class="nt">-u</span> <span class="nb">test</span> <span class="nt">-p</span>
<span class="go">Enter password:
ERROR 3118 (HY000): Access denied for user 'test'@'localhost'. Account is locked.</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>DROP USER <span class="nb">test</span>@localhost<span class="p">;</span>
<span class="go">Query OK, 0 rows affected (0.01 sec)
</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="backup-and-recovery">5. Backup and Recovery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is important to back up your databases so that you can recover your data and be up and running again in case problems occur, such as system crashes, hardware failures, or users deleting data by mistake. Backups are also essential as a safeguard before upgrading a MySQL installation, and they can be used to transfer a MySQL installation to another system or to set up replica servers.</p>
</div>
<div class="sect2">
<h3 id="using-mysqldump-for-backups">5.1. Using mysqldump for Backups</h3>
<div class="paragraph">
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html"><strong>mysqldump</strong></a> produces two types of output, depending on whether the <code>--tab</code> option is given:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Without <code>--tab</code>, mysqldump writes SQL statements to the standard output.</p>
<div class="ulist">
<ul>
<li>
<p>This output consists of <code>CREATE</code> statements to create dumped objects (databases, tables, stored routines, and so forth), and <code>INSERT</code> statements to load data into tables.</p>
</li>
<li>
<p>The output can be saved in a file and reloaded later using mysql to recreate the dumped objects.</p>
</li>
<li>
<p>Options are available to modify the format of the SQL statements, and to control which objects are dumped.</p>
</li>
</ul>
</div>
</li>
<li>
<p>With <code>--tab</code>, mysqldump produces two output files for each dumped table.</p>
<div class="ulist">
<ul>
<li>
<p>The server writes one file as tab-delimited text, one line per table row.</p>
</li>
<li>
<p>This file is named <code>tbl_name.txt</code> in the output directory.</p>
</li>
<li>
<p>The server also sends a <code>CREATE TABLE</code> statement for the table to mysqldump, which writes it as a file named <code>tbl_name.sql</code> in the output directory.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="dumping-data-in-sql-format-with-mysqldump">5.1.1. Dumping Data in SQL Format with mysqldump</h4>
<div class="paragraph">
<p>By default, mysqldump writes information as SQL statements to the standard output. You can save the output in a file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mysqldump <span class="o">[</span>arguments] <span class="o">&gt;</span> file_name</code></pre>
</div>
</div>
<div class="paragraph">
<p>To dump all databases, invoke mysqldump with the <code>--all-databases</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mysqldump <span class="nt">--all-databases</span> <span class="o">&gt;</span> dump.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>To dump only specific databases, name them on the command line and use the <code>--databases</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mysqldump <span class="nt">--databases</span> db1 db2 db3 <span class="o">&gt;</span> dump.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--databases</code> option causes all names on the command line to be treated as database names. Without this option, mysqldump treats the first name as a database name and those following as table names.</p>
</div>
<div class="paragraph">
<p>With <code>--all-databases</code> or <code>--databases</code>, mysqldump writes <code>CREATE DATABASE</code> and <code>USE</code> statements prior to the dump output for each database. This ensures that when the dump file is reloaded, it creates each database if it does not exist and makes it the default database so database contents are loaded into the same database from which they came. If you want to cause the dump file to force a drop of each database before recreating it, use the <code>--add-drop-database</code> option as well. In this case, mysqldump writes a <code>DROP DATABASE</code> statement preceding each <code>CREATE DATABASE</code> statement.</p>
</div>
<div class="paragraph">
<p>To dump a single database, name it on the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="o">&gt;</span> mysqldump <span class="nt">--databases</span> <span class="nb">test</span> <span class="o">&gt;</span> dump.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the single-database case, it is permissible to omit the <code>--databases</code> option:</p>
</div>
<div class="paragraph">
<p>$&gt; mysqldump test &gt; dump.sql</p>
</div>
<div class="paragraph">
<p>The difference between the two preceding commands is that without <code>--databases</code>, the dump output contains no <code>CREATE DATABASE</code> or <code>USE</code> statements.</p>
</div>
<div class="paragraph">
<p>To dump only specific tables from a database, name them on the command line following the database name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="o">&gt;</span> mysqldump <span class="nb">test </span>t1 t3 t7 <span class="o">&gt;</span> dump.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 sh <span class="nt">-c</span> <span class="s2">"mysqldump -u root -p --databases test &gt; /tmp/test.sql"</span>
<span class="go">Enter password:

</span><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> mysql8 <span class="nb">cat</span> /tmp/test.sql
<span class="go">-- MySQL dump 10.13  Distrib 8.0.27, for Linux (x86_64)
--
-- Host: localhost    Database: test
-- ------------------------------------------------------
-- Server version	8.0.27
</span><span class="c">...
</span><span class="go">-- Dump completed on 2021-12-30  8:07:50</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="reloading-sql-format-backups">5.1.2. Reloading SQL-Format Backups</h4>
<div class="paragraph">
<p>To reload a dump file written by mysqldump that consists of SQL statements, use it as input to the <strong>mysql</strong> client. If the dump file was created by <strong>mysqldump</strong> with the <code>--all-databases</code> or <code>--databases</code> option, it contains <code>CREATE DATABASE</code> and <code>USE</code> statements and it is not necessary to specify a default database into which to load the data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mysql &lt; dump.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, from within mysql, use a <code>source</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span><span class="nb">source </span>dump.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the file is a single-database dump not containing <code>CREATE DATABASE</code> and <code>USE</code> statements, create the database first (if necessary):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mysqladmin create db1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then specify the database name when you load the dump file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>mysql db1 &lt; dump.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, from within mysql, create the database, select it as the default database, and load the dump file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">mysql&gt;</span><span class="w"> </span>CREATE DATABASE IF NOT EXISTS db1<span class="p">;</span>
<span class="gp">mysql&gt;</span><span class="w"> </span>USE db1<span class="p">;</span>
<span class="gp">mysql&gt;</span><span class="w"> </span><span class="nb">source </span>dump.sql</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-innodb-storage-engine">6. The InnoDB Storage Engine</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="https://dev.mysql.com/doc/refman/8.0/en/images/innodb-architecture.png" alt="innodb architecture" width="75%" height="75%">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references">7. References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://hub.docker.com/_/mysql" class="bare">https://hub.docker.com/_/mysql</a></p>
</li>
<li>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/" class="bare">https://dev.mysql.com/doc/refman/8.0/en/</a></p>
</li>
</ul>
</div>
</div>
</div>
<style>
  .utterances {
      max-width: 100%;
  }
</style>
<script src="https://utteranc.es/client.js"
        repo="looogos/utterances"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</div>
</article>
    </main>
    <footer class="c-footer">
  <div class="c-footer-license">
    <span>Article licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></span>
  </div>
  
  <details class="c-footer-extralinks" open>
    <summary class="c-footer-extralinks-summary">Extral Links</summary>
    <div class="c-footer-extralinks-content">
      
      <a href="https://jekyllrb.com/">Jekyll</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://shopify.github.io/liquid/">Liquid</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://docs.asciidoctor.org/">Asciidoctor</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="https://github.com/qqbuby/">GitHub</a>
      
      &nbsp;.&nbsp;
      
      
      <a href="/feed.xml">RSS</a>
      
      
    </div>
  </details>
  
</footer>

    <script src="/assets/js/nav.js" defer></script>
    <script src="/assets/js/heading-anchors.js" defer></script>
    <!-- https://cdn.jsdelivr.net/gh/lurongkai/anti-baidu/js/anti-baidu-latest.min.js -->    
    <script type="text/javascript" src="/js/anti-baidu.min.js" charset="UTF-8"></script>
  </body>
</html>
